var Oy=Object.defineProperty;var Ry=(n,s,r)=>s in n?Oy(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var Ne=(n,s,r)=>Ry(n,typeof s!="symbol"?s+"":s,r);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();function Qu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mu={exports:{}},Js={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Ly(){if(Jg)return Js;Jg=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(o,c,u){var m=null;if(u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),"key"in c){u={};for(var b in c)b!=="key"&&(u[b]=c[b])}else u=c;return c=u.ref,{$$typeof:n,type:o,key:m,ref:c!==void 0?c:null,props:u}}return Js.Fragment=s,Js.jsx=r,Js.jsxs=r,Js}var eh;function Py(){return eh||(eh=1,mu.exports=Ly()),mu.exports}var l=Py(),gu={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th;function By(){if(th)return Qe;th=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function x(S){return S===null||typeof S!="object"?null:(S=v&&S[v]||S["@@iterator"],typeof S=="function"?S:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,A={};function j(S,F,B){this.props=S,this.context=F,this.refs=A,this.updater=B||N}j.prototype.isReactComponent={},j.prototype.setState=function(S,F){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,F,"setState")},j.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function O(){}O.prototype=j.prototype;function T(S,F,B){this.props=S,this.context=F,this.refs=A,this.updater=B||N}var I=T.prototype=new O;I.constructor=T,D(I,j.prototype),I.isPureReactComponent=!0;var R=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function se(S,F,B,X,te,Te){return B=Te.ref,{$$typeof:n,type:S,key:F,ref:B!==void 0?B:null,props:Te}}function q(S,F){return se(S.type,F,void 0,void 0,void 0,S.props)}function ie(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function ue(S){var F={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(B){return F[B]})}var K=/\/+/g;function me(S,F){return typeof S=="object"&&S!==null&&S.key!=null?ue(""+S.key):F.toString(36)}function Me(){}function Z(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Me,Me):(S.status="pending",S.then(function(F){S.status==="pending"&&(S.status="fulfilled",S.value=F)},function(F){S.status==="pending"&&(S.status="rejected",S.reason=F)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function Ae(S,F,B,X,te){var Te=typeof S;(Te==="undefined"||Te==="boolean")&&(S=null);var we=!1;if(S===null)we=!0;else switch(Te){case"bigint":case"string":case"number":we=!0;break;case"object":switch(S.$$typeof){case n:case s:we=!0;break;case p:return we=S._init,Ae(we(S._payload),F,B,X,te)}}if(we)return te=te(S),we=X===""?"."+me(S,0):X,R(te)?(B="",we!=null&&(B=we.replace(K,"$&/")+"/"),Ae(te,F,B,"",function(_e){return _e})):te!=null&&(ie(te)&&(te=q(te,B+(te.key==null||S&&S.key===te.key?"":(""+te.key).replace(K,"$&/")+"/")+we)),F.push(te)),1;we=0;var oe=X===""?".":X+":";if(R(S))for(var xe=0;xe<S.length;xe++)X=S[xe],Te=oe+me(X,xe),we+=Ae(X,F,B,Te,te);else if(xe=x(S),typeof xe=="function")for(S=xe.call(S),xe=0;!(X=S.next()).done;)X=X.value,Te=oe+me(X,xe++),we+=Ae(X,F,B,Te,te);else if(Te==="object"){if(typeof S.then=="function")return Ae(Z(S),F,B,X,te);throw F=String(S),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return we}function E(S,F,B){if(S==null)return S;var X=[],te=0;return Ae(S,X,"","",function(Te){return F.call(B,Te,te++)}),X}function W(S){if(S._status===-1){var F=S._result;F=F(),F.then(function(B){(S._status===0||S._status===-1)&&(S._status=1,S._result=B)},function(B){(S._status===0||S._status===-1)&&(S._status=2,S._result=B)}),S._status===-1&&(S._status=0,S._result=F)}if(S._status===1)return S._result.default;throw S._result}var ce=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function pe(){}return Qe.Children={map:E,forEach:function(S,F,B){E(S,function(){F.apply(this,arguments)},B)},count:function(S){var F=0;return E(S,function(){F++}),F},toArray:function(S){return E(S,function(F){return F})||[]},only:function(S){if(!ie(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Qe.Component=j,Qe.Fragment=r,Qe.Profiler=c,Qe.PureComponent=T,Qe.StrictMode=o,Qe.Suspense=h,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return _.H.useMemoCache(S)}},Qe.cache=function(S){return function(){return S.apply(null,arguments)}},Qe.cloneElement=function(S,F,B){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var X=D({},S.props),te=S.key,Te=void 0;if(F!=null)for(we in F.ref!==void 0&&(Te=void 0),F.key!==void 0&&(te=""+F.key),F)!$.call(F,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&F.ref===void 0||(X[we]=F[we]);var we=arguments.length-2;if(we===1)X.children=B;else if(1<we){for(var oe=Array(we),xe=0;xe<we;xe++)oe[xe]=arguments[xe+2];X.children=oe}return se(S.type,te,void 0,void 0,Te,X)},Qe.createContext=function(S){return S={$$typeof:m,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:u,_context:S},S},Qe.createElement=function(S,F,B){var X,te={},Te=null;if(F!=null)for(X in F.key!==void 0&&(Te=""+F.key),F)$.call(F,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(te[X]=F[X]);var we=arguments.length-2;if(we===1)te.children=B;else if(1<we){for(var oe=Array(we),xe=0;xe<we;xe++)oe[xe]=arguments[xe+2];te.children=oe}if(S&&S.defaultProps)for(X in we=S.defaultProps,we)te[X]===void 0&&(te[X]=we[X]);return se(S,Te,void 0,void 0,null,te)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(S){return{$$typeof:b,render:S}},Qe.isValidElement=ie,Qe.lazy=function(S){return{$$typeof:p,_payload:{_status:-1,_result:S},_init:W}},Qe.memo=function(S,F){return{$$typeof:g,type:S,compare:F===void 0?null:F}},Qe.startTransition=function(S){var F=_.T,B={};_.T=B;try{var X=S(),te=_.S;te!==null&&te(B,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(pe,ce)}catch(Te){ce(Te)}finally{_.T=F}},Qe.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Qe.use=function(S){return _.H.use(S)},Qe.useActionState=function(S,F,B){return _.H.useActionState(S,F,B)},Qe.useCallback=function(S,F){return _.H.useCallback(S,F)},Qe.useContext=function(S){return _.H.useContext(S)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(S,F){return _.H.useDeferredValue(S,F)},Qe.useEffect=function(S,F,B){var X=_.H;if(typeof B=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(S,F)},Qe.useId=function(){return _.H.useId()},Qe.useImperativeHandle=function(S,F,B){return _.H.useImperativeHandle(S,F,B)},Qe.useInsertionEffect=function(S,F){return _.H.useInsertionEffect(S,F)},Qe.useLayoutEffect=function(S,F){return _.H.useLayoutEffect(S,F)},Qe.useMemo=function(S,F){return _.H.useMemo(S,F)},Qe.useOptimistic=function(S,F){return _.H.useOptimistic(S,F)},Qe.useReducer=function(S,F,B){return _.H.useReducer(S,F,B)},Qe.useRef=function(S){return _.H.useRef(S)},Qe.useState=function(S){return _.H.useState(S)},Qe.useSyncExternalStore=function(S,F,B){return _.H.useSyncExternalStore(S,F,B)},Qe.useTransition=function(){return _.H.useTransition()},Qe.version="19.1.0",Qe}var nh;function rc(){return nh||(nh=1,gu.exports=By()),gu.exports}var w=rc();const Xe=Qu(w);var hu={exports:{}},ei={},bu={exports:{}},pu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function _y(){return ah||(ah=1,function(n){function s(E,W){var ce=E.length;E.push(W);e:for(;0<ce;){var pe=ce-1>>>1,S=E[pe];if(0<c(S,W))E[pe]=W,E[ce]=S,ce=pe;else break e}}function r(E){return E.length===0?null:E[0]}function o(E){if(E.length===0)return null;var W=E[0],ce=E.pop();if(ce!==W){E[0]=ce;e:for(var pe=0,S=E.length,F=S>>>1;pe<F;){var B=2*(pe+1)-1,X=E[B],te=B+1,Te=E[te];if(0>c(X,ce))te<S&&0>c(Te,X)?(E[pe]=Te,E[te]=ce,pe=te):(E[pe]=X,E[B]=ce,pe=B);else if(te<S&&0>c(Te,ce))E[pe]=Te,E[te]=ce,pe=te;else break e}}return W}function c(E,W){var ce=E.sortIndex-W.sortIndex;return ce!==0?ce:E.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var m=Date,b=m.now();n.unstable_now=function(){return m.now()-b}}var h=[],g=[],p=1,v=null,x=3,N=!1,D=!1,A=!1,j=!1,O=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function R(E){for(var W=r(g);W!==null;){if(W.callback===null)o(g);else if(W.startTime<=E)o(g),W.sortIndex=W.expirationTime,s(h,W);else break;W=r(g)}}function _(E){if(A=!1,R(E),!D)if(r(h)!==null)D=!0,$||($=!0,me());else{var W=r(g);W!==null&&Ae(_,W.startTime-E)}}var $=!1,se=-1,q=5,ie=-1;function ue(){return j?!0:!(n.unstable_now()-ie<q)}function K(){if(j=!1,$){var E=n.unstable_now();ie=E;var W=!0;try{e:{D=!1,A&&(A=!1,T(se),se=-1),N=!0;var ce=x;try{t:{for(R(E),v=r(h);v!==null&&!(v.expirationTime>E&&ue());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,x=v.priorityLevel;var S=pe(v.expirationTime<=E);if(E=n.unstable_now(),typeof S=="function"){v.callback=S,R(E),W=!0;break t}v===r(h)&&o(h),R(E)}else o(h);v=r(h)}if(v!==null)W=!0;else{var F=r(g);F!==null&&Ae(_,F.startTime-E),W=!1}}break e}finally{v=null,x=ce,N=!1}W=void 0}}finally{W?me():$=!1}}}var me;if(typeof I=="function")me=function(){I(K)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Z=Me.port2;Me.port1.onmessage=K,me=function(){Z.postMessage(null)}}else me=function(){O(K,0)};function Ae(E,W){se=O(function(){E(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(E){E.callback=null},n.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<E?Math.floor(1e3/E):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(E){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var ce=x;x=W;try{return E()}finally{x=ce}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(E,W){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var ce=x;x=E;try{return W()}finally{x=ce}},n.unstable_scheduleCallback=function(E,W,ce){var pe=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?pe+ce:pe):ce=pe,E){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=ce+S,E={id:p++,callback:W,priorityLevel:E,startTime:ce,expirationTime:S,sortIndex:-1},ce>pe?(E.sortIndex=ce,s(g,E),r(h)===null&&E===r(g)&&(A?(T(se),se=-1):A=!0,Ae(_,ce-pe))):(E.sortIndex=S,s(h,E),D||N||(D=!0,$||($=!0,me()))),E},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(E){var W=x;return function(){var ce=x;x=W;try{return E.apply(this,arguments)}finally{x=ce}}}}(pu)),pu}var rh;function zy(){return rh||(rh=1,bu.exports=_y()),bu.exports}var xu={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function Iy(){if(lh)return rn;lh=1;var n=rc();function s(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(h,g,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:h,containerInfo:g,implementation:p}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,rn.createPortal=function(h,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(s(299));return u(h,g,null,p)},rn.flushSync=function(h){var g=m.T,p=o.p;try{if(m.T=null,o.p=2,h)return h()}finally{m.T=g,o.p=p,o.d.f()}},rn.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(h,g))},rn.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},rn.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var p=g.as,v=b(p,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?o.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:N}):p==="script"&&o.d.X(h,{crossOrigin:v,integrity:x,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=b(g.as,g.crossOrigin);o.d.M(h,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(h)},rn.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,v=b(p,g.crossOrigin);o.d.L(h,p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(h,g){if(typeof h=="string")if(g){var p=b(g.as,g.crossOrigin);o.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(h)},rn.requestFormReset=function(h){o.d.r(h)},rn.unstable_batchedUpdates=function(h,g){return h(g)},rn.useFormState=function(h,g,p){return m.H.useFormState(h,g,p)},rn.useFormStatus=function(){return m.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var sh;function lb(){if(sh)return xu.exports;sh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),xu.exports=Iy(),xu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function Hy(){if(ih)return ei;ih=1;var n=zy(),s=rc(),r=lb();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(u(e)!==e)throw Error(o(188))}function h(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,i=t;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(i=d.return,i!==null){a=i;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return b(d),e;if(f===i)return b(d),t;f=f.sibling}throw Error(o(188))}if(a.return!==i.return)a=d,i=f;else{for(var y=!1,k=d.child;k;){if(k===a){y=!0,a=d,i=f;break}if(k===i){y=!0,i=d,a=f;break}k=k.sibling}if(!y){for(k=f.child;k;){if(k===a){y=!0,a=f,i=d;break}if(k===i){y=!0,i=f,a=d;break}k=k.sibling}if(!y)throw Error(o(189))}}if(a.alternate!==i)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Symbol.for("react.client.reference");function Z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case j:return"Profiler";case A:return"StrictMode";case _:return"Suspense";case $:return"SuspenseList";case ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case I:return(e.displayName||"Context")+".Provider";case T:return(e._context.displayName||"Context")+".Consumer";case R:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return t=e.displayName||null,t!==null?t:Z(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return Z(e(t))}catch{}}return null}var Ae=Array.isArray,E=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},pe=[],S=-1;function F(e){return{current:e}}function B(e){0>S||(e.current=pe[S],pe[S]=null,S--)}function X(e,t){S++,pe[S]=e.current,e.current=t}var te=F(null),Te=F(null),we=F(null),oe=F(null);function xe(e,t){switch(X(we,t),X(Te,e),X(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Cg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Cg(t),e=Ag(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(te),X(te,e)}function _e(){B(te),B(Te),B(we)}function $e(e){e.memoizedState!==null&&X(oe,e);var t=te.current,a=Ag(t,e.type);t!==a&&(X(Te,e),X(te,a))}function qe(e){Te.current===e&&(B(te),B(Te)),oe.current===e&&(B(oe),Qs._currentValue=ce)}var Ye=Object.prototype.hasOwnProperty,ae=n.unstable_scheduleCallback,be=n.unstable_cancelCallback,Se=n.unstable_shouldYield,lt=n.unstable_requestPaint,ge=n.unstable_now,tt=n.unstable_getCurrentPriorityLevel,tn=n.unstable_ImmediatePriority,ne=n.unstable_UserBlockingPriority,le=n.unstable_NormalPriority,ve=n.unstable_LowPriority,Y=n.unstable_IdlePriority,Ee=n.log,Be=n.unstable_setDisableYieldValue,We=null,it=null;function un(e){if(typeof Ee=="function"&&Be(e),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(We,e)}catch{}}var vt=Math.clz32?Math.clz32:Xl,Ql=Math.log,ur=Math.LN2;function Xl(e){return e>>>=0,e===0?32:31-(Ql(e)/ur|0)|0}var fr=256,Yn=4194304;function Mn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ca(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var d=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var k=i&134217727;return k!==0?(i=k&~f,i!==0?d=Mn(i):(y&=k,y!==0?d=Mn(y):a||(a=k&~e,a!==0&&(d=Mn(a))))):(k=i&~f,k!==0?d=Mn(k):y!==0?d=Mn(y):a||(a=i&~e,a!==0&&(d=Mn(a)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:d}function mr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function gr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fn(){var e=fr;return fr<<=1,(fr&4194048)===0&&(fr=256),e}function Aa(){var e=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),e}function hr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function pn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hc(e,t,a,i,d,f){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var k=e.entanglements,M=e.expirationTimes,G=e.hiddenUpdates;for(a=y&~a;0<a;){var J=31-vt(a),re=1<<J;k[J]=0,M[J]=-1;var V=G[J];if(V!==null)for(G[J]=null,J=0;J<V.length;J++){var Q=V[J];Q!==null&&(Q.lane&=-536870913)}a&=~re}i!==0&&Fr(e,i,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~t))}function Fr(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-vt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&4194090}function yi(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-vt(a),d=1<<i;d&t|e[i]&t&&(e[i]|=t),a&=~d}}function br(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Zl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Vr(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:Vg(e.type))}function vi(e,t){var a=W.p;try{return W.p=e,t()}finally{W.p=a}}var En=Math.random().toString(36).slice(2),zt="__reactFiber$"+En,Ut="__reactProps$"+En,Ot="__reactContainer$"+En,Fn="__reactEvents$"+En,Ta="__reactListeners$"+En,Wl="__reactHandles$"+En,wi="__reactResources$"+En,pr="__reactMarker$"+En;function Kl(e){delete e[zt],delete e[Ut],delete e[Fn],delete e[Ta],delete e[Wl]}function ea(e){var t=e[zt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ot]||a[zt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Og(e);e!==null;){if(a=e[zt])return a;e=Og(e)}return t}e=a,a=e.parentNode}return null}function ta(e){if(e=e[zt]||e[Ot]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function bt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Ma(e){var t=e[wi];return t||(t=e[wi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Oe(e){e[pr]=!0}var Ni=new Set,ki={};function ca(e,t){Ea(e,t),Ea(e+"Capture",t)}function Ea(e,t){for(ki[e]=t,e=0;e<t.length;e++)Ni.add(t[e])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ji={},Si={};function Jl(e){return Ye.call(Si,e)?!0:Ye.call(ji,e)?!1:bc.test(e)?Si[e]=!0:(ji[e]=!0,!1)}function Qr(e,t,a){if(Jl(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Xr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function xn(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}var Zr,Di;function yn(e){if(Zr===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Zr=t&&t[1]||"",Di=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zr+e+Di}var Wr=!1;function es(e,t){if(!e||Wr)return"";Wr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Q){var V=Q}Reflect.construct(e,[],re)}else{try{re.call()}catch(Q){V=Q}e.call(re.prototype)}}else{try{throw Error()}catch(Q){V=Q}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Q){if(Q&&V&&typeof Q.stack=="string")return[Q.stack,V.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=i.DetermineComponentFrameRoot(),y=f[0],k=f[1];if(y&&k){var M=y.split(`
`),G=k.split(`
`);for(d=i=0;i<M.length&&!M[i].includes("DetermineComponentFrameRoot");)i++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(i===M.length||d===G.length)for(i=M.length-1,d=G.length-1;1<=i&&0<=d&&M[i]!==G[d];)d--;for(;1<=i&&0<=d;i--,d--)if(M[i]!==G[d]){if(i!==1||d!==1)do if(i--,d--,0>d||M[i]!==G[d]){var J=`
`+M[i].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=i&&0<=d);break}}}finally{Wr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?yn(a):""}function pc(e){switch(e.tag){case 26:case 27:case 5:return yn(e.type);case 16:return yn("Lazy");case 13:return yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return es(e.type,!1);case 11:return es(e.type.render,!1);case 1:return es(e.type,!0);case 31:return yn("Activity");default:return""}}function Ci(e){try{var t="";do t+=pc(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ai(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Kr(e){var t=Ai(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xr(e){e._valueTracker||(e._valueTracker=Kr(e))}function Jr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Ai(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function yr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xc=/[\n"\\]/g;function mn(e){return e.replace(xc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function el(e,t,a,i,d,f,y,k){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),t!=null?y==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+sn(t)):e.value!==""+sn(t)&&(e.value=""+sn(t)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),t!=null?ts(e,y,sn(t)):a!=null?ts(e,y,sn(a)):i!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+sn(k):e.removeAttribute("name")}function Ti(e,t,a,i,d,f,y,k){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;a=a!=null?""+sn(a):"",t=t!=null?""+sn(t):a,k||t===e.value||(e.value=t),e.defaultValue=t}i=i??d,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=k?e.checked:!!i,e.defaultChecked=!!i,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function ts(e,t,a){t==="number"&&yr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Oa(e,t,a,i){if(e=e.options,t){t={};for(var d=0;d<a.length;d++)t["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=t.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&i&&(e[a].defaultSelected=!0)}else{for(a=""+sn(a),t=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,i&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Mi(e,t,a){if(t!=null&&(t=""+sn(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+sn(a):""}function Ei(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(o(92));if(Ae(i)){if(1<i.length)throw Error(o(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=sn(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i)}function Ra(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var yc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oi(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||yc.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ri(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var d in t)i=t[d],t.hasOwnProperty(d)&&a[d]!==i&&Oi(e,d,i)}else for(var f in t)t.hasOwnProperty(f)&&Oi(e,f,t[f])}function ns(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var as=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(e){return vc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var nl=null;function al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,Pa=null;function rs(e){var t=ta(e);if(t&&(e=t.stateNode)){var a=e[Ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(el(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mn(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var d=i[Ut]||null;if(!d)throw Error(o(90));el(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Jr(i)}break e;case"textarea":Mi(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Oa(e,!!a.multiple,t,!1)}}}var ls=!1;function Li(e,t,a){if(ls)return e(t,a);ls=!0;try{var i=e(t);return i}finally{if(ls=!1,(La!==null||Pa!==null)&&(po(),La&&(t=La,e=Pa,Pa=La=null,rs(t),e)))for(t=0;t<e.length;t++)rs(e[t])}}function Ba(e,t){var a=e.stateNode;if(a===null)return null;var i=a[Ut]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ss=!1;if(On)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){ss=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{ss=!1}var Vn=null,is=null,rl=null;function Pi(){if(rl)return rl;var e,t=is,a=t.length,i,d="value"in Vn?Vn.value:Vn.textContent,f=d.length;for(e=0;e<a&&t[e]===d[e];e++);var y=a-e;for(i=1;i<=y&&t[a-i]===d[f-i];i++);return rl=d.slice(e,1<i?1-i:void 0)}function da(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ll(){return!0}function Bi(){return!1}function nn(e){function t(a,i,d,f,y){this._reactName=a,this._targetInst=d,this.type=i,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(a=e[k],this[k]=a?a(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ll:Bi,this.isPropagationStopped=Bi,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),t}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=nn(ua),vr=p({},ua,{view:0,detail:0}),wc=nn(vr),os,cs,wr,il=p({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(os=e.screenX-wr.screenX,cs=e.screenY-wr.screenY):cs=os=0,wr=e),os)},movementY:function(e){return"movementY"in e?e.movementY:cs}}),C=nn(il),L=p({},il,{dataTransfer:0}),z=nn(L),de=p({},vr,{relatedTarget:0}),fe=nn(de),De=p({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),je=nn(De),Re=p({},ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ot=nn(Re),It=p({},ua,{data:0}),Rt=nn(It),Ue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ie[e])?!!t[e]:!1}function ds(){return Qn}var Yp=p({},vr,{key:function(e){if(e.key){var t=Ue[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(e){return e.type==="keypress"?da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fp=nn(Yp),Vp=p({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pf=nn(Vp),Qp=p({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),Xp=nn(Qp),Zp=p({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wp=nn(Zp),Kp=p({},il,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Jp=nn(Kp),ex=p({},ua,{newState:0,oldState:0}),tx=nn(ex),nx=[9,13,27,32],Nc=On&&"CompositionEvent"in window,us=null;On&&"documentMode"in document&&(us=document.documentMode);var ax=On&&"TextEvent"in window&&!us,Bf=On&&(!Nc||us&&8<us&&11>=us),_f=" ",zf=!1;function If(e,t){switch(e){case"keyup":return nx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ol=!1;function rx(e,t){switch(e){case"compositionend":return Hf(t);case"keypress":return t.which!==32?null:(zf=!0,_f);case"textInput":return e=t.data,e===_f&&zf?null:e;default:return null}}function lx(e,t){if(ol)return e==="compositionend"||!Nc&&If(e,t)?(e=Pi(),rl=is=Vn=null,ol=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bf&&t.locale!=="ko"?null:t.data;default:return null}}var sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sx[e.type]:t==="textarea"}function Uf(e,t,a,i){La?Pa?Pa.push(i):Pa=[i]:La=i,t=ko(t,"onChange"),0<t.length&&(a=new sl("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var fs=null,ms=null;function ix(e){Ng(e,0)}function _i(e){var t=bt(e);if(Jr(t))return e}function Gf(e,t){if(e==="change")return t}var $f=!1;if(On){var kc;if(On){var jc="oninput"in document;if(!jc){var Yf=document.createElement("div");Yf.setAttribute("oninput","return;"),jc=typeof Yf.oninput=="function"}kc=jc}else kc=!1;$f=kc&&(!document.documentMode||9<document.documentMode)}function Ff(){fs&&(fs.detachEvent("onpropertychange",Vf),ms=fs=null)}function Vf(e){if(e.propertyName==="value"&&_i(ms)){var t=[];Uf(t,ms,e,al(e)),Li(ix,t)}}function ox(e,t,a){e==="focusin"?(Ff(),fs=t,ms=a,fs.attachEvent("onpropertychange",Vf)):e==="focusout"&&Ff()}function cx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _i(ms)}function dx(e,t){if(e==="click")return _i(t)}function ux(e,t){if(e==="input"||e==="change")return _i(t)}function fx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:fx;function gs(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var d=a[i];if(!Ye.call(t,d)||!vn(e[d],t[d]))return!1}return!0}function Qf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xf(e,t){var a=Qf(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qf(a)}}function Zf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=yr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=yr(e.document)}return t}function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var mx=On&&"documentMode"in document&&11>=document.documentMode,cl=null,Dc=null,hs=null,Cc=!1;function Kf(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cc||cl==null||cl!==yr(i)||(i=cl,"selectionStart"in i&&Sc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hs&&gs(hs,i)||(hs=i,i=ko(Dc,"onSelect"),0<i.length&&(t=new sl("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=cl)))}function Nr(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var dl={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},Ac={},Jf={};On&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function kr(e){if(Ac[e])return Ac[e];if(!dl[e])return e;var t=dl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Jf)return Ac[e]=t[a];return e}var em=kr("animationend"),tm=kr("animationiteration"),nm=kr("animationstart"),gx=kr("transitionrun"),hx=kr("transitionstart"),bx=kr("transitioncancel"),am=kr("transitionend"),rm=new Map,Tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tc.push("scrollEnd");function Xn(e,t){rm.set(e,t),ca(t,[e])}var lm=new WeakMap;function Rn(e,t){if(typeof e=="object"&&e!==null){var a=lm.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ci(t)},lm.set(e,t),t)}return{value:e,source:t,stack:Ci(t)}}var Ln=[],ul=0,Mc=0;function zi(){for(var e=ul,t=Mc=ul=0;t<e;){var a=Ln[t];Ln[t++]=null;var i=Ln[t];Ln[t++]=null;var d=Ln[t];Ln[t++]=null;var f=Ln[t];if(Ln[t++]=null,i!==null&&d!==null){var y=i.pending;y===null?d.next=d:(d.next=y.next,y.next=d),i.pending=d}f!==0&&sm(a,d,f)}}function Ii(e,t,a,i){Ln[ul++]=e,Ln[ul++]=t,Ln[ul++]=a,Ln[ul++]=i,Mc|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Ec(e,t,a,i){return Ii(e,t,a,i),Hi(e)}function fl(e,t){return Ii(e,null,null,t),Hi(e)}function sm(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var d=!1,f=e.return;f!==null;)f.childLanes|=a,i=f.alternate,i!==null&&(i.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-vt(a),e=f.hiddenUpdates,i=e[d],i===null?e[d]=[t]:i.push(t),t.lane=a|536870912),f):null}function Hi(e){if(50<Hs)throw Hs=0,_d=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ml={};function px(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(e,t,a,i){return new px(e,t,a,i)}function Oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fa(e,t){var a=e.alternate;return a===null?(a=wn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function im(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qi(e,t,a,i,d,f){var y=0;if(i=e,typeof e=="function")Oc(e)&&(y=1);else if(typeof e=="string")y=yy(e,a,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ie:return e=wn(31,a,t,d),e.elementType=ie,e.lanes=f,e;case D:return jr(a.children,d,f,t);case A:y=8,d|=24;break;case j:return e=wn(12,a,t,d|2),e.elementType=j,e.lanes=f,e;case _:return e=wn(13,a,t,d),e.elementType=_,e.lanes=f,e;case $:return e=wn(19,a,t,d),e.elementType=$,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case I:y=10;break e;case T:y=9;break e;case R:y=11;break e;case se:y=14;break e;case q:y=16,i=null;break e}y=29,a=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=wn(y,a,t,d),t.elementType=e,t.type=i,t.lanes=f,t}function jr(e,t,a,i){return e=wn(7,e,i,t),e.lanes=a,e}function Rc(e,t,a){return e=wn(6,e,null,t),e.lanes=a,e}function Lc(e,t,a){return t=wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gl=[],hl=0,Ui=null,Gi=0,Pn=[],Bn=0,Sr=null,ma=1,ga="";function Dr(e,t){gl[hl++]=Gi,gl[hl++]=Ui,Ui=e,Gi=t}function om(e,t,a){Pn[Bn++]=ma,Pn[Bn++]=ga,Pn[Bn++]=Sr,Sr=e;var i=ma;e=ga;var d=32-vt(i)-1;i&=~(1<<d),a+=1;var f=32-vt(t)+d;if(30<f){var y=d-d%5;f=(i&(1<<y)-1).toString(32),i>>=y,d-=y,ma=1<<32-vt(t)+d|a<<d|i,ga=f+e}else ma=1<<f|a<<d|i,ga=e}function Pc(e){e.return!==null&&(Dr(e,1),om(e,1,0))}function Bc(e){for(;e===Ui;)Ui=gl[--hl],gl[hl]=null,Gi=gl[--hl],gl[hl]=null;for(;e===Sr;)Sr=Pn[--Bn],Pn[Bn]=null,ga=Pn[--Bn],Pn[Bn]=null,ma=Pn[--Bn],Pn[Bn]=null}var on=null,Tt=null,ct=!1,Cr=null,na=!1,_c=Error(o(519));function Ar(e){var t=Error(o(418,""));throw xs(Rn(t,e)),_c}function cm(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[zt]=e,t[Ut]=i,a){case"dialog":et("cancel",t),et("close",t);break;case"iframe":case"object":case"embed":et("load",t);break;case"video":case"audio":for(a=0;a<Us.length;a++)et(Us[a],t);break;case"source":et("error",t);break;case"img":case"image":case"link":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"input":et("invalid",t),Ti(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),xr(t);break;case"select":et("invalid",t);break;case"textarea":et("invalid",t),Ei(t,i.value,i.defaultValue,i.children),xr(t)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||Dg(t.textContent,a)?(i.popover!=null&&(et("beforetoggle",t),et("toggle",t)),i.onScroll!=null&&et("scroll",t),i.onScrollEnd!=null&&et("scrollend",t),i.onClick!=null&&(t.onclick=jo),t=!0):t=!1,t||Ar(e)}function dm(e){for(on=e.return;on;)switch(on.tag){case 5:case 13:na=!1;return;case 27:case 3:na=!0;return;default:on=on.return}}function bs(e){if(e!==on)return!1;if(!ct)return dm(e),ct=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Jd(e.type,e.memoizedProps)),a=!a),a&&Tt&&Ar(e),dm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Tt=Wn(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Tt=null}}else t===27?(t=Tt,Ja(e.type)?(e=au,au=null,Tt=e):Tt=t):Tt=on?Wn(e.stateNode.nextSibling):null;return!0}function ps(){Tt=on=null,ct=!1}function um(){var e=Cr;return e!==null&&(bn===null?bn=e:bn.push.apply(bn,e),Cr=null),e}function xs(e){Cr===null?Cr=[e]:Cr.push(e)}var zc=F(null),Tr=null,ha=null;function za(e,t,a){X(zc,t._currentValue),t._currentValue=a}function ba(e){e._currentValue=zc.current,B(zc)}function Ic(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function Hc(e,t,a,i){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var y=d.child;f=f.firstContext;e:for(;f!==null;){var k=f;f=d;for(var M=0;M<t.length;M++)if(k.context===t[M]){f.lanes|=a,k=f.alternate,k!==null&&(k.lanes|=a),Ic(f.return,a,e),i||(y=null);break e}f=k.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(o(341));y.lanes|=a,f=y.alternate,f!==null&&(f.lanes|=a),Ic(y,a,e),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===e){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function ys(e,t,a,i){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(o(387));if(y=y.memoizedProps,y!==null){var k=d.type;vn(d.pendingProps.value,y.value)||(e!==null?e.push(k):e=[k])}}else if(d===oe.current){if(y=d.alternate,y===null)throw Error(o(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Qs):e=[Qs])}d=d.return}e!==null&&Hc(t,e,a,i),t.flags|=262144}function $i(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mr(e){Tr=e,ha=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return fm(Tr,e)}function Yi(e,t){return Tr===null&&Mr(e),fm(e,t)}function fm(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ha===null){if(e===null)throw Error(o(308));ha=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ha=ha.next=t;return a}var xx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},yx=n.unstable_scheduleCallback,vx=n.unstable_NormalPriority,Gt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qc(){return{controller:new xx,data:new Map,refCount:0}}function vs(e){e.refCount--,e.refCount===0&&yx(vx,function(){e.controller.abort()})}var ws=null,Uc=0,bl=0,pl=null;function wx(e,t){if(ws===null){var a=ws=[];Uc=0,bl=$d(),pl={status:"pending",value:void 0,then:function(i){a.push(i)}}}return Uc++,t.then(mm,mm),t}function mm(){if(--Uc===0&&ws!==null){pl!==null&&(pl.status="fulfilled");var e=ws;ws=null,bl=0,pl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Nx(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(i.status="rejected",i.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),i}var gm=E.S;E.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&wx(e,t),gm!==null&&gm(e,t)};var Er=F(null);function Gc(){var e=Er.current;return e!==null?e:Nt.pooledCache}function Fi(e,t){t===null?X(Er,Er.current):X(Er,t.pool)}function hm(){var e=Gc();return e===null?null:{parent:Gt._currentValue,pool:e}}var Ns=Error(o(460)),bm=Error(o(474)),Vi=Error(o(542)),$c={then:function(){}};function pm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qi(){}function xm(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Qi,Qi),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vm(e),e;default:if(typeof t.status=="string")t.then(Qi,Qi);else{if(e=Nt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=i}},function(i){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vm(e),e}throw ks=t,Ns}}var ks=null;function ym(){if(ks===null)throw Error(o(459));var e=ks;return ks=null,e}function vm(e){if(e===Ns||e===Vi)throw Error(o(483))}var Ia=!1;function Yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ha(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qa(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(mt&2)!==0){var d=i.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),i.pending=t,t=Hi(e),sm(e,null,a),t}return Ii(e,i,t,a),Hi(e)}function js(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,yi(e,a)}}function Vc(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=y:f=f.next=y,a=a.next}while(a!==null);f===null?d=f=t:f=f.next=t}else d=f=t;a={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Qc=!1;function Ss(){if(Qc){var e=pl;if(e!==null)throw e}}function Ds(e,t,a,i){Qc=!1;var d=e.updateQueue;Ia=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var M=k,G=M.next;M.next=null,y===null?f=G:y.next=G,y=M;var J=e.alternate;J!==null&&(J=J.updateQueue,k=J.lastBaseUpdate,k!==y&&(k===null?J.firstBaseUpdate=G:k.next=G,J.lastBaseUpdate=M))}if(f!==null){var re=d.baseState;y=0,J=G=M=null,k=f;do{var V=k.lane&-536870913,Q=V!==k.lane;if(Q?(at&V)===V:(i&V)===V){V!==0&&V===bl&&(Qc=!0),J!==null&&(J=J.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ge=e,ze=k;V=t;var yt=a;switch(ze.tag){case 1:if(Ge=ze.payload,typeof Ge=="function"){re=Ge.call(yt,re,V);break e}re=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=ze.payload,V=typeof Ge=="function"?Ge.call(yt,re,V):Ge,V==null)break e;re=p({},re,V);break e;case 2:Ia=!0}}V=k.callback,V!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[V]:Q.push(V))}else Q={lane:V,tag:k.tag,payload:k.payload,callback:k.callback,next:null},J===null?(G=J=Q,M=re):J=J.next=Q,y|=V;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;Q=k,k=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);J===null&&(M=re),d.baseState=M,d.firstBaseUpdate=G,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),Xa|=y,e.lanes=y,e.memoizedState=re}}function wm(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Nm(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)wm(a[e],t)}var xl=F(null),Xi=F(0);function km(e,t){e=ka,X(Xi,e),X(xl,t),ka=e|t.baseLanes}function Xc(){X(Xi,ka),X(xl,xl.current)}function Zc(){ka=Xi.current,B(xl),B(Xi)}var Ua=0,Ze=null,pt=null,Ht=null,Zi=!1,yl=!1,Or=!1,Wi=0,Cs=0,vl=null,kx=0;function Lt(){throw Error(o(321))}function Wc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!vn(e[a],t[a]))return!1;return!0}function Kc(e,t,a,i,d,f){return Ua=f,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?s0:i0,Or=!1,f=a(i,d),Or=!1,yl&&(f=Sm(t,a,i,d)),jm(e),f}function jm(e){E.H=ao;var t=pt!==null&&pt.next!==null;if(Ua=0,Ht=pt=Ze=null,Zi=!1,Cs=0,vl=null,t)throw Error(o(300));e===null||Yt||(e=e.dependencies,e!==null&&$i(e)&&(Yt=!0))}function Sm(e,t,a,i){Ze=e;var d=0;do{if(yl&&(vl=null),Cs=0,yl=!1,25<=d)throw Error(o(301));if(d+=1,Ht=pt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}E.H=Mx,f=t(a,i)}while(yl);return f}function jx(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?As(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(Ze.flags|=1024),t}function Jc(){var e=Wi!==0;return Wi=0,e}function ed(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function td(e){if(Zi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Zi=!1}Ua=0,Ht=pt=Ze=null,yl=!1,Cs=Wi=0,vl=null}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ze.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function qt(){if(pt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=Ht===null?Ze.memoizedState:Ht.next;if(t!==null)Ht=t,pt=e;else{if(e===null)throw Ze.alternate===null?Error(o(467)):Error(o(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Ht===null?Ze.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function nd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function As(e){var t=Cs;return Cs+=1,vl===null&&(vl=[]),e=xm(vl,e,t),t=Ze,(Ht===null?t.memoizedState:Ht.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?s0:i0),e}function Ki(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return As(e);if(e.$$typeof===I)return an(e)}throw Error(o(438,String(e)))}function ad(e){var t=null,a=Ze.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=Ze.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=nd(),Ze.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=ue;return t.index++,a}function pa(e,t){return typeof t=="function"?t(e):t}function Ji(e){var t=qt();return rd(t,pt,e)}function rd(e,t,a){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=a;var d=e.baseQueue,f=i.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}t.baseQueue=d=f,i.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var k=y=null,M=null,G=t,J=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(at&re)===re:(Ua&re)===re){var V=G.revertLane;if(V===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===bl&&(J=!0);else if((Ua&V)===V){G=G.next,V===bl&&(J=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(k=M=re,y=f):M=M.next=re,Ze.lanes|=V,Xa|=V;re=G.action,Or&&a(f,re),f=G.hasEagerState?G.eagerState:a(f,re)}else V={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(k=M=V,y=f):M=M.next=V,Ze.lanes|=re,Xa|=re;G=G.next}while(G!==null&&G!==t);if(M===null?y=f:M.next=k,!vn(f,e.memoizedState)&&(Yt=!0,J&&(a=pl,a!==null)))throw a;e.memoizedState=f,e.baseState=y,e.baseQueue=M,i.lastRenderedState=f}return d===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ld(e){var t=qt(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var i=a.dispatch,d=a.pending,f=t.memoizedState;if(d!==null){a.pending=null;var y=d=d.next;do f=e(f,y.action),y=y.next;while(y!==d);vn(f,t.memoizedState)||(Yt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,i]}function Dm(e,t,a){var i=Ze,d=qt(),f=ct;if(f){if(a===void 0)throw Error(o(407));a=a()}else a=t();var y=!vn((pt||d).memoizedState,a);y&&(d.memoizedState=a,Yt=!0),d=d.queue;var k=Tm.bind(null,i,d,e);if(Ts(2048,8,k,[e]),d.getSnapshot!==t||y||Ht!==null&&Ht.memoizedState.tag&1){if(i.flags|=2048,wl(9,eo(),Am.bind(null,i,d,a,t),null),Nt===null)throw Error(o(349));f||(Ua&124)!==0||Cm(i,t,a)}return a}function Cm(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ze.updateQueue,t===null?(t=nd(),Ze.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Am(e,t,a,i){t.value=a,t.getSnapshot=i,Mm(t)&&Em(e)}function Tm(e,t,a){return a(function(){Mm(t)&&Em(e)})}function Mm(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!vn(e,a)}catch{return!0}}function Em(e){var t=fl(e,2);t!==null&&Dn(t,e,2)}function sd(e){var t=gn();if(typeof e=="function"){var a=e;if(e=a(),Or){un(!0);try{a()}finally{un(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e},t}function Om(e,t,a,i){return e.baseState=a,rd(e,pt,typeof i=="function"?i:pa)}function Sx(e,t,a,i,d){if(no(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};E.T!==null?a(!0):f.isTransition=!1,i(f),a=t.pending,a===null?(f.next=t.pending=f,Rm(t,f)):(f.next=a.next,t.pending=a.next=f)}}function Rm(e,t){var a=t.action,i=t.payload,d=e.state;if(t.isTransition){var f=E.T,y={};E.T=y;try{var k=a(d,i),M=E.S;M!==null&&M(y,k),Lm(e,t,k)}catch(G){id(e,t,G)}finally{E.T=f}}else try{f=a(d,i),Lm(e,t,f)}catch(G){id(e,t,G)}}function Lm(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Pm(e,t,i)},function(i){return id(e,t,i)}):Pm(e,t,a)}function Pm(e,t,a){t.status="fulfilled",t.value=a,Bm(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Rm(e,a)))}function id(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Bm(t),t=t.next;while(t!==i)}e.action=null}function Bm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function _m(e,t){return t}function zm(e,t){if(ct){var a=Nt.formState;if(a!==null){e:{var i=Ze;if(ct){if(Tt){t:{for(var d=Tt,f=na;d.nodeType!==8;){if(!f){d=null;break t}if(d=Wn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Tt=Wn(d.nextSibling),i=d.data==="F!";break e}}Ar(i)}i=!1}i&&(t=a[0])}}return a=gn(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_m,lastRenderedState:t},a.queue=i,a=a0.bind(null,Ze,i),i.dispatch=a,i=sd(!1),f=fd.bind(null,Ze,!1,i.queue),i=gn(),d={state:t,dispatch:null,action:e,pending:null},i.queue=d,a=Sx.bind(null,Ze,d,f,a),d.dispatch=a,i.memoizedState=e,[t,a,!1]}function Im(e){var t=qt();return Hm(t,pt,e)}function Hm(e,t,a){if(t=rd(e,t,_m)[0],e=Ji(pa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=As(t)}catch(y){throw y===Ns?Vi:y}else i=t;t=qt();var d=t.queue,f=d.dispatch;return a!==t.memoizedState&&(Ze.flags|=2048,wl(9,eo(),Dx.bind(null,d,a),null)),[i,f,e]}function Dx(e,t){e.action=t}function qm(e){var t=qt(),a=pt;if(a!==null)return Hm(t,a,e);qt(),t=t.memoizedState,a=qt();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function wl(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=Ze.updateQueue,t===null&&(t=nd(),Ze.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function eo(){return{destroy:void 0,resource:void 0}}function Um(){return qt().memoizedState}function to(e,t,a,i){var d=gn();i=i===void 0?null:i,Ze.flags|=e,d.memoizedState=wl(1|t,eo(),a,i)}function Ts(e,t,a,i){var d=qt();i=i===void 0?null:i;var f=d.memoizedState.inst;pt!==null&&i!==null&&Wc(i,pt.memoizedState.deps)?d.memoizedState=wl(t,f,a,i):(Ze.flags|=e,d.memoizedState=wl(1|t,f,a,i))}function Gm(e,t){to(8390656,8,e,t)}function $m(e,t){Ts(2048,8,e,t)}function Ym(e,t){return Ts(4,2,e,t)}function Fm(e,t){return Ts(4,4,e,t)}function Vm(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qm(e,t,a){a=a!=null?a.concat([e]):null,Ts(4,4,Vm.bind(null,t,e),a)}function od(){}function Xm(e,t){var a=qt();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Wc(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Zm(e,t){var a=qt();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Wc(t,i[1]))return i[0];if(i=e(),Or){un(!0);try{e()}finally{un(!1)}}return a.memoizedState=[i,t],i}function cd(e,t,a){return a===void 0||(Ua&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=J0(),Ze.lanes|=e,Xa|=e,a)}function Wm(e,t,a,i){return vn(a,t)?a:xl.current!==null?(e=cd(e,a,i),vn(e,t)||(Yt=!0),e):(Ua&42)===0?(Yt=!0,e.memoizedState=a):(e=J0(),Ze.lanes|=e,Xa|=e,t)}function Km(e,t,a,i,d){var f=W.p;W.p=f!==0&&8>f?f:8;var y=E.T,k={};E.T=k,fd(e,!1,t,a);try{var M=d(),G=E.S;if(G!==null&&G(k,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var J=Nx(M,i);Ms(e,t,J,Sn(e))}else Ms(e,t,i,Sn(e))}catch(re){Ms(e,t,{then:function(){},status:"rejected",reason:re},Sn())}finally{W.p=f,E.T=y}}function Cx(){}function dd(e,t,a,i){if(e.tag!==5)throw Error(o(476));var d=Jm(e).queue;Km(e,d,t,ce,a===null?Cx:function(){return e0(e),a(i)})}function Jm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:ce},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function e0(e){var t=Jm(e).next.queue;Ms(e,t,{},Sn())}function ud(){return an(Qs)}function t0(){return qt().memoizedState}function n0(){return qt().memoizedState}function Ax(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Sn();e=Ha(a);var i=qa(t,e,a);i!==null&&(Dn(i,t,a),js(i,t,a)),t={cache:qc()},e.payload=t;return}t=t.return}}function Tx(e,t,a){var i=Sn();a={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},no(e)?r0(t,a):(a=Ec(e,t,a,i),a!==null&&(Dn(a,e,i),l0(a,t,i)))}function a0(e,t,a){var i=Sn();Ms(e,t,a,i)}function Ms(e,t,a,i){var d={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(no(e))r0(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,k=f(y,a);if(d.hasEagerState=!0,d.eagerState=k,vn(k,y))return Ii(e,t,d,0),Nt===null&&zi(),!1}catch{}finally{}if(a=Ec(e,t,d,i),a!==null)return Dn(a,e,i),l0(a,t,i),!0}return!1}function fd(e,t,a,i){if(i={lane:2,revertLane:$d(),action:i,hasEagerState:!1,eagerState:null,next:null},no(e)){if(t)throw Error(o(479))}else t=Ec(e,a,i,2),t!==null&&Dn(t,e,2)}function no(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function r0(e,t){yl=Zi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function l0(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,yi(e,a)}}var ao={readContext:an,use:Ki,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},s0={readContext:an,use:Ki,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:Gm,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,to(4194308,4,Vm.bind(null,t,e),a)},useLayoutEffect:function(e,t){return to(4194308,4,e,t)},useInsertionEffect:function(e,t){to(4,2,e,t)},useMemo:function(e,t){var a=gn();t=t===void 0?null:t;var i=e();if(Or){un(!0);try{e()}finally{un(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=gn();if(a!==void 0){var d=a(t);if(Or){un(!0);try{a(t)}finally{un(!1)}}}else d=t;return i.memoizedState=i.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},i.queue=e,e=e.dispatch=Tx.bind(null,Ze,e),[i.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:function(e){e=sd(e);var t=e.queue,a=a0.bind(null,Ze,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:od,useDeferredValue:function(e,t){var a=gn();return cd(a,e,t)},useTransition:function(){var e=sd(!1);return e=Km.bind(null,Ze,e.queue,!0,!1),gn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=Ze,d=gn();if(ct){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Nt===null)throw Error(o(349));(at&124)!==0||Cm(i,t,a)}d.memoizedState=a;var f={value:a,getSnapshot:t};return d.queue=f,Gm(Tm.bind(null,i,f,e),[e]),i.flags|=2048,wl(9,eo(),Am.bind(null,i,f,a,t),null),a},useId:function(){var e=gn(),t=Nt.identifierPrefix;if(ct){var a=ga,i=ma;a=(i&~(1<<32-vt(i)-1)).toString(32)+a,t="«"+t+"R"+a,a=Wi++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=kx++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:ud,useFormState:zm,useActionState:zm,useOptimistic:function(e){var t=gn();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=fd.bind(null,Ze,!0,a),a.dispatch=t,[e,t]},useMemoCache:ad,useCacheRefresh:function(){return gn().memoizedState=Ax.bind(null,Ze)}},i0={readContext:an,use:Ki,useCallback:Xm,useContext:an,useEffect:$m,useImperativeHandle:Qm,useInsertionEffect:Ym,useLayoutEffect:Fm,useMemo:Zm,useReducer:Ji,useRef:Um,useState:function(){return Ji(pa)},useDebugValue:od,useDeferredValue:function(e,t){var a=qt();return Wm(a,pt.memoizedState,e,t)},useTransition:function(){var e=Ji(pa)[0],t=qt().memoizedState;return[typeof e=="boolean"?e:As(e),t]},useSyncExternalStore:Dm,useId:t0,useHostTransitionStatus:ud,useFormState:Im,useActionState:Im,useOptimistic:function(e,t){var a=qt();return Om(a,pt,e,t)},useMemoCache:ad,useCacheRefresh:n0},Mx={readContext:an,use:Ki,useCallback:Xm,useContext:an,useEffect:$m,useImperativeHandle:Qm,useInsertionEffect:Ym,useLayoutEffect:Fm,useMemo:Zm,useReducer:ld,useRef:Um,useState:function(){return ld(pa)},useDebugValue:od,useDeferredValue:function(e,t){var a=qt();return pt===null?cd(a,e,t):Wm(a,pt.memoizedState,e,t)},useTransition:function(){var e=ld(pa)[0],t=qt().memoizedState;return[typeof e=="boolean"?e:As(e),t]},useSyncExternalStore:Dm,useId:t0,useHostTransitionStatus:ud,useFormState:qm,useActionState:qm,useOptimistic:function(e,t){var a=qt();return pt!==null?Om(a,pt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ad,useCacheRefresh:n0},Nl=null,Es=0;function ro(e){var t=Es;return Es+=1,Nl===null&&(Nl=[]),xm(Nl,e,t)}function Os(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function lo(e,t){throw t.$$typeof===v?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function o0(e){var t=e._init;return t(e._payload)}function c0(e){function t(H,P){if(e){var U=H.deletions;U===null?(H.deletions=[P],H.flags|=16):U.push(P)}}function a(H,P){if(!e)return null;for(;P!==null;)t(H,P),P=P.sibling;return null}function i(H){for(var P=new Map;H!==null;)H.key!==null?P.set(H.key,H):P.set(H.index,H),H=H.sibling;return P}function d(H,P){return H=fa(H,P),H.index=0,H.sibling=null,H}function f(H,P,U){return H.index=U,e?(U=H.alternate,U!==null?(U=U.index,U<P?(H.flags|=67108866,P):U):(H.flags|=67108866,P)):(H.flags|=1048576,P)}function y(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function k(H,P,U,ee){return P===null||P.tag!==6?(P=Rc(U,H.mode,ee),P.return=H,P):(P=d(P,U),P.return=H,P)}function M(H,P,U,ee){var Ce=U.type;return Ce===D?J(H,P,U.props.children,ee,U.key):P!==null&&(P.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===q&&o0(Ce)===P.type)?(P=d(P,U.props),Os(P,U),P.return=H,P):(P=qi(U.type,U.key,U.props,null,H.mode,ee),Os(P,U),P.return=H,P)}function G(H,P,U,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==U.containerInfo||P.stateNode.implementation!==U.implementation?(P=Lc(U,H.mode,ee),P.return=H,P):(P=d(P,U.children||[]),P.return=H,P)}function J(H,P,U,ee,Ce){return P===null||P.tag!==7?(P=jr(U,H.mode,ee,Ce),P.return=H,P):(P=d(P,U),P.return=H,P)}function re(H,P,U){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Rc(""+P,H.mode,U),P.return=H,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case x:return U=qi(P.type,P.key,P.props,null,H.mode,U),Os(U,P),U.return=H,U;case N:return P=Lc(P,H.mode,U),P.return=H,P;case q:var ee=P._init;return P=ee(P._payload),re(H,P,U)}if(Ae(P)||me(P))return P=jr(P,H.mode,U,null),P.return=H,P;if(typeof P.then=="function")return re(H,ro(P),U);if(P.$$typeof===I)return re(H,Yi(H,P),U);lo(H,P)}return null}function V(H,P,U,ee){var Ce=P!==null?P.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Ce!==null?null:k(H,P,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return U.key===Ce?M(H,P,U,ee):null;case N:return U.key===Ce?G(H,P,U,ee):null;case q:return Ce=U._init,U=Ce(U._payload),V(H,P,U,ee)}if(Ae(U)||me(U))return Ce!==null?null:J(H,P,U,ee,null);if(typeof U.then=="function")return V(H,P,ro(U),ee);if(U.$$typeof===I)return V(H,P,Yi(H,U),ee);lo(H,U)}return null}function Q(H,P,U,ee,Ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return H=H.get(U)||null,k(P,H,""+ee,Ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return H=H.get(ee.key===null?U:ee.key)||null,M(P,H,ee,Ce);case N:return H=H.get(ee.key===null?U:ee.key)||null,G(P,H,ee,Ce);case q:var Ke=ee._init;return ee=Ke(ee._payload),Q(H,P,U,ee,Ce)}if(Ae(ee)||me(ee))return H=H.get(U)||null,J(P,H,ee,Ce,null);if(typeof ee.then=="function")return Q(H,P,U,ro(ee),Ce);if(ee.$$typeof===I)return Q(H,P,U,Yi(P,ee),Ce);lo(P,ee)}return null}function Ge(H,P,U,ee){for(var Ce=null,Ke=null,Le=P,He=P=0,Vt=null;Le!==null&&He<U.length;He++){Le.index>He?(Vt=Le,Le=null):Vt=Le.sibling;var st=V(H,Le,U[He],ee);if(st===null){Le===null&&(Le=Vt);break}e&&Le&&st.alternate===null&&t(H,Le),P=f(st,P,He),Ke===null?Ce=st:Ke.sibling=st,Ke=st,Le=Vt}if(He===U.length)return a(H,Le),ct&&Dr(H,He),Ce;if(Le===null){for(;He<U.length;He++)Le=re(H,U[He],ee),Le!==null&&(P=f(Le,P,He),Ke===null?Ce=Le:Ke.sibling=Le,Ke=Le);return ct&&Dr(H,He),Ce}for(Le=i(Le);He<U.length;He++)Vt=Q(Le,H,He,U[He],ee),Vt!==null&&(e&&Vt.alternate!==null&&Le.delete(Vt.key===null?He:Vt.key),P=f(Vt,P,He),Ke===null?Ce=Vt:Ke.sibling=Vt,Ke=Vt);return e&&Le.forEach(function(rr){return t(H,rr)}),ct&&Dr(H,He),Ce}function ze(H,P,U,ee){if(U==null)throw Error(o(151));for(var Ce=null,Ke=null,Le=P,He=P=0,Vt=null,st=U.next();Le!==null&&!st.done;He++,st=U.next()){Le.index>He?(Vt=Le,Le=null):Vt=Le.sibling;var rr=V(H,Le,st.value,ee);if(rr===null){Le===null&&(Le=Vt);break}e&&Le&&rr.alternate===null&&t(H,Le),P=f(rr,P,He),Ke===null?Ce=rr:Ke.sibling=rr,Ke=rr,Le=Vt}if(st.done)return a(H,Le),ct&&Dr(H,He),Ce;if(Le===null){for(;!st.done;He++,st=U.next())st=re(H,st.value,ee),st!==null&&(P=f(st,P,He),Ke===null?Ce=st:Ke.sibling=st,Ke=st);return ct&&Dr(H,He),Ce}for(Le=i(Le);!st.done;He++,st=U.next())st=Q(Le,H,He,st.value,ee),st!==null&&(e&&st.alternate!==null&&Le.delete(st.key===null?He:st.key),P=f(st,P,He),Ke===null?Ce=st:Ke.sibling=st,Ke=st);return e&&Le.forEach(function(Ey){return t(H,Ey)}),ct&&Dr(H,He),Ce}function yt(H,P,U,ee){if(typeof U=="object"&&U!==null&&U.type===D&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case x:e:{for(var Ce=U.key;P!==null;){if(P.key===Ce){if(Ce=U.type,Ce===D){if(P.tag===7){a(H,P.sibling),ee=d(P,U.props.children),ee.return=H,H=ee;break e}}else if(P.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===q&&o0(Ce)===P.type){a(H,P.sibling),ee=d(P,U.props),Os(ee,U),ee.return=H,H=ee;break e}a(H,P);break}else t(H,P);P=P.sibling}U.type===D?(ee=jr(U.props.children,H.mode,ee,U.key),ee.return=H,H=ee):(ee=qi(U.type,U.key,U.props,null,H.mode,ee),Os(ee,U),ee.return=H,H=ee)}return y(H);case N:e:{for(Ce=U.key;P!==null;){if(P.key===Ce)if(P.tag===4&&P.stateNode.containerInfo===U.containerInfo&&P.stateNode.implementation===U.implementation){a(H,P.sibling),ee=d(P,U.children||[]),ee.return=H,H=ee;break e}else{a(H,P);break}else t(H,P);P=P.sibling}ee=Lc(U,H.mode,ee),ee.return=H,H=ee}return y(H);case q:return Ce=U._init,U=Ce(U._payload),yt(H,P,U,ee)}if(Ae(U))return Ge(H,P,U,ee);if(me(U)){if(Ce=me(U),typeof Ce!="function")throw Error(o(150));return U=Ce.call(U),ze(H,P,U,ee)}if(typeof U.then=="function")return yt(H,P,ro(U),ee);if(U.$$typeof===I)return yt(H,P,Yi(H,U),ee);lo(H,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,P!==null&&P.tag===6?(a(H,P.sibling),ee=d(P,U),ee.return=H,H=ee):(a(H,P),ee=Rc(U,H.mode,ee),ee.return=H,H=ee),y(H)):a(H,P)}return function(H,P,U,ee){try{Es=0;var Ce=yt(H,P,U,ee);return Nl=null,Ce}catch(Le){if(Le===Ns||Le===Vi)throw Le;var Ke=wn(29,Le,null,H.mode);return Ke.lanes=ee,Ke.return=H,Ke}finally{}}}var kl=c0(!0),d0=c0(!1),_n=F(null),aa=null;function Ga(e){var t=e.alternate;X($t,$t.current&1),X(_n,e),aa===null&&(t===null||xl.current!==null||t.memoizedState!==null)&&(aa=e)}function u0(e){if(e.tag===22){if(X($t,$t.current),X(_n,e),aa===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(aa=e)}}else $a()}function $a(){X($t,$t.current),X(_n,_n.current)}function xa(e){B(_n),aa===e&&(aa=null),B($t)}var $t=F(0);function so(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||nu(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function md(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:p({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var gd={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=Sn(),d=Ha(i);d.payload=t,a!=null&&(d.callback=a),t=qa(e,d,i),t!==null&&(Dn(t,e,i),js(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=Sn(),d=Ha(i);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=qa(e,d,i),t!==null&&(Dn(t,e,i),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Sn(),i=Ha(a);i.tag=2,t!=null&&(i.callback=t),t=qa(e,i,a),t!==null&&(Dn(t,e,a),js(t,e,a))}};function f0(e,t,a,i,d,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,y):t.prototype&&t.prototype.isPureReactComponent?!gs(a,i)||!gs(d,f):!0}function m0(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&gd.enqueueReplaceState(t,t.state,null)}function Rr(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=p({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var io=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function g0(e){io(e)}function h0(e){console.error(e)}function b0(e){io(e)}function oo(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function p0(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function hd(e,t,a){return a=Ha(a),a.tag=3,a.payload={element:null},a.callback=function(){oo(e,t)},a}function x0(e){return e=Ha(e),e.tag=3,e}function y0(e,t,a,i){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=i.value;e.payload=function(){return d(f)},e.callback=function(){p0(t,a,i)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){p0(t,a,i),typeof d!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var k=i.stack;this.componentDidCatch(i.value,{componentStack:k!==null?k:""})})}function Ex(e,t,a,i,d){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&ys(t,a,d,!0),a=_n.current,a!==null){switch(a.tag){case 13:return aa===null?Id():a.alternate===null&&Mt===0&&(Mt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,i===$c?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),qd(e,i,d)),!1;case 22:return a.flags|=65536,i===$c?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),qd(e,i,d)),!1}throw Error(o(435,a.tag))}return qd(e,i,d),Id(),!1}if(ct)return t=_n.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,i!==_c&&(e=Error(o(422),{cause:i}),xs(Rn(e,a)))):(i!==_c&&(t=Error(o(423),{cause:i}),xs(Rn(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,i=Rn(i,a),d=hd(e.stateNode,i,d),Vc(e,d),Mt!==4&&(Mt=2)),!1;var f=Error(o(520),{cause:i});if(f=Rn(f,a),Is===null?Is=[f]:Is.push(f),Mt!==4&&(Mt=2),t===null)return!0;i=Rn(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=hd(a.stateNode,i,e),Vc(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Za===null||!Za.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=x0(d),y0(d,e,a,i),Vc(a,d),!1}a=a.return}while(a!==null);return!1}var v0=Error(o(461)),Yt=!1;function Wt(e,t,a,i){t.child=e===null?d0(t,null,a,i):kl(t,e.child,a,i)}function w0(e,t,a,i,d){a=a.render;var f=t.ref;if("ref"in i){var y={};for(var k in i)k!=="ref"&&(y[k]=i[k])}else y=i;return Mr(t),i=Kc(e,t,a,y,f,d),k=Jc(),e!==null&&!Yt?(ed(e,t,d),ya(e,t,d)):(ct&&k&&Pc(t),t.flags|=1,Wt(e,t,i,d),t.child)}function N0(e,t,a,i,d){if(e===null){var f=a.type;return typeof f=="function"&&!Oc(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,k0(e,t,f,i,d)):(e=qi(a.type,null,i,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!kd(e,d)){var y=f.memoizedProps;if(a=a.compare,a=a!==null?a:gs,a(y,i)&&e.ref===t.ref)return ya(e,t,d)}return t.flags|=1,e=fa(f,i),e.ref=t.ref,e.return=t,t.child=e}function k0(e,t,a,i,d){if(e!==null){var f=e.memoizedProps;if(gs(f,i)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=i=f,kd(e,d))(e.flags&131072)!==0&&(Yt=!0);else return t.lanes=e.lanes,ya(e,t,d)}return bd(e,t,a,i,d)}function j0(e,t,a){var i=t.pendingProps,d=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if((t.flags&128)!==0){if(i=f!==null?f.baseLanes|a:a,e!==null){for(d=t.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;t.childLanes=f&~i}else t.childLanes=0,t.child=null;return S0(e,t,i,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Fi(t,f!==null?f.cachePool:null),f!==null?km(t,f):Xc(),u0(t);else return t.lanes=t.childLanes=536870912,S0(e,t,f!==null?f.baseLanes|a:a,a)}else f!==null?(Fi(t,f.cachePool),km(t,f),$a(),t.memoizedState=null):(e!==null&&Fi(t,null),Xc(),$a());return Wt(e,t,d,a),t.child}function S0(e,t,a,i){var d=Gc();return d=d===null?null:{parent:Gt._currentValue,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&Fi(t,null),Xc(),u0(t),e!==null&&ys(e,t,i,!0),null}function co(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function bd(e,t,a,i,d){return Mr(t),a=Kc(e,t,a,i,void 0,d),i=Jc(),e!==null&&!Yt?(ed(e,t,d),ya(e,t,d)):(ct&&i&&Pc(t),t.flags|=1,Wt(e,t,a,d),t.child)}function D0(e,t,a,i,d,f){return Mr(t),t.updateQueue=null,a=Sm(t,i,a,d),jm(e),i=Jc(),e!==null&&!Yt?(ed(e,t,f),ya(e,t,f)):(ct&&i&&Pc(t),t.flags|=1,Wt(e,t,a,f),t.child)}function C0(e,t,a,i,d){if(Mr(t),t.stateNode===null){var f=ml,y=a.contextType;typeof y=="object"&&y!==null&&(f=an(y)),f=new a(i,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=gd,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=i,f.state=t.memoizedState,f.refs={},Yc(t),y=a.contextType,f.context=typeof y=="object"&&y!==null?an(y):ml,f.state=t.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(md(t,a,y,i),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&gd.enqueueReplaceState(f,f.state,null),Ds(t,i,f,d),Ss(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){f=t.stateNode;var k=t.memoizedProps,M=Rr(a,k);f.props=M;var G=f.context,J=a.contextType;y=ml,typeof J=="object"&&J!==null&&(y=an(J));var re=a.getDerivedStateFromProps;J=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(k||G!==y)&&m0(t,f,i,y),Ia=!1;var V=t.memoizedState;f.state=V,Ds(t,i,f,d),Ss(),G=t.memoizedState,k||V!==G||Ia?(typeof re=="function"&&(md(t,a,re,i),G=t.memoizedState),(M=Ia||f0(t,a,M,i,V,G,y))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=G),f.props=i,f.state=G,f.context=y,i=M):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Fc(e,t),y=t.memoizedProps,J=Rr(a,y),f.props=J,re=t.pendingProps,V=f.context,G=a.contextType,M=ml,typeof G=="object"&&G!==null&&(M=an(G)),k=a.getDerivedStateFromProps,(G=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==re||V!==M)&&m0(t,f,i,M),Ia=!1,V=t.memoizedState,f.state=V,Ds(t,i,f,d),Ss();var Q=t.memoizedState;y!==re||V!==Q||Ia||e!==null&&e.dependencies!==null&&$i(e.dependencies)?(typeof k=="function"&&(md(t,a,k,i),Q=t.memoizedState),(J=Ia||f0(t,a,J,i,V,Q,M)||e!==null&&e.dependencies!==null&&$i(e.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,Q,M),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,Q,M)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Q),f.props=i,f.state=Q,f.context=M,i=J):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),i=!1)}return f=i,co(e,t),i=(t.flags&128)!==0,f||i?(f=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&i?(t.child=kl(t,e.child,null,d),t.child=kl(t,null,a,d)):Wt(e,t,a,d),t.memoizedState=f.state,e=t.child):e=ya(e,t,d),e}function A0(e,t,a,i){return ps(),t.flags|=256,Wt(e,t,a,i),t.child}var pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xd(e){return{baseLanes:e,cachePool:hm()}}function yd(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=zn),e}function T0(e,t,a){var i=t.pendingProps,d=!1,f=(t.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),y&&(d=!0,t.flags&=-129),y=(t.flags&32)!==0,t.flags&=-33,e===null){if(ct){if(d?Ga(t):$a(),ct){var k=Tt,M;if(M=k){e:{for(M=k,k=na;M.nodeType!==8;){if(!k){k=null;break e}if(M=Wn(M.nextSibling),M===null){k=null;break e}}k=M}k!==null?(t.memoizedState={dehydrated:k,treeContext:Sr!==null?{id:ma,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},M=wn(18,null,null,0),M.stateNode=k,M.return=t,t.child=M,on=t,Tt=null,M=!0):M=!1}M||Ar(t)}if(k=t.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return nu(k)?t.lanes=32:t.lanes=536870912,null;xa(t)}return k=i.children,i=i.fallback,d?($a(),d=t.mode,k=uo({mode:"hidden",children:k},d),i=jr(i,d,a,null),k.return=t,i.return=t,k.sibling=i,t.child=k,d=t.child,d.memoizedState=xd(a),d.childLanes=yd(e,y,a),t.memoizedState=pd,i):(Ga(t),vd(t,k))}if(M=e.memoizedState,M!==null&&(k=M.dehydrated,k!==null)){if(f)t.flags&256?(Ga(t),t.flags&=-257,t=wd(e,t,a)):t.memoizedState!==null?($a(),t.child=e.child,t.flags|=128,t=null):($a(),d=i.fallback,k=t.mode,i=uo({mode:"visible",children:i.children},k),d=jr(d,k,a,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,kl(t,e.child,null,a),i=t.child,i.memoizedState=xd(a),i.childLanes=yd(e,y,a),t.memoizedState=pd,t=d);else if(Ga(t),nu(k)){if(y=k.nextSibling&&k.nextSibling.dataset,y)var G=y.dgst;y=G,i=Error(o(419)),i.stack="",i.digest=y,xs({value:i,source:null,stack:null}),t=wd(e,t,a)}else if(Yt||ys(e,t,a,!1),y=(a&e.childLanes)!==0,Yt||y){if(y=Nt,y!==null&&(i=a&-a,i=(i&42)!==0?1:br(i),i=(i&(y.suspendedLanes|a))!==0?0:i,i!==0&&i!==M.retryLane))throw M.retryLane=i,fl(e,i),Dn(y,e,i),v0;k.data==="$?"||Id(),t=wd(e,t,a)}else k.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=M.treeContext,Tt=Wn(k.nextSibling),on=t,ct=!0,Cr=null,na=!1,e!==null&&(Pn[Bn++]=ma,Pn[Bn++]=ga,Pn[Bn++]=Sr,ma=e.id,ga=e.overflow,Sr=t),t=vd(t,i.children),t.flags|=4096);return t}return d?($a(),d=i.fallback,k=t.mode,M=e.child,G=M.sibling,i=fa(M,{mode:"hidden",children:i.children}),i.subtreeFlags=M.subtreeFlags&65011712,G!==null?d=fa(G,d):(d=jr(d,k,a,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,k=e.child.memoizedState,k===null?k=xd(a):(M=k.cachePool,M!==null?(G=Gt._currentValue,M=M.parent!==G?{parent:G,pool:G}:M):M=hm(),k={baseLanes:k.baseLanes|a,cachePool:M}),d.memoizedState=k,d.childLanes=yd(e,y,a),t.memoizedState=pd,i):(Ga(t),a=e.child,e=a.sibling,a=fa(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(y=t.deletions,y===null?(t.deletions=[e],t.flags|=16):y.push(e)),t.child=a,t.memoizedState=null,a)}function vd(e,t){return t=uo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function uo(e,t){return e=wn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function wd(e,t,a){return kl(t,e.child,null,a),e=vd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M0(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Ic(e.return,t,a)}function Nd(e,t,a,i,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=a,f.tailMode=d)}function E0(e,t,a){var i=t.pendingProps,d=i.revealOrder,f=i.tail;if(Wt(e,t,i.children,a),i=$t.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M0(e,a,t);else if(e.tag===19)M0(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(X($t,i),d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&so(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),Nd(t,!1,d,a,f);break;case"backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&so(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Nd(t,!0,a,null,f);break;case"together":Nd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ya(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Xa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ys(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=fa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=fa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function kd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&$i(e)))}function Ox(e,t,a){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),za(t,Gt,e.memoizedState.cache),ps();break;case 27:case 5:$e(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:za(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ga(t),t.flags|=128,null):(a&t.child.childLanes)!==0?T0(e,t,a):(Ga(t),e=ya(e,t,a),e!==null?e.sibling:null);Ga(t);break;case 19:var d=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(ys(e,t,a,!1),i=(a&t.childLanes)!==0),d){if(i)return E0(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),X($t,$t.current),i)break;return null;case 22:case 23:return t.lanes=0,j0(e,t,a);case 24:za(t,Gt,e.memoizedState.cache)}return ya(e,t,a)}function O0(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Yt=!0;else{if(!kd(e,a)&&(t.flags&128)===0)return Yt=!1,Ox(e,t,a);Yt=(e.flags&131072)!==0}else Yt=!1,ct&&(t.flags&1048576)!==0&&om(t,Gi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,d=i._init;if(i=d(i._payload),t.type=i,typeof i=="function")Oc(i)?(e=Rr(i,e),t.tag=1,t=C0(null,t,i,e,a)):(t.tag=0,t=bd(null,t,i,e,a));else{if(i!=null){if(d=i.$$typeof,d===R){t.tag=11,t=w0(null,t,i,e,a);break e}else if(d===se){t.tag=14,t=N0(null,t,i,e,a);break e}}throw t=Z(i)||i,Error(o(306,t,""))}}return t;case 0:return bd(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,d=Rr(i,t.pendingProps),C0(e,t,i,d,a);case 3:e:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(o(387));i=t.pendingProps;var f=t.memoizedState;d=f.element,Fc(e,t),Ds(t,i,null,a);var y=t.memoizedState;if(i=y.cache,za(t,Gt,i),i!==f.cache&&Hc(t,[Gt],a,!0),Ss(),i=y.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:y.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=A0(e,t,i,a);break e}else if(i!==d){d=Rn(Error(o(424)),t),xs(d),t=A0(e,t,i,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=Wn(e.firstChild),on=t,ct=!0,Cr=null,na=!0,a=d0(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ps(),i===d){t=ya(e,t,a);break e}Wt(e,t,i,a)}t=t.child}return t;case 26:return co(e,t),e===null?(a=Bg(t.type,null,t.pendingProps,null))?t.memoizedState=a:ct||(a=t.type,e=t.pendingProps,i=So(we.current).createElement(a),i[zt]=t,i[Ut]=e,Jt(i,a,e),Oe(i),t.stateNode=i):t.memoizedState=Bg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $e(t),e===null&&ct&&(i=t.stateNode=Rg(t.type,t.pendingProps,we.current),on=t,na=!0,d=Tt,Ja(t.type)?(au=d,Tt=Wn(i.firstChild)):Tt=d),Wt(e,t,t.pendingProps.children,a),co(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ct&&((d=i=Tt)&&(i=sy(i,t.type,t.pendingProps,na),i!==null?(t.stateNode=i,on=t,Tt=Wn(i.firstChild),na=!1,d=!0):d=!1),d||Ar(t)),$e(t),d=t.type,f=t.pendingProps,y=e!==null?e.memoizedProps:null,i=f.children,Jd(d,f)?i=null:y!==null&&Jd(d,y)&&(t.flags|=32),t.memoizedState!==null&&(d=Kc(e,t,jx,null,null,a),Qs._currentValue=d),co(e,t),Wt(e,t,i,a),t.child;case 6:return e===null&&ct&&((e=a=Tt)&&(a=iy(a,t.pendingProps,na),a!==null?(t.stateNode=a,on=t,Tt=null,e=!0):e=!1),e||Ar(t)),null;case 13:return T0(e,t,a);case 4:return xe(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=kl(t,null,i,a):Wt(e,t,i,a),t.child;case 11:return w0(e,t,t.type,t.pendingProps,a);case 7:return Wt(e,t,t.pendingProps,a),t.child;case 8:return Wt(e,t,t.pendingProps.children,a),t.child;case 12:return Wt(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,za(t,t.type,i.value),Wt(e,t,i.children,a),t.child;case 9:return d=t.type._context,i=t.pendingProps.children,Mr(t),d=an(d),i=i(d),t.flags|=1,Wt(e,t,i,a),t.child;case 14:return N0(e,t,t.type,t.pendingProps,a);case 15:return k0(e,t,t.type,t.pendingProps,a);case 19:return E0(e,t,a);case 31:return i=t.pendingProps,a=t.mode,i={mode:i.mode,children:i.children},e===null?(a=uo(i,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=fa(e.child,i),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return j0(e,t,a);case 24:return Mr(t),i=an(Gt),e===null?(d=Gc(),d===null&&(d=Nt,f=qc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),t.memoizedState={parent:i,cache:d},Yc(t),za(t,Gt,d)):((e.lanes&a)!==0&&(Fc(e,t),Ds(t,null,null,a),Ss()),d=e.memoizedState,f=t.memoizedState,d.parent!==i?(d={parent:i,cache:i},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),za(t,Gt,i)):(i=f.cache,za(t,Gt,i),i!==d.cache&&Hc(t,[Gt],a,!0))),Wt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function va(e){e.flags|=4}function R0(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qg(t)){if(t=_n.current,t!==null&&((at&4194048)===at?aa!==null:(at&62914560)!==at&&(at&536870912)===0||t!==aa))throw ks=$c,bm;e.flags|=8192}}function fo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Aa():536870912,e.lanes|=t,Cl|=t)}function Rs(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,i|=d.subtreeFlags&65011712,i|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Rx(e,t,a){var i=t.pendingProps;switch(Bc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(t),null;case 1:return Ct(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ba(Gt),_e(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(bs(t)?va(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,um())),Ct(t),null;case 26:return a=t.memoizedState,e===null?(va(t),a!==null?(Ct(t),R0(t,a)):(Ct(t),t.flags&=-16777217)):a?a!==e.memoizedState?(va(t),Ct(t),R0(t,a)):(Ct(t),t.flags&=-16777217):(e.memoizedProps!==i&&va(t),Ct(t),t.flags&=-16777217),null;case 27:qe(t),a=we.current;var d=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&va(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Ct(t),null}e=te.current,bs(t)?cm(t):(e=Rg(d,i,a),t.stateNode=e,va(t))}return Ct(t),null;case 5:if(qe(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&va(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Ct(t),null}if(e=te.current,bs(t))cm(t);else{switch(d=So(we.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?d.createElement("select",{is:i.is}):d.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?d.createElement(a,{is:i.is}):d.createElement(a)}}e[zt]=t,e[Ut]=i;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=e;e:switch(Jt(e,a,i),a){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&va(t)}}return Ct(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&va(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=we.current,bs(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,d=on,d!==null)switch(d.tag){case 27:case 5:i=d.memoizedProps}e[zt]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||Dg(e.nodeValue,a)),e||Ar(t)}else e=So(e).createTextNode(i),e[zt]=t,t.stateNode=e}return Ct(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=bs(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[zt]=t}else ps(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ct(t),d=!1}else d=um(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(xa(t),t):(xa(t),null)}if(xa(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=i!==null,e=e!==null&&e.memoizedState!==null,a){i=t.child,d=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(d=i.alternate.memoizedState.cachePool.pool);var f=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==d&&(i.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),fo(t,t.updateQueue),Ct(t),null;case 4:return _e(),e===null&&Qd(t.stateNode.containerInfo),Ct(t),null;case 10:return ba(t.type),Ct(t),null;case 19:if(B($t),d=t.memoizedState,d===null)return Ct(t),null;if(i=(t.flags&128)!==0,f=d.rendering,f===null)if(i)Rs(d,!1);else{if(Mt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=so(e),f!==null){for(t.flags|=128,Rs(d,!1),e=f.updateQueue,t.updateQueue=e,fo(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)im(a,e),a=a.sibling;return X($t,$t.current&1|2),t.child}e=e.sibling}d.tail!==null&&ge()>ho&&(t.flags|=128,i=!0,Rs(d,!1),t.lanes=4194304)}else{if(!i)if(e=so(f),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,fo(t,e),Rs(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!ct)return Ct(t),null}else 2*ge()-d.renderingStartTime>ho&&a!==536870912&&(t.flags|=128,i=!0,Rs(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(e=d.last,e!==null?e.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=ge(),t.sibling=null,e=$t.current,X($t,i?e&1|2:e&1),t):(Ct(t),null);case 22:case 23:return xa(t),Zc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Ct(t),t.subtreeFlags&6&&(t.flags|=8192)):Ct(t),a=t.updateQueue,a!==null&&fo(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&B(Er),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ba(Gt),Ct(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Lx(e,t){switch(Bc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ba(Gt),_e(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return qe(t),null;case 13:if(xa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B($t),null;case 4:return _e(),null;case 10:return ba(t.type),null;case 22:case 23:return xa(t),Zc(),e!==null&&B(Er),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ba(Gt),null;case 25:return null;default:return null}}function L0(e,t){switch(Bc(t),t.tag){case 3:ba(Gt),_e();break;case 26:case 27:case 5:qe(t);break;case 4:_e();break;case 13:xa(t);break;case 19:B($t);break;case 10:ba(t.type);break;case 22:case 23:xa(t),Zc(),e!==null&&B(Er);break;case 24:ba(Gt)}}function Ls(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var d=i.next;a=d;do{if((a.tag&e)===e){i=void 0;var f=a.create,y=a.inst;i=f(),y.destroy=i}a=a.next}while(a!==d)}}catch(k){wt(t,t.return,k)}}function Ya(e,t,a){try{var i=t.updateQueue,d=i!==null?i.lastEffect:null;if(d!==null){var f=d.next;i=f;do{if((i.tag&e)===e){var y=i.inst,k=y.destroy;if(k!==void 0){y.destroy=void 0,d=t;var M=a,G=k;try{G()}catch(J){wt(d,M,J)}}}i=i.next}while(i!==f)}}catch(J){wt(t,t.return,J)}}function P0(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Nm(t,a)}catch(i){wt(e,e.return,i)}}}function B0(e,t,a){a.props=Rr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){wt(e,t,i)}}function Ps(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(d){wt(e,t,d)}}function ra(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(d){wt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){wt(e,t,d)}else a.current=null}function _0(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(d){wt(e,e.return,d)}}function jd(e,t,a){try{var i=e.stateNode;ty(i,e.type,a,t),i[Ut]=t}catch(d){wt(e,e.return,d)}}function z0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ja(e.type)||e.tag===4}function Sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||z0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ja(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dd(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=jo));else if(i!==4&&(i===27&&Ja(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Dd(e,t,a),e=e.sibling;e!==null;)Dd(e,t,a),e=e.sibling}function mo(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&Ja(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(mo(e,t,a),e=e.sibling;e!==null;)mo(e,t,a),e=e.sibling}function I0(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Jt(t,i,a),t[zt]=e,t[Ut]=a}catch(f){wt(e,e.return,f)}}var wa=!1,Pt=!1,Cd=!1,H0=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function Px(e,t){if(e=e.containerInfo,Wd=Eo,e=Wf(e),Sc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var d=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var y=0,k=-1,M=-1,G=0,J=0,re=e,V=null;t:for(;;){for(var Q;re!==a||d!==0&&re.nodeType!==3||(k=y+d),re!==f||i!==0&&re.nodeType!==3||(M=y+i),re.nodeType===3&&(y+=re.nodeValue.length),(Q=re.firstChild)!==null;)V=re,re=Q;for(;;){if(re===e)break t;if(V===a&&++G===d&&(k=y),V===f&&++J===i&&(M=y),(Q=re.nextSibling)!==null)break;re=V,V=re.parentNode}re=Q}a=k===-1||M===-1?null:{start:k,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kd={focusedElem:e,selectionRange:a},Eo=!1,Ft=t;Ft!==null;)if(t=Ft,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ft=e;else for(;Ft!==null;){switch(t=Ft,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,d=f.memoizedProps,f=f.memoizedState,i=a.stateNode;try{var Ge=Rr(a.type,d,a.elementType===a.type);e=i.getSnapshotBeforeUpdate(Ge,f),i.__reactInternalSnapshotBeforeUpdate=e}catch(ze){wt(a,a.return,ze)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)tu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ft=e;break}Ft=t.return}}function q0(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:Fa(e,a),i&4&&Ls(5,a);break;case 1:if(Fa(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(y){wt(a,a.return,y)}else{var d=Rr(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(y){wt(a,a.return,y)}}i&64&&P0(a),i&512&&Ps(a,a.return);break;case 3:if(Fa(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Nm(e,t)}catch(y){wt(a,a.return,y)}}break;case 27:t===null&&i&4&&I0(a);case 26:case 5:Fa(e,a),t===null&&i&4&&_0(a),i&512&&Ps(a,a.return);break;case 12:Fa(e,a);break;case 13:Fa(e,a),i&4&&$0(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=$x.bind(null,a),oy(e,a))));break;case 22:if(i=a.memoizedState!==null||wa,!i){t=t!==null&&t.memoizedState!==null||Pt,d=wa;var f=Pt;wa=i,(Pt=t)&&!f?Va(e,a,(a.subtreeFlags&8772)!==0):Fa(e,a),wa=d,Pt=f}break;case 30:break;default:Fa(e,a)}}function U0(e){var t=e.alternate;t!==null&&(e.alternate=null,U0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Kl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jt=null,hn=!1;function Na(e,t,a){for(a=a.child;a!==null;)G0(e,t,a),a=a.sibling}function G0(e,t,a){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(We,a)}catch{}switch(a.tag){case 26:Pt||ra(a,t),Na(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||ra(a,t);var i=jt,d=hn;Ja(a.type)&&(jt=a.stateNode,hn=!1),Na(e,t,a),$s(a.stateNode),jt=i,hn=d;break;case 5:Pt||ra(a,t);case 6:if(i=jt,d=hn,jt=null,Na(e,t,a),jt=i,hn=d,jt!==null)if(hn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(a.stateNode)}catch(f){wt(a,t,f)}else try{jt.removeChild(a.stateNode)}catch(f){wt(a,t,f)}break;case 18:jt!==null&&(hn?(e=jt,Eg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ks(e)):Eg(jt,a.stateNode));break;case 4:i=jt,d=hn,jt=a.stateNode.containerInfo,hn=!0,Na(e,t,a),jt=i,hn=d;break;case 0:case 11:case 14:case 15:Pt||Ya(2,a,t),Pt||Ya(4,a,t),Na(e,t,a);break;case 1:Pt||(ra(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&B0(a,t,i)),Na(e,t,a);break;case 21:Na(e,t,a);break;case 22:Pt=(i=Pt)||a.memoizedState!==null,Na(e,t,a),Pt=i;break;default:Na(e,t,a)}}function $0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ks(e)}catch(a){wt(t,t.return,a)}}function Bx(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new H0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new H0),t;default:throw Error(o(435,e.tag))}}function Ad(e,t){var a=Bx(e);t.forEach(function(i){var d=Yx.bind(null,e,i);a.has(i)||(a.add(i),i.then(d,d))})}function Nn(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var d=a[i],f=e,y=t,k=y;e:for(;k!==null;){switch(k.tag){case 27:if(Ja(k.type)){jt=k.stateNode,hn=!1;break e}break;case 5:jt=k.stateNode,hn=!1;break e;case 3:case 4:jt=k.stateNode.containerInfo,hn=!0;break e}k=k.return}if(jt===null)throw Error(o(160));G0(f,y,d),jt=null,hn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Y0(t,e),t=t.sibling}var Zn=null;function Y0(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nn(t,e),kn(e),i&4&&(Ya(3,e,e.return),Ls(3,e),Ya(5,e,e.return));break;case 1:Nn(t,e),kn(e),i&512&&(Pt||a===null||ra(a,a.return)),i&64&&wa&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var d=Zn;if(Nn(t,e),kn(e),i&512&&(Pt||a===null||ra(a,a.return)),i&4){var f=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(i){case"title":f=d.getElementsByTagName("title")[0],(!f||f[pr]||f[zt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(i),d.head.insertBefore(f,d.querySelector("head > title"))),Jt(f,i,a),f[zt]=e,Oe(f),i=f;break e;case"link":var y=Ig("link","href",d).get(i+(a.href||""));if(y){for(var k=0;k<y.length;k++)if(f=y[k],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(k,1);break t}}f=d.createElement(i),Jt(f,i,a),d.head.appendChild(f);break;case"meta":if(y=Ig("meta","content",d).get(i+(a.content||""))){for(k=0;k<y.length;k++)if(f=y[k],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(k,1);break t}}f=d.createElement(i),Jt(f,i,a),d.head.appendChild(f);break;default:throw Error(o(468,i))}f[zt]=e,Oe(f),i=f}e.stateNode=i}else Hg(d,e.type,e.stateNode);else e.stateNode=zg(d,i,e.memoizedProps);else f!==i?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,i===null?Hg(d,e.type,e.stateNode):zg(d,i,e.memoizedProps)):i===null&&e.stateNode!==null&&jd(e,e.memoizedProps,a.memoizedProps)}break;case 27:Nn(t,e),kn(e),i&512&&(Pt||a===null||ra(a,a.return)),a!==null&&i&4&&jd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Nn(t,e),kn(e),i&512&&(Pt||a===null||ra(a,a.return)),e.flags&32){d=e.stateNode;try{Ra(d,"")}catch(Q){wt(e,e.return,Q)}}i&4&&e.stateNode!=null&&(d=e.memoizedProps,jd(e,d,a!==null?a.memoizedProps:d)),i&1024&&(Cd=!0);break;case 6:if(Nn(t,e),kn(e),i&4){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(Q){wt(e,e.return,Q)}}break;case 3:if(Ao=null,d=Zn,Zn=Do(t.containerInfo),Nn(t,e),Zn=d,kn(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{Ks(t.containerInfo)}catch(Q){wt(e,e.return,Q)}Cd&&(Cd=!1,F0(e));break;case 4:i=Zn,Zn=Do(e.stateNode.containerInfo),Nn(t,e),kn(e),Zn=i;break;case 12:Nn(t,e),kn(e);break;case 13:Nn(t,e),kn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ld=ge()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ad(e,i)));break;case 22:d=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,G=wa,J=Pt;if(wa=G||d,Pt=J||M,Nn(t,e),Pt=J,wa=G,kn(e),i&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(a===null||M||wa||Pt||Lr(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){M=a=t;try{if(f=M.stateNode,d)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{k=M.stateNode;var re=M.memoizedProps.style,V=re!=null&&re.hasOwnProperty("display")?re.display:null;k.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(Q){wt(M,M.return,Q)}}}else if(t.tag===6){if(a===null){M=t;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(Q){wt(M,M.return,Q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Ad(e,a))));break;case 19:Nn(t,e),kn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ad(e,i)));break;case 30:break;case 21:break;default:Nn(t,e),kn(e)}}function kn(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(z0(i)){a=i;break}i=i.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var d=a.stateNode,f=Sd(e);mo(e,f,d);break;case 5:var y=a.stateNode;a.flags&32&&(Ra(y,""),a.flags&=-33);var k=Sd(e);mo(e,k,y);break;case 3:case 4:var M=a.stateNode.containerInfo,G=Sd(e);Dd(e,G,M);break;default:throw Error(o(161))}}catch(J){wt(e,e.return,J)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function F0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;F0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Fa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)q0(e,t.alternate,t),t=t.sibling}function Lr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ya(4,t,t.return),Lr(t);break;case 1:ra(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&B0(t,t.return,a),Lr(t);break;case 27:$s(t.stateNode);case 26:case 5:ra(t,t.return),Lr(t);break;case 22:t.memoizedState===null&&Lr(t);break;case 30:Lr(t);break;default:Lr(t)}e=e.sibling}}function Va(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,d=e,f=t,y=f.flags;switch(f.tag){case 0:case 11:case 15:Va(d,f,a),Ls(4,f);break;case 1:if(Va(d,f,a),i=f,d=i.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){wt(i,i.return,G)}if(i=f,d=i.updateQueue,d!==null){var k=i.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)wm(M[d],k)}catch(G){wt(i,i.return,G)}}a&&y&64&&P0(f),Ps(f,f.return);break;case 27:I0(f);case 26:case 5:Va(d,f,a),a&&i===null&&y&4&&_0(f),Ps(f,f.return);break;case 12:Va(d,f,a);break;case 13:Va(d,f,a),a&&y&4&&$0(d,f);break;case 22:f.memoizedState===null&&Va(d,f,a),Ps(f,f.return);break;case 30:break;default:Va(d,f,a)}t=t.sibling}}function Td(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&vs(a))}function Md(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vs(e))}function la(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)V0(e,t,a,i),t=t.sibling}function V0(e,t,a,i){var d=t.flags;switch(t.tag){case 0:case 11:case 15:la(e,t,a,i),d&2048&&Ls(9,t);break;case 1:la(e,t,a,i);break;case 3:la(e,t,a,i),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vs(e)));break;case 12:if(d&2048){la(e,t,a,i),e=t.stateNode;try{var f=t.memoizedProps,y=f.id,k=f.onPostCommit;typeof k=="function"&&k(y,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){wt(t,t.return,M)}}else la(e,t,a,i);break;case 13:la(e,t,a,i);break;case 23:break;case 22:f=t.stateNode,y=t.alternate,t.memoizedState!==null?f._visibility&2?la(e,t,a,i):Bs(e,t):f._visibility&2?la(e,t,a,i):(f._visibility|=2,jl(e,t,a,i,(t.subtreeFlags&10256)!==0)),d&2048&&Td(y,t);break;case 24:la(e,t,a,i),d&2048&&Md(t.alternate,t);break;default:la(e,t,a,i)}}function jl(e,t,a,i,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,y=t,k=a,M=i,G=y.flags;switch(y.tag){case 0:case 11:case 15:jl(f,y,k,M,d),Ls(8,y);break;case 23:break;case 22:var J=y.stateNode;y.memoizedState!==null?J._visibility&2?jl(f,y,k,M,d):Bs(f,y):(J._visibility|=2,jl(f,y,k,M,d)),d&&G&2048&&Td(y.alternate,y);break;case 24:jl(f,y,k,M,d),d&&G&2048&&Md(y.alternate,y);break;default:jl(f,y,k,M,d)}t=t.sibling}}function Bs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,d=i.flags;switch(i.tag){case 22:Bs(a,i),d&2048&&Td(i.alternate,i);break;case 24:Bs(a,i),d&2048&&Md(i.alternate,i);break;default:Bs(a,i)}t=t.sibling}}var _s=8192;function Sl(e){if(e.subtreeFlags&_s)for(e=e.child;e!==null;)Q0(e),e=e.sibling}function Q0(e){switch(e.tag){case 26:Sl(e),e.flags&_s&&e.memoizedState!==null&&wy(Zn,e.memoizedState,e.memoizedProps);break;case 5:Sl(e);break;case 3:case 4:var t=Zn;Zn=Do(e.stateNode.containerInfo),Sl(e),Zn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=_s,_s=16777216,Sl(e),_s=t):Sl(e));break;default:Sl(e)}}function X0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];Ft=i,W0(i,e)}X0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Z0(e),e=e.sibling}function Z0(e){switch(e.tag){case 0:case 11:case 15:zs(e),e.flags&2048&&Ya(9,e,e.return);break;case 3:zs(e);break;case 12:zs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,go(e)):zs(e);break;default:zs(e)}}function go(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];Ft=i,W0(i,e)}X0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ya(8,t,t.return),go(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,go(t));break;default:go(t)}e=e.sibling}}function W0(e,t){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Ya(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:vs(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,Ft=i;else e:for(a=e;Ft!==null;){i=Ft;var d=i.sibling,f=i.return;if(U0(i),i===a){Ft=null;break e}if(d!==null){d.return=f,Ft=d;break e}Ft=f}}}var _x={getCacheForType:function(e){var t=an(Gt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},zx=typeof WeakMap=="function"?WeakMap:Map,mt=0,Nt=null,Je=null,at=0,gt=0,jn=null,Qa=!1,Dl=!1,Ed=!1,ka=0,Mt=0,Xa=0,Pr=0,Od=0,zn=0,Cl=0,Is=null,bn=null,Rd=!1,Ld=0,ho=1/0,bo=null,Za=null,Kt=0,Wa=null,Al=null,Tl=0,Pd=0,Bd=null,K0=null,Hs=0,_d=null;function Sn(){if((mt&2)!==0&&at!==0)return at&-at;if(E.T!==null){var e=bl;return e!==0?e:$d()}return Vr()}function J0(){zn===0&&(zn=(at&536870912)===0||ct?fn():536870912);var e=_n.current;return e!==null&&(e.flags|=32),zn}function Dn(e,t,a){(e===Nt&&(gt===2||gt===9)||e.cancelPendingCommit!==null)&&(Ml(e,0),Ka(e,at,zn,!1)),pn(e,a),((mt&2)===0||e!==Nt)&&(e===Nt&&((mt&2)===0&&(Pr|=a),Mt===4&&Ka(e,at,zn,!1)),sa(e))}function eg(e,t,a){if((mt&6)!==0)throw Error(o(327));var i=!a&&(t&124)===0&&(t&e.expiredLanes)===0||mr(e,t),d=i?qx(e,t):Hd(e,t,!0),f=i;do{if(d===0){Dl&&!i&&Ka(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!Ix(a)){d=Hd(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){t=y;e:{var k=e;d=Is;var M=k.current.memoizedState.isDehydrated;if(M&&(Ml(k,y).flags|=256),y=Hd(k,y,!1),y!==2){if(Ed&&!M){k.errorRecoveryDisabledLanes|=f,Pr|=f,d=4;break e}f=bn,bn=d,f!==null&&(bn===null?bn=f:bn.push.apply(bn,f))}d=y}if(f=!1,d!==2)continue}}if(d===1){Ml(e,0),Ka(e,t,0,!0);break}e:{switch(i=e,f=d,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ka(i,t,zn,!Qa);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=Ld+300-ge(),10<d)){if(Ka(i,t,zn,!Qa),Ca(i,0,!0)!==0)break e;i.timeoutHandle=Tg(tg.bind(null,i,a,bn,bo,Rd,t,zn,Pr,Cl,Qa,f,2,-0,0),d);break e}tg(i,a,bn,bo,Rd,t,zn,Pr,Cl,Qa,f,0,-0,0)}}break}while(!0);sa(e)}function tg(e,t,a,i,d,f,y,k,M,G,J,re,V,Q){if(e.timeoutHandle=-1,re=t.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Vs={stylesheets:null,count:0,unsuspend:vy},Q0(t),re=Ny(),re!==null)){e.cancelPendingCommit=re(og.bind(null,e,t,f,a,i,d,y,k,M,J,1,V,Q)),Ka(e,f,y,!G);return}og(e,t,f,a,i,d,y,k,M)}function Ix(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var d=a[i],f=d.getSnapshot;d=d.value;try{if(!vn(f(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ka(e,t,a,i){t&=~Od,t&=~Pr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var d=t;0<d;){var f=31-vt(d),y=1<<f;i[f]=-1,d&=~y}a!==0&&Fr(e,a,t)}function po(){return(mt&6)===0?(qs(0),!1):!0}function zd(){if(Je!==null){if(gt===0)var e=Je.return;else e=Je,ha=Tr=null,td(e),Nl=null,Es=0,e=Je;for(;e!==null;)L0(e.alternate,e),e=e.return;Je=null}}function Ml(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,ay(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),zd(),Nt=e,Je=a=fa(e.current,null),at=t,gt=0,jn=null,Qa=!1,Dl=mr(e,t),Ed=!1,Cl=zn=Od=Pr=Xa=Mt=0,bn=Is=null,Rd=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var d=31-vt(i),f=1<<d;t|=e[d],i&=~f}return ka=t,zi(),a}function ng(e,t){Ze=null,E.H=ao,t===Ns||t===Vi?(t=ym(),gt=3):t===bm?(t=ym(),gt=4):gt=t===v0?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,jn=t,Je===null&&(Mt=1,oo(e,Rn(t,e.current)))}function ag(){var e=E.H;return E.H=ao,e===null?ao:e}function rg(){var e=E.A;return E.A=_x,e}function Id(){Mt=4,Qa||(at&4194048)!==at&&_n.current!==null||(Dl=!0),(Xa&134217727)===0&&(Pr&134217727)===0||Nt===null||Ka(Nt,at,zn,!1)}function Hd(e,t,a){var i=mt;mt|=2;var d=ag(),f=rg();(Nt!==e||at!==t)&&(bo=null,Ml(e,t)),t=!1;var y=Mt;e:do try{if(gt!==0&&Je!==null){var k=Je,M=jn;switch(gt){case 8:zd(),y=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(t=!0);var G=gt;if(gt=0,jn=null,El(e,k,M,G),a&&Dl){y=0;break e}break;default:G=gt,gt=0,jn=null,El(e,k,M,G)}}Hx(),y=Mt;break}catch(J){ng(e,J)}while(!0);return t&&e.shellSuspendCounter++,ha=Tr=null,mt=i,E.H=d,E.A=f,Je===null&&(Nt=null,at=0,zi()),y}function Hx(){for(;Je!==null;)lg(Je)}function qx(e,t){var a=mt;mt|=2;var i=ag(),d=rg();Nt!==e||at!==t?(bo=null,ho=ge()+500,Ml(e,t)):Dl=mr(e,t);e:do try{if(gt!==0&&Je!==null){t=Je;var f=jn;t:switch(gt){case 1:gt=0,jn=null,El(e,t,f,1);break;case 2:case 9:if(pm(f)){gt=0,jn=null,sg(t);break}t=function(){gt!==2&&gt!==9||Nt!==e||(gt=7),sa(e)},f.then(t,t);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:pm(f)?(gt=0,jn=null,sg(t)):(gt=0,jn=null,El(e,t,f,7));break;case 5:var y=null;switch(Je.tag){case 26:y=Je.memoizedState;case 5:case 27:var k=Je;if(!y||qg(y)){gt=0,jn=null;var M=k.sibling;if(M!==null)Je=M;else{var G=k.return;G!==null?(Je=G,xo(G)):Je=null}break t}}gt=0,jn=null,El(e,t,f,5);break;case 6:gt=0,jn=null,El(e,t,f,6);break;case 8:zd(),Mt=6;break e;default:throw Error(o(462))}}Ux();break}catch(J){ng(e,J)}while(!0);return ha=Tr=null,E.H=i,E.A=d,mt=a,Je!==null?0:(Nt=null,at=0,zi(),Mt)}function Ux(){for(;Je!==null&&!Se();)lg(Je)}function lg(e){var t=O0(e.alternate,e,ka);e.memoizedProps=e.pendingProps,t===null?xo(e):Je=t}function sg(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=D0(a,t,t.pendingProps,t.type,void 0,at);break;case 11:t=D0(a,t,t.pendingProps,t.type.render,t.ref,at);break;case 5:td(t);default:L0(a,t),t=Je=im(t,ka),t=O0(a,t,ka)}e.memoizedProps=e.pendingProps,t===null?xo(e):Je=t}function El(e,t,a,i){ha=Tr=null,td(t),Nl=null,Es=0;var d=t.return;try{if(Ex(e,d,t,a,at)){Mt=1,oo(e,Rn(a,e.current)),Je=null;return}}catch(f){if(d!==null)throw Je=d,f;Mt=1,oo(e,Rn(a,e.current)),Je=null;return}t.flags&32768?(ct||i===1?e=!0:Dl||(at&536870912)!==0?e=!1:(Qa=e=!0,(i===2||i===9||i===3||i===6)&&(i=_n.current,i!==null&&i.tag===13&&(i.flags|=16384))),ig(t,e)):xo(t)}function xo(e){var t=e;do{if((t.flags&32768)!==0){ig(t,Qa);return}e=t.return;var a=Rx(t.alternate,t,ka);if(a!==null){Je=a;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);Mt===0&&(Mt=5)}function ig(e,t){do{var a=Lx(e.alternate,e);if(a!==null){a.flags&=32767,Je=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Je=e;return}Je=e=a}while(e!==null);Mt=6,Je=null}function og(e,t,a,i,d,f,y,k,M){e.cancelPendingCommit=null;do yo();while(Kt!==0);if((mt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=Mc,hc(e,a,f,y,k,M),e===Nt&&(Je=Nt=null,at=0),Al=t,Wa=e,Tl=a,Pd=f,Bd=d,K0=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Fx(le,function(){return mg(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=E.T,E.T=null,d=W.p,W.p=2,y=mt,mt|=4;try{Px(e,t,a)}finally{mt=y,W.p=d,E.T=i}}Kt=1,cg(),dg(),ug()}}function cg(){if(Kt===1){Kt=0;var e=Wa,t=Al,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var i=W.p;W.p=2;var d=mt;mt|=4;try{Y0(t,e);var f=Kd,y=Wf(e.containerInfo),k=f.focusedElem,M=f.selectionRange;if(y!==k&&k&&k.ownerDocument&&Zf(k.ownerDocument.documentElement,k)){if(M!==null&&Sc(k)){var G=M.start,J=M.end;if(J===void 0&&(J=G),"selectionStart"in k)k.selectionStart=G,k.selectionEnd=Math.min(J,k.value.length);else{var re=k.ownerDocument||document,V=re&&re.defaultView||window;if(V.getSelection){var Q=V.getSelection(),Ge=k.textContent.length,ze=Math.min(M.start,Ge),yt=M.end===void 0?ze:Math.min(M.end,Ge);!Q.extend&&ze>yt&&(y=yt,yt=ze,ze=y);var H=Xf(k,ze),P=Xf(k,yt);if(H&&P&&(Q.rangeCount!==1||Q.anchorNode!==H.node||Q.anchorOffset!==H.offset||Q.focusNode!==P.node||Q.focusOffset!==P.offset)){var U=re.createRange();U.setStart(H.node,H.offset),Q.removeAllRanges(),ze>yt?(Q.addRange(U),Q.extend(P.node,P.offset)):(U.setEnd(P.node,P.offset),Q.addRange(U))}}}}for(re=[],Q=k;Q=Q.parentNode;)Q.nodeType===1&&re.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<re.length;k++){var ee=re[k];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Eo=!!Wd,Kd=Wd=null}finally{mt=d,W.p=i,E.T=a}}e.current=t,Kt=2}}function dg(){if(Kt===2){Kt=0;var e=Wa,t=Al,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var i=W.p;W.p=2;var d=mt;mt|=4;try{q0(e,t.alternate,t)}finally{mt=d,W.p=i,E.T=a}}Kt=3}}function ug(){if(Kt===4||Kt===3){Kt=0,lt();var e=Wa,t=Al,a=Tl,i=K0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Kt=5:(Kt=0,Al=Wa=null,fg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Za=null),Zl(a),t=t.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(We,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=E.T,d=W.p,W.p=2,E.T=null;try{for(var f=e.onRecoverableError,y=0;y<i.length;y++){var k=i[y];f(k.value,{componentStack:k.stack})}}finally{E.T=t,W.p=d}}(Tl&3)!==0&&yo(),sa(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===_d?Hs++:(Hs=0,_d=e):Hs=0,qs(0)}}function fg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vs(t)))}function yo(e){return cg(),dg(),ug(),mg()}function mg(){if(Kt!==5)return!1;var e=Wa,t=Pd;Pd=0;var a=Zl(Tl),i=E.T,d=W.p;try{W.p=32>a?32:a,E.T=null,a=Bd,Bd=null;var f=Wa,y=Tl;if(Kt=0,Al=Wa=null,Tl=0,(mt&6)!==0)throw Error(o(331));var k=mt;if(mt|=4,Z0(f.current),V0(f,f.current,y,a),mt=k,qs(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(We,f)}catch{}return!0}finally{W.p=d,E.T=i,fg(e,t)}}function gg(e,t,a){t=Rn(a,t),t=hd(e.stateNode,t,2),e=qa(e,t,2),e!==null&&(pn(e,2),sa(e))}function wt(e,t,a){if(e.tag===3)gg(e,e,a);else for(;t!==null;){if(t.tag===3){gg(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Za===null||!Za.has(i))){e=Rn(a,e),a=x0(2),i=qa(t,a,2),i!==null&&(y0(a,i,t,e),pn(i,2),sa(i));break}}t=t.return}}function qd(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new zx;var d=new Set;i.set(t,d)}else d=i.get(t),d===void 0&&(d=new Set,i.set(t,d));d.has(a)||(Ed=!0,d.add(a),e=Gx.bind(null,e,t,a),t.then(e,e))}function Gx(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Nt===e&&(at&a)===a&&(Mt===4||Mt===3&&(at&62914560)===at&&300>ge()-Ld?(mt&2)===0&&Ml(e,0):Od|=a,Cl===at&&(Cl=0)),sa(e)}function hg(e,t){t===0&&(t=Aa()),e=fl(e,t),e!==null&&(pn(e,t),sa(e))}function $x(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),hg(e,a)}function Yx(e,t){var a=0;switch(e.tag){case 13:var i=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),hg(e,a)}function Fx(e,t){return ae(e,t)}var vo=null,Ol=null,Ud=!1,wo=!1,Gd=!1,Br=0;function sa(e){e!==Ol&&e.next===null&&(Ol===null?vo=Ol=e:Ol=Ol.next=e),wo=!0,Ud||(Ud=!0,Qx())}function qs(e,t){if(!Gd&&wo){Gd=!0;do for(var a=!1,i=vo;i!==null;){if(e!==0){var d=i.pendingLanes;if(d===0)var f=0;else{var y=i.suspendedLanes,k=i.pingedLanes;f=(1<<31-vt(42|e)+1)-1,f&=d&~(y&~k),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,yg(i,f))}else f=at,f=Ca(i,i===Nt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(f&3)===0||mr(i,f)||(a=!0,yg(i,f));i=i.next}while(a);Gd=!1}}function Vx(){bg()}function bg(){wo=Ud=!1;var e=0;Br!==0&&(ny()&&(e=Br),Br=0);for(var t=ge(),a=null,i=vo;i!==null;){var d=i.next,f=pg(i,t);f===0?(i.next=null,a===null?vo=d:a.next=d,d===null&&(Ol=a)):(a=i,(e!==0||(f&3)!==0)&&(wo=!0)),i=d}qs(e)}function pg(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-vt(f),k=1<<y,M=d[y];M===-1?((k&a)===0||(k&i)!==0)&&(d[y]=gr(k,t)):M<=t&&(e.expiredLanes|=k),f&=~k}if(t=Nt,a=at,a=Ca(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(gt===2||gt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&be(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||mr(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&be(i),Zl(a)){case 2:case 8:a=ne;break;case 32:a=le;break;case 268435456:a=Y;break;default:a=le}return i=xg.bind(null,e),a=ae(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&be(i),e.callbackPriority=2,e.callbackNode=null,2}function xg(e,t){if(Kt!==0&&Kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(yo()&&e.callbackNode!==a)return null;var i=at;return i=Ca(e,e===Nt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(eg(e,i,t),pg(e,ge()),e.callbackNode!=null&&e.callbackNode===a?xg.bind(null,e):null)}function yg(e,t){if(yo())return null;eg(e,t,!0)}function Qx(){ry(function(){(mt&6)!==0?ae(tn,Vx):bg()})}function $d(){return Br===0&&(Br=fn()),Br}function vg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:tl(""+e)}function wg(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Xx(e,t,a,i,d){if(t==="submit"&&a&&a.stateNode===d){var f=vg((d[Ut]||null).action),y=i.submitter;y&&(t=(t=y[Ut]||null)?vg(t.formAction):y.getAttribute("formAction"),t!==null&&(f=t,y=null));var k=new sl("action","action",null,i,d);e.push({event:k,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Br!==0){var M=y?wg(d,y):new FormData(d);dd(a,{pending:!0,data:M,method:d.method,action:f},null,M)}}else typeof f=="function"&&(k.preventDefault(),M=y?wg(d,y):new FormData(d),dd(a,{pending:!0,data:M,method:d.method,action:f},f,M))},currentTarget:d}]})}}for(var Yd=0;Yd<Tc.length;Yd++){var Fd=Tc[Yd],Zx=Fd.toLowerCase(),Wx=Fd[0].toUpperCase()+Fd.slice(1);Xn(Zx,"on"+Wx)}Xn(em,"onAnimationEnd"),Xn(tm,"onAnimationIteration"),Xn(nm,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(gx,"onTransitionRun"),Xn(hx,"onTransitionStart"),Xn(bx,"onTransitionCancel"),Xn(am,"onTransitionEnd"),Ea("onMouseEnter",["mouseout","mouseover"]),Ea("onMouseLeave",["mouseout","mouseover"]),Ea("onPointerEnter",["pointerout","pointerover"]),Ea("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Us));function Ng(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],d=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var y=i.length-1;0<=y;y--){var k=i[y],M=k.instance,G=k.currentTarget;if(k=k.listener,M!==f&&d.isPropagationStopped())break e;f=k,d.currentTarget=G;try{f(d)}catch(J){io(J)}d.currentTarget=null,f=M}else for(y=0;y<i.length;y++){if(k=i[y],M=k.instance,G=k.currentTarget,k=k.listener,M!==f&&d.isPropagationStopped())break e;f=k,d.currentTarget=G;try{f(d)}catch(J){io(J)}d.currentTarget=null,f=M}}}}function et(e,t){var a=t[Fn];a===void 0&&(a=t[Fn]=new Set);var i=e+"__bubble";a.has(i)||(kg(t,e,2,!1),a.add(i))}function Vd(e,t,a){var i=0;t&&(i|=4),kg(a,e,i,t)}var No="_reactListening"+Math.random().toString(36).slice(2);function Qd(e){if(!e[No]){e[No]=!0,Ni.forEach(function(a){a!=="selectionchange"&&(Kx.has(a)||Vd(a,!1,e),Vd(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[No]||(t[No]=!0,Vd("selectionchange",!1,t))}}function kg(e,t,a,i){switch(Vg(t)){case 2:var d=Sy;break;case 8:d=Dy;break;default:d=ou}a=d.bind(null,t,a,e),d=void 0,!ss||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),i?d!==void 0?e.addEventListener(t,a,{capture:!0,passive:d}):e.addEventListener(t,a,!0):d!==void 0?e.addEventListener(t,a,{passive:d}):e.addEventListener(t,a,!1)}function Xd(e,t,a,i,d){var f=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var y=i.tag;if(y===3||y===4){var k=i.stateNode.containerInfo;if(k===d)break;if(y===4)for(y=i.return;y!==null;){var M=y.tag;if((M===3||M===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;k!==null;){if(y=ea(k),y===null)return;if(M=y.tag,M===5||M===6||M===26||M===27){i=f=y;continue e}k=k.parentNode}}i=i.return}Li(function(){var G=f,J=al(a),re=[];e:{var V=rm.get(e);if(V!==void 0){var Q=sl,Ge=e;switch(e){case"keypress":if(da(a)===0)break e;case"keydown":case"keyup":Q=Fp;break;case"focusin":Ge="focus",Q=fe;break;case"focusout":Ge="blur",Q=fe;break;case"beforeblur":case"afterblur":Q=fe;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=C;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=z;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Xp;break;case em:case tm:case nm:Q=je;break;case am:Q=Wp;break;case"scroll":case"scrollend":Q=wc;break;case"wheel":Q=Jp;break;case"copy":case"cut":case"paste":Q=ot;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Pf;break;case"toggle":case"beforetoggle":Q=tx}var ze=(t&4)!==0,yt=!ze&&(e==="scroll"||e==="scrollend"),H=ze?V!==null?V+"Capture":null:V;ze=[];for(var P=G,U;P!==null;){var ee=P;if(U=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||U===null||H===null||(ee=Ba(P,H),ee!=null&&ze.push(Gs(P,ee,U))),yt)break;P=P.return}0<ze.length&&(V=new Q(V,Ge,null,a,J),re.push({event:V,listeners:ze}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",V&&a!==nl&&(Ge=a.relatedTarget||a.fromElement)&&(ea(Ge)||Ge[Ot]))break e;if((Q||V)&&(V=J.window===J?J:(V=J.ownerDocument)?V.defaultView||V.parentWindow:window,Q?(Ge=a.relatedTarget||a.toElement,Q=G,Ge=Ge?ea(Ge):null,Ge!==null&&(yt=u(Ge),ze=Ge.tag,Ge!==yt||ze!==5&&ze!==27&&ze!==6)&&(Ge=null)):(Q=null,Ge=G),Q!==Ge)){if(ze=C,ee="onMouseLeave",H="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(ze=Pf,ee="onPointerLeave",H="onPointerEnter",P="pointer"),yt=Q==null?V:bt(Q),U=Ge==null?V:bt(Ge),V=new ze(ee,P+"leave",Q,a,J),V.target=yt,V.relatedTarget=U,ee=null,ea(J)===G&&(ze=new ze(H,P+"enter",Ge,a,J),ze.target=U,ze.relatedTarget=yt,ee=ze),yt=ee,Q&&Ge)t:{for(ze=Q,H=Ge,P=0,U=ze;U;U=Rl(U))P++;for(U=0,ee=H;ee;ee=Rl(ee))U++;for(;0<P-U;)ze=Rl(ze),P--;for(;0<U-P;)H=Rl(H),U--;for(;P--;){if(ze===H||H!==null&&ze===H.alternate)break t;ze=Rl(ze),H=Rl(H)}ze=null}else ze=null;Q!==null&&jg(re,V,Q,ze,!1),Ge!==null&&yt!==null&&jg(re,yt,Ge,ze,!0)}}e:{if(V=G?bt(G):window,Q=V.nodeName&&V.nodeName.toLowerCase(),Q==="select"||Q==="input"&&V.type==="file")var Ce=Gf;else if(qf(V))if($f)Ce=ux;else{Ce=cx;var Ke=ox}else Q=V.nodeName,!Q||Q.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?G&&ns(G.elementType)&&(Ce=Gf):Ce=dx;if(Ce&&(Ce=Ce(e,G))){Uf(re,Ce,a,J);break e}Ke&&Ke(e,V,G),e==="focusout"&&G&&V.type==="number"&&G.memoizedProps.value!=null&&ts(V,"number",V.value)}switch(Ke=G?bt(G):window,e){case"focusin":(qf(Ke)||Ke.contentEditable==="true")&&(cl=Ke,Dc=G,hs=null);break;case"focusout":hs=Dc=cl=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,Kf(re,a,J);break;case"selectionchange":if(mx)break;case"keydown":case"keyup":Kf(re,a,J)}var Le;if(Nc)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ol?If(e,a)&&(He="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Bf&&a.locale!=="ko"&&(ol||He!=="onCompositionStart"?He==="onCompositionEnd"&&ol&&(Le=Pi()):(Vn=J,is="value"in Vn?Vn.value:Vn.textContent,ol=!0)),Ke=ko(G,He),0<Ke.length&&(He=new Rt(He,e,null,a,J),re.push({event:He,listeners:Ke}),Le?He.data=Le:(Le=Hf(a),Le!==null&&(He.data=Le)))),(Le=ax?rx(e,a):lx(e,a))&&(He=ko(G,"onBeforeInput"),0<He.length&&(Ke=new Rt("onBeforeInput","beforeinput",null,a,J),re.push({event:Ke,listeners:He}),Ke.data=Le)),Xx(re,e,G,a,J)}Ng(re,t)})}function Gs(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ko(e,t){for(var a=t+"Capture",i=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Ba(e,a),d!=null&&i.unshift(Gs(e,d,f)),d=Ba(e,t),d!=null&&i.push(Gs(e,d,f))),e.tag===3)return i;e=e.return}return[]}function Rl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jg(e,t,a,i,d){for(var f=t._reactName,y=[];a!==null&&a!==i;){var k=a,M=k.alternate,G=k.stateNode;if(k=k.tag,M!==null&&M===i)break;k!==5&&k!==26&&k!==27||G===null||(M=G,d?(G=Ba(a,f),G!=null&&y.unshift(Gs(a,G,M))):d||(G=Ba(a,f),G!=null&&y.push(Gs(a,G,M)))),a=a.return}y.length!==0&&e.push({event:t,listeners:y})}var Jx=/\r\n?/g,ey=/\u0000|\uFFFD/g;function Sg(e){return(typeof e=="string"?e:""+e).replace(Jx,`
`).replace(ey,"")}function Dg(e,t){return t=Sg(t),Sg(e)===t}function jo(){}function xt(e,t,a,i,d,f){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Ra(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Ra(e,""+i);break;case"className":Xr(e,"class",i);break;case"tabIndex":Xr(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(e,a,i);break;case"style":Ri(e,i,f);break;case"data":if(t!=="object"){Xr(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=tl(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&xt(e,t,"name",d.name,d,null),xt(e,t,"formEncType",d.formEncType,d,null),xt(e,t,"formMethod",d.formMethod,d,null),xt(e,t,"formTarget",d.formTarget,d,null)):(xt(e,t,"encType",d.encType,d,null),xt(e,t,"method",d.method,d,null),xt(e,t,"target",d.target,d,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=tl(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=jo);break;case"onScroll":i!=null&&et("scroll",e);break;case"onScrollEnd":i!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=tl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":et("beforetoggle",e),et("toggle",e),Qr(e,"popover",i);break;case"xlinkActuate":xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":xn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":xn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":xn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":xn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Qr(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=as.get(a)||a,Qr(e,a,i))}}function Zd(e,t,a,i,d,f){switch(a){case"style":Ri(e,i,f);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof i=="string"?Ra(e,i):(typeof i=="number"||typeof i=="bigint")&&Ra(e,""+i);break;case"onScroll":i!=null&&et("scroll",e);break;case"onScrollEnd":i!=null&&et("scrollend",e);break;case"onClick":i!=null&&(e.onclick=jo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ki.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),t=a.slice(2,d?a.length-7:void 0),f=e[Ut]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof i=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,d);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Qr(e,a,i)}}}function Jt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var i=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var y=a[f];if(y!=null)switch(f){case"src":i=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:xt(e,t,f,y,a,null)}}d&&xt(e,t,"srcSet",a.srcSet,a,null),i&&xt(e,t,"src",a.src,a,null);return;case"input":et("invalid",e);var k=f=y=d=null,M=null,G=null;for(i in a)if(a.hasOwnProperty(i)){var J=a[i];if(J!=null)switch(i){case"name":d=J;break;case"type":y=J;break;case"checked":M=J;break;case"defaultChecked":G=J;break;case"value":f=J;break;case"defaultValue":k=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,t));break;default:xt(e,t,i,J,a,null)}}Ti(e,f,k,M,G,y,d,!1),xr(e);return;case"select":et("invalid",e),i=y=f=null;for(d in a)if(a.hasOwnProperty(d)&&(k=a[d],k!=null))switch(d){case"value":f=k;break;case"defaultValue":y=k;break;case"multiple":i=k;default:xt(e,t,d,k,a,null)}t=f,a=y,e.multiple=!!i,t!=null?Oa(e,!!i,t,!1):a!=null&&Oa(e,!!i,a,!0);return;case"textarea":et("invalid",e),f=d=i=null;for(y in a)if(a.hasOwnProperty(y)&&(k=a[y],k!=null))switch(y){case"value":i=k;break;case"defaultValue":d=k;break;case"children":f=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:xt(e,t,y,k,a,null)}Ei(e,i,d,f),xr(e);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(i=a[M],i!=null))switch(M){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:xt(e,t,M,i,a,null)}return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(i=0;i<Us.length;i++)et(Us[i],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(i=a[G],i!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:xt(e,t,G,i,a,null)}return;default:if(ns(t)){for(J in a)a.hasOwnProperty(J)&&(i=a[J],i!==void 0&&Zd(e,t,J,i,a,void 0));return}}for(k in a)a.hasOwnProperty(k)&&(i=a[k],i!=null&&xt(e,t,k,i,a,null))}function ty(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,y=null,k=null,M=null,G=null,J=null;for(Q in a){var re=a[Q];if(a.hasOwnProperty(Q)&&re!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":M=re;default:i.hasOwnProperty(Q)||xt(e,t,Q,null,i,re)}}for(var V in i){var Q=i[V];if(re=a[V],i.hasOwnProperty(V)&&(Q!=null||re!=null))switch(V){case"type":f=Q;break;case"name":d=Q;break;case"checked":G=Q;break;case"defaultChecked":J=Q;break;case"value":y=Q;break;case"defaultValue":k=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,t));break;default:Q!==re&&xt(e,t,V,Q,i,re)}}el(e,y,k,M,G,J,f,d);return;case"select":Q=y=k=V=null;for(f in a)if(M=a[f],a.hasOwnProperty(f)&&M!=null)switch(f){case"value":break;case"multiple":Q=M;default:i.hasOwnProperty(f)||xt(e,t,f,null,i,M)}for(d in i)if(f=i[d],M=a[d],i.hasOwnProperty(d)&&(f!=null||M!=null))switch(d){case"value":V=f;break;case"defaultValue":k=f;break;case"multiple":y=f;default:f!==M&&xt(e,t,d,f,i,M)}t=k,a=y,i=Q,V!=null?Oa(e,!!a,V,!1):!!i!=!!a&&(t!=null?Oa(e,!!a,t,!0):Oa(e,!!a,a?[]:"",!1));return;case"textarea":Q=V=null;for(k in a)if(d=a[k],a.hasOwnProperty(k)&&d!=null&&!i.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:xt(e,t,k,null,i,d)}for(y in i)if(d=i[y],f=a[y],i.hasOwnProperty(y)&&(d!=null||f!=null))switch(y){case"value":V=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==f&&xt(e,t,y,d,i,f)}Mi(e,V,Q);return;case"option":for(var Ge in a)if(V=a[Ge],a.hasOwnProperty(Ge)&&V!=null&&!i.hasOwnProperty(Ge))switch(Ge){case"selected":e.selected=!1;break;default:xt(e,t,Ge,null,i,V)}for(M in i)if(V=i[M],Q=a[M],i.hasOwnProperty(M)&&V!==Q&&(V!=null||Q!=null))switch(M){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:xt(e,t,M,V,i,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in a)V=a[ze],a.hasOwnProperty(ze)&&V!=null&&!i.hasOwnProperty(ze)&&xt(e,t,ze,null,i,V);for(G in i)if(V=i[G],Q=a[G],i.hasOwnProperty(G)&&V!==Q&&(V!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:xt(e,t,G,V,i,Q)}return;default:if(ns(t)){for(var yt in a)V=a[yt],a.hasOwnProperty(yt)&&V!==void 0&&!i.hasOwnProperty(yt)&&Zd(e,t,yt,void 0,i,V);for(J in i)V=i[J],Q=a[J],!i.hasOwnProperty(J)||V===Q||V===void 0&&Q===void 0||Zd(e,t,J,V,i,Q);return}}for(var H in a)V=a[H],a.hasOwnProperty(H)&&V!=null&&!i.hasOwnProperty(H)&&xt(e,t,H,null,i,V);for(re in i)V=i[re],Q=a[re],!i.hasOwnProperty(re)||V===Q||V==null&&Q==null||xt(e,t,re,V,i,Q)}var Wd=null,Kd=null;function So(e){return e.nodeType===9?e:e.ownerDocument}function Cg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ag(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Jd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eu=null;function ny(){var e=window.event;return e&&e.type==="popstate"?e===eu?!1:(eu=e,!0):(eu=null,!1)}var Tg=typeof setTimeout=="function"?setTimeout:void 0,ay=typeof clearTimeout=="function"?clearTimeout:void 0,Mg=typeof Promise=="function"?Promise:void 0,ry=typeof queueMicrotask=="function"?queueMicrotask:typeof Mg<"u"?function(e){return Mg.resolve(null).then(e).catch(ly)}:Tg;function ly(e){setTimeout(function(){throw e})}function Ja(e){return e==="head"}function Eg(e,t){var a=t,i=0,d=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<i&&8>i){a=i;var y=e.ownerDocument;if(a&1&&$s(y.documentElement),a&2&&$s(y.body),a&4)for(a=y.head,$s(a),y=a.firstChild;y;){var k=y.nextSibling,M=y.nodeName;y[pr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=k}}if(d===0){e.removeChild(f),Ks(t);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:i=a.charCodeAt(0)-48;else i=0;a=f}while(a);Ks(t)}function tu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tu(a),Kl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function sy(e,t,a,i){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[pr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Wn(e.nextSibling),e===null)break}return null}function iy(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Wn(e.nextSibling),e===null))return null;return e}function nu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function oy(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var au=null;function Og(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Rg(e,t,a){switch(t=So(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function $s(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Kl(e)}var In=new Map,Lg=new Set;function Do(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ja=W.d;W.d={f:cy,r:dy,D:uy,C:fy,L:my,m:gy,X:by,S:hy,M:py};function cy(){var e=ja.f(),t=po();return e||t}function dy(e){var t=ta(e);t!==null&&t.tag===5&&t.type==="form"?e0(t):ja.r(e)}var Ll=typeof document>"u"?null:document;function Pg(e,t,a){var i=Ll;if(i&&typeof t=="string"&&t){var d=mn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Lg.has(d)||(Lg.add(d),e={rel:e,crossOrigin:a,href:t},i.querySelector(d)===null&&(t=i.createElement("link"),Jt(t,"link",e),Oe(t),i.head.appendChild(t)))}}function uy(e){ja.D(e),Pg("dns-prefetch",e,null)}function fy(e,t){ja.C(e,t),Pg("preconnect",e,t)}function my(e,t,a){ja.L(e,t,a);var i=Ll;if(i&&e&&t){var d='link[rel="preload"][as="'+mn(t)+'"]';t==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+mn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+mn(a.imageSizes)+'"]')):d+='[href="'+mn(e)+'"]';var f=d;switch(t){case"style":f=Pl(e);break;case"script":f=Bl(e)}In.has(f)||(e=p({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),In.set(f,e),i.querySelector(d)!==null||t==="style"&&i.querySelector(Ys(f))||t==="script"&&i.querySelector(Fs(f))||(t=i.createElement("link"),Jt(t,"link",e),Oe(t),i.head.appendChild(t)))}}function gy(e,t){ja.m(e,t);var a=Ll;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+mn(i)+'"][href="'+mn(e)+'"]',f=d;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Bl(e)}if(!In.has(f)&&(e=p({rel:"modulepreload",href:e},t),In.set(f,e),a.querySelector(d)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fs(f)))return}i=a.createElement("link"),Jt(i,"link",e),Oe(i),a.head.appendChild(i)}}}function hy(e,t,a){ja.S(e,t,a);var i=Ll;if(i&&e){var d=Ma(i).hoistableStyles,f=Pl(e);t=t||"default";var y=d.get(f);if(!y){var k={loading:0,preload:null};if(y=i.querySelector(Ys(f)))k.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},a),(a=In.get(f))&&ru(e,a);var M=y=i.createElement("link");Oe(M),Jt(M,"link",e),M._p=new Promise(function(G,J){M.onload=G,M.onerror=J}),M.addEventListener("load",function(){k.loading|=1}),M.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Co(y,t,i)}y={type:"stylesheet",instance:y,count:1,state:k},d.set(f,y)}}}function by(e,t){ja.X(e,t);var a=Ll;if(a&&e){var i=Ma(a).hoistableScripts,d=Bl(e),f=i.get(d);f||(f=a.querySelector(Fs(d)),f||(e=p({src:e,async:!0},t),(t=In.get(d))&&lu(e,t),f=a.createElement("script"),Oe(f),Jt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(d,f))}}function py(e,t){ja.M(e,t);var a=Ll;if(a&&e){var i=Ma(a).hoistableScripts,d=Bl(e),f=i.get(d);f||(f=a.querySelector(Fs(d)),f||(e=p({src:e,async:!0,type:"module"},t),(t=In.get(d))&&lu(e,t),f=a.createElement("script"),Oe(f),Jt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(d,f))}}function Bg(e,t,a,i){var d=(d=we.current)?Do(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Pl(a.href),a=Ma(d).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Pl(a.href);var f=Ma(d).hoistableStyles,y=f.get(e);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=d.querySelector(Ys(e)))&&!f._p&&(y.instance=f,y.state.loading=5),In.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},In.set(e,a),f||xy(d,e,a,y.state))),t&&i===null)throw Error(o(528,""));return y}if(t&&i!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Bl(a),a=Ma(d).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Pl(e){return'href="'+mn(e)+'"'}function Ys(e){return'link[rel="stylesheet"]['+e+"]"}function _g(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function xy(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Jt(t,"link",a),Oe(t),e.head.appendChild(t))}function Bl(e){return'[src="'+mn(e)+'"]'}function Fs(e){return"script[async]"+e}function zg(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+mn(a.href)+'"]');if(i)return t.instance=i,Oe(i),i;var d=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Oe(i),Jt(i,"style",d),Co(i,a.precedence,e),t.instance=i;case"stylesheet":d=Pl(a.href);var f=e.querySelector(Ys(d));if(f)return t.state.loading|=4,t.instance=f,Oe(f),f;i=_g(a),(d=In.get(d))&&ru(i,d),f=(e.ownerDocument||e).createElement("link"),Oe(f);var y=f;return y._p=new Promise(function(k,M){y.onload=k,y.onerror=M}),Jt(f,"link",i),t.state.loading|=4,Co(f,a.precedence,e),t.instance=f;case"script":return f=Bl(a.src),(d=e.querySelector(Fs(f)))?(t.instance=d,Oe(d),d):(i=a,(d=In.get(f))&&(i=p({},a),lu(i,d)),e=e.ownerDocument||e,d=e.createElement("script"),Oe(d),Jt(d,"link",i),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Co(i,a.precedence,e));return t.instance}function Co(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=i.length?i[i.length-1]:null,f=d,y=0;y<i.length;y++){var k=i[y];if(k.dataset.precedence===t)f=k;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function ru(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ao=null;function Ig(e,t,a){if(Ao===null){var i=new Map,d=Ao=new Map;d.set(a,i)}else d=Ao,i=d.get(a),i||(i=new Map,d.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var f=a[d];if(!(f[pr]||f[zt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(t)||"";y=e+y;var k=i.get(y);k?k.push(f):i.set(y,[f])}}return i}function Hg(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function yy(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function qg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Vs=null;function vy(){}function wy(e,t,a){if(Vs===null)throw Error(o(475));var i=Vs;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var d=Pl(a.href),f=e.querySelector(Ys(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=To.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=f,Oe(f);return}f=e.ownerDocument||e,a=_g(a),(d=In.get(d))&&ru(a,d),f=f.createElement("link"),Oe(f);var y=f;y._p=new Promise(function(k,M){y.onload=k,y.onerror=M}),Jt(f,"link",a),t.instance=f}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(i.count++,t=To.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ny(){if(Vs===null)throw Error(o(475));var e=Vs;return e.stylesheets&&e.count===0&&su(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&su(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function To(){if(this.count--,this.count===0){if(this.stylesheets)su(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mo=null;function su(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mo=new Map,t.forEach(ky,e),Mo=null,To.call(e))}function ky(e,t){if(!(t.state.loading&4)){var a=Mo.get(e);if(a)var i=a.get(null);else{a=new Map,Mo.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var y=d[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),i=y)}i&&a.set(null,i)}d=t.instance,y=d.getAttribute("data-precedence"),f=a.get(y)||i,f===i&&a.set(null,d),a.set(y,d),this.count++,i=To.bind(this),d.addEventListener("load",i),d.addEventListener("error",i),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Qs={$$typeof:I,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function jy(e,t,a,i,d,f,y,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hr(0),this.hiddenUpdates=hr(null),this.identifierPrefix=i,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Ug(e,t,a,i,d,f,y,k,M,G,J,re){return e=new jy(e,t,a,y,k,M,G,re),t=1,f===!0&&(t|=24),f=wn(3,null,null,t),e.current=f,f.stateNode=e,t=qc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:i,isDehydrated:a,cache:t},Yc(f),e}function Gg(e){return e?(e=ml,e):ml}function $g(e,t,a,i,d,f){d=Gg(d),i.context===null?i.context=d:i.pendingContext=d,i=Ha(t),i.payload={element:a},f=f===void 0?null:f,f!==null&&(i.callback=f),a=qa(e,i,t),a!==null&&(Dn(a,e,t),js(a,e,t))}function Yg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function iu(e,t){Yg(e,t),(e=e.alternate)&&Yg(e,t)}function Fg(e){if(e.tag===13){var t=fl(e,67108864);t!==null&&Dn(t,e,67108864),iu(e,67108864)}}var Eo=!0;function Sy(e,t,a,i){var d=E.T;E.T=null;var f=W.p;try{W.p=2,ou(e,t,a,i)}finally{W.p=f,E.T=d}}function Dy(e,t,a,i){var d=E.T;E.T=null;var f=W.p;try{W.p=8,ou(e,t,a,i)}finally{W.p=f,E.T=d}}function ou(e,t,a,i){if(Eo){var d=cu(i);if(d===null)Xd(e,t,i,Oo,a),Qg(e,i);else if(Ay(d,e,t,a,i))i.stopPropagation();else if(Qg(e,i),t&4&&-1<Cy.indexOf(e)){for(;d!==null;){var f=ta(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=Mn(f.pendingLanes);if(y!==0){var k=f;for(k.pendingLanes|=2,k.entangledLanes|=2;y;){var M=1<<31-vt(y);k.entanglements[1]|=M,y&=~M}sa(f),(mt&6)===0&&(ho=ge()+500,qs(0))}}break;case 13:k=fl(f,2),k!==null&&Dn(k,f,2),po(),iu(f,2)}if(f=cu(i),f===null&&Xd(e,t,i,Oo,a),f===d)break;d=f}d!==null&&i.stopPropagation()}else Xd(e,t,i,null,a)}}function cu(e){return e=al(e),du(e)}var Oo=null;function du(e){if(Oo=null,e=ea(e),e!==null){var t=u(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Oo=e,null}function Vg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tt()){case tn:return 2;case ne:return 8;case le:case ve:return 32;case Y:return 268435456;default:return 32}default:return 32}}var uu=!1,er=null,tr=null,nr=null,Xs=new Map,Zs=new Map,ar=[],Cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qg(e,t){switch(e){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function Ws(e,t,a,i,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:f,targetContainers:[d]},t!==null&&(t=ta(t),t!==null&&Fg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Ay(e,t,a,i,d){switch(t){case"focusin":return er=Ws(er,e,t,a,i,d),!0;case"dragenter":return tr=Ws(tr,e,t,a,i,d),!0;case"mouseover":return nr=Ws(nr,e,t,a,i,d),!0;case"pointerover":var f=d.pointerId;return Xs.set(f,Ws(Xs.get(f)||null,e,t,a,i,d)),!0;case"gotpointercapture":return f=d.pointerId,Zs.set(f,Ws(Zs.get(f)||null,e,t,a,i,d)),!0}return!1}function Xg(e){var t=ea(e.target);if(t!==null){var a=u(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,vi(e.priority,function(){if(a.tag===13){var i=Sn();i=br(i);var d=fl(a,i);d!==null&&Dn(d,a,i),iu(a,i)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ro(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=cu(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);nl=i,a.target.dispatchEvent(i),nl=null}else return t=ta(a),t!==null&&Fg(t),e.blockedOn=a,!1;t.shift()}return!0}function Zg(e,t,a){Ro(e)&&a.delete(t)}function Ty(){uu=!1,er!==null&&Ro(er)&&(er=null),tr!==null&&Ro(tr)&&(tr=null),nr!==null&&Ro(nr)&&(nr=null),Xs.forEach(Zg),Zs.forEach(Zg)}function Lo(e,t){e.blockedOn===t&&(e.blockedOn=null,uu||(uu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ty)))}var Po=null;function Wg(e){Po!==e&&(Po=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Po===e&&(Po=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],d=e[t+2];if(typeof i!="function"){if(du(i||a)===null)continue;break}var f=ta(a);f!==null&&(e.splice(t,3),t-=3,dd(f,{pending:!0,data:d,method:a.method,action:i},i,d))}}))}function Ks(e){function t(M){return Lo(M,e)}er!==null&&Lo(er,e),tr!==null&&Lo(tr,e),nr!==null&&Lo(nr,e),Xs.forEach(t),Zs.forEach(t);for(var a=0;a<ar.length;a++){var i=ar[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ar.length&&(a=ar[0],a.blockedOn===null);)Xg(a),a.blockedOn===null&&ar.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var d=a[i],f=a[i+1],y=d[Ut]||null;if(typeof f=="function")y||Wg(a);else if(y){var k=null;if(f&&f.hasAttribute("formAction")){if(d=f,y=f[Ut]||null)k=y.formAction;else if(du(d)!==null)continue}else k=y.action;typeof k=="function"?a[i+1]=k:(a.splice(i,3),i-=3),Wg(a)}}}function fu(e){this._internalRoot=e}Bo.prototype.render=fu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,i=Sn();$g(a,i,e,t,null,null)},Bo.prototype.unmount=fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$g(e.current,2,null,e,null,null),po(),t[Ot]=null}};function Bo(e){this._internalRoot=e}Bo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vr();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ar.length&&t!==0&&t<ar[a].priority;a++);ar.splice(a,0,e),a===0&&Xg(e)}};var Kg=s.version;if(Kg!=="19.1.0")throw Error(o(527,Kg,"19.1.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=h(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var My={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{We=_o.inject(My),it=_o}catch{}}return ei.createRoot=function(e,t){if(!c(e))throw Error(o(299));var a=!1,i="",d=g0,f=h0,y=b0,k=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(y=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(k=t.unstable_transitionCallbacks)),t=Ug(e,1,!1,null,null,a,i,d,f,y,k,null),e[Ot]=t.current,Qd(e),new fu(t)},ei.hydrateRoot=function(e,t,a){if(!c(e))throw Error(o(299));var i=!1,d="",f=g0,y=h0,k=b0,M=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(k=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),t=Ug(e,1,!0,t,a??null,i,d,f,y,k,M,G),t.context=Gg(null),a=t.current,i=Sn(),i=br(i),d=Ha(i),d.callback=null,qa(a,d,i),a=i,t.current.lanes=a,pn(t,a),sa(t),e[Ot]=t.current,Qd(e),new Bo(t)},ei.version="19.1.0",ei}var oh;function qy(){if(oh)return hu.exports;oh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),hu.exports=Hy(),hu.exports}var Uy=qy();const Gy=Qu(Uy),$y=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Yy=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Fy=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),Vy=({message:n,type:s,onClose:r})=>{w.useEffect(()=>{const u=setTimeout(()=>{r()},5e3);return()=>clearTimeout(u)},[r]);const c={success:{bg:"bg-green-500",icon:l.jsx($y,{className:"h-8 w-8 text-white"})},error:{bg:"bg-red-500",icon:l.jsx(Yy,{className:"h-8 w-8 text-white"})},info:{bg:"bg-blue-500",icon:l.jsx(Fy,{className:"h-8 w-8 text-white"})}}[s];return l.jsxs("div",{className:`max-w-lg w-full ${c.bg} shadow-2xl rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5 animate-fade-in-right`,children:[l.jsx("div",{className:"flex-1 p-5",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:c.icon}),l.jsx("div",{className:"ml-4",children:l.jsx("p",{className:"text-lg font-bold text-white",children:n})})]})}),l.jsx("div",{className:"flex border-l border-white/20",children:l.jsx("button",{onClick:r,className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-white hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-white",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})},sb=w.createContext(void 0),Qy=({children:n})=>{const[s,r]=w.useState([]),o=w.useCallback((u,m="success")=>{const b=Date.now();r(h=>[...h,{id:b,message:u,type:m}])},[]),c=w.useCallback(u=>{r(m=>m.filter(b=>b.id!==u))},[]);return l.jsxs(sb.Provider,{value:{showNotification:o},children:[n,l.jsx("div",{className:"fixed top-5 right-5 z-[100] space-y-3",children:s.map(u=>l.jsx(Vy,{message:u.message,type:u.type,onClose:()=>c(u.id)},u.id))})]})},Xy=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),Zy=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),Wy=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),Ky=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"})}),Jy=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})}),ev=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"})}),tv=n=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),ib=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Gn=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),Sa=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),nv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),av=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})}),Yo=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 9v6m3-3H9"})}),Fo=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15A2.25 2.25 0 0 0 2.25 6.75v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),Xu=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})}),Ur=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})}),rv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),lv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})}),sv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9V4.5M15 9h4.5M15 9l5.25-5.25M15 15v4.5M15 15h4.5M15 15l5.25 5.25"})}),iv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Zu=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),ci=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),ob=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),cb=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}),ov=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:l.jsx("path",{fillRule:"evenodd",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z",clipRule:"evenodd"})}),cv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:l.jsx("path",{fillRule:"evenodd",d:"M12 1.5a4.5 4.5 0 00-4.5 4.5v1.5H6a3 3 0 00-3 3v6a3 3 0 003 3h12a3 3 0 003-3v-6a3 3 0 00-3-3h-1.5V6a4.5 4.5 0 00-4.5-4.5zm-3 5.25v-1.5a3 3 0 116 0v1.5H9z",clipRule:"evenodd"})}),dv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178zM15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),uv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L6.228 6.228"})}),fv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"})}),mv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),db=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})}),gv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})}),hv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})}),bv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 4.5l7.5 7.5-7.5 7.5m6-15l7.5 7.5-7.5 7.5"})}),pv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m-3 0l-3-3m0 0l3-3m-3 3h12"})}),ub=n=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-6",...n,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),xv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),yv=n=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})}),vv=({currentView:n,setCurrentView:s,isCollapsed:r,toggleCollapse:o,currentUser:c,onLogout:u,isMobileSidebarOpen:m,setIsMobileSidebarOpen:b})=>{const{appSettings:h,sortedNavItems:g}=Dt(),p=g.filter(N=>c.permissions.includes(N.view)),v=N=>{s(N),b(!1)},x=r&&!m;return l.jsxs("aside",{className:`bg-white dark:bg-dark-card shadow-lg flex flex-col fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 lg:shadow-md lg:transition-all ${m?"translate-x-0":"-translate-x-full"} ${x?"lg:w-20":"w-64"}`,children:[l.jsxs("div",{className:`p-4 border-b border-gray-200 dark:border-dark-border flex items-center ${x?"justify-center":"justify-between"}`,children:[!x&&h.appLogo&&l.jsx("div",{className:"flex-grow flex items-center gap-3 overflow-hidden",children:l.jsx("img",{src:h.appLogo,alt:"Clinic Logo",className:"h-10 w-10 rounded-md object-cover flex-shrink-0"})}),x&&h.appLogo&&l.jsx("img",{src:h.appLogo,alt:"Clinic Logo",className:"h-10 w-10 rounded-md object-cover flex-shrink-0"}),l.jsx("button",{onClick:o,className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 hidden lg:block",children:r?l.jsx(bv,{className:"h-6 w-6"}):l.jsx(hv,{className:"h-6 w-6"})})]}),l.jsx("div",{className:"flex-grow overflow-y-auto",children:l.jsx("nav",{className:"p-2",children:l.jsx("ul",{children:p.map(N=>{const D=N.icon;return l.jsx("li",{children:l.jsxs("button",{onClick:()=>v(N.view),title:x?N.label:void 0,className:`w-full flex items-center p-3 my-1 rounded-lg transition-all duration-200 ease-in-out transform hover:-translate-y-px hover:shadow-md ${x?"justify-center":""} ${n===N.view?"bg-brand-blue text-white shadow":"text-medium-text dark:text-dark-text-secondary hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[l.jsx(D,{className:"h-6 w-6"}),!x&&l.jsx("span",{className:"font-medium ml-3",children:N.label})]})},N.view)})})})}),l.jsxs("div",{className:"flex-shrink-0 p-2 border-t border-gray-200 dark:border-dark-border",children:[l.jsx("div",{className:`p-3 mb-2 rounded-lg ${x?"":"bg-gray-50 dark:bg-gray-700/50"}`,children:l.jsxs("div",{className:`${x?"justify-center":""} flex items-center`,children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-blue text-white flex items-center justify-center font-bold text-lg flex-shrink-0",children:c.username.charAt(0).toUpperCase()}),!x&&l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:c.username}),l.jsx("p",{className:"text-sm text-light-text dark:text-dark-text-secondary",children:"User"})]})]})}),l.jsxs("button",{onClick:u,className:`w-full flex items-center p-3 my-1 rounded-lg transition-all duration-200 ease-in-out transform hover:-translate-y-px hover:shadow-md text-medium-text dark:text-dark-text-secondary hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-500/20 dark:hover:text-red-400 ${x?"justify-center":""}`,title:x?"Logout":void 0,children:[l.jsx(pv,{className:"h-6 w-6"}),!x&&l.jsx("span",{className:"font-medium ml-3",children:"Logout"})]})]})]})},wv=({entry:n,onPrintSlip:s})=>{const{startTreatmentProcess:r,assignPatientToSurgery:o,requestCancelVisitFromQueue:c}=Dt(),[u,m]=w.useState(!1),b=g=>{switch(g){case"In Surgery 1":return"bg-blue-200 text-blue-800 dark:bg-blue-300 dark:text-blue-900";case"In Surgery 2":return"bg-teal-200 text-teal-800 dark:bg-teal-300 dark:text-teal-900";case"Waiting":return"bg-yellow-200 text-yellow-800 dark:bg-yellow-300 dark:text-yellow-900";default:return"bg-gray-200 text-gray-800 dark:bg-gray-400 dark:text-gray-900"}},h=(g,p)=>{g.stopPropagation(),p(),m(!1)};return l.jsxs("li",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg flex flex-col transition-all duration-200 ease-in-out hover:shadow-md cursor-pointer",onClick:()=>m(!u),children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-bold text-xl text-brand-blue w-8 text-center",children:n.queueNumber}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:n.patient.name}),l.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${b(n.status)}`,children:n.status})]})]}),l.jsx("button",{onClick:g=>h(g,()=>s(n)),title:"Print Slip",className:"p-2 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(Xu,{className:"h-5 w-5"})})]}),u&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-dark-border space-y-2",children:[n.status==="Waiting"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:g=>h(g,()=>o(n.patient.id,"In Surgery 1")),className:"w-full text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600",children:"Send to Surgery 1"}),l.jsx("button",{onClick:g=>h(g,()=>o(n.patient.id,"In Surgery 2")),className:"w-full text-sm bg-teal-500 text-white px-3 py-1.5 rounded-md hover:bg-teal-600",children:"Send to Surgery 2"})]}),n.status.startsWith("In Surgery")&&l.jsx("button",{onClick:g=>h(g,()=>r(n.patient.id)),className:"w-full text-sm bg-green-500 text-white px-3 py-1.5 rounded-md hover:bg-green-600",children:"Record Treatment"}),l.jsx("button",{onClick:g=>h(g,()=>c(n)),className:"w-full text-sm bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600",children:"Cancel Visit"})]})]})},Nv=({onAddExistingPatient:n,onPrintSlip:s})=>{const{activePatients:r,dailyQueue:o,addPatientToQueueAndShowSlip:c}=Dt(),[u,m]=w.useState(""),[b,h]=w.useState(!1),g=w.useRef(null),p=o.queue,v=w.useMemo(()=>[...p].filter(D=>D.status==="Waiting"||D.status.startsWith("In Surgery")).sort((D,A)=>{const j={"In Surgery 1":0,"In Surgery 2":1,Waiting:2};return(j[D.status]??3)-(j[A.status]??3)||D.queueNumber-A.queueNumber}),[p]),x=w.useMemo(()=>{if(u.trim()==="")return[];const D=u.toLowerCase();return r.filter(A=>!p.some(j=>j.patient.id===A.id&&j.status!=="Completed"&&j.status!=="Cancelled")&&(A.name.toLowerCase().includes(D)||A.phone.includes(D)))},[r,p,u]),N=D=>{c(D),m(""),h(!1)};return w.useEffect(()=>{const D=A=>{g.current&&!g.current.contains(A.target)&&h(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary flex-shrink-0",children:"Live Queue"}),l.jsxs("div",{className:"relative mb-4",ref:g,children:[l.jsx("input",{type:"text",value:u,onChange:D=>m(D.target.value),onFocus:()=>h(!0),placeholder:"Add existing patient to queue...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"}),b&&x.length>0&&l.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-white dark:bg-dark-card border border-gray-300 dark:border-dark-border mt-1 rounded-md shadow-lg max-h-60 overflow-y-auto",children:l.jsx("ul",{children:x.map(D=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>N(D),className:"w-full text-left px-4 py-2 hover:bg-brand-blue hover:text-white dark:hover:bg-brand-blue",children:[l.jsx("p",{className:"font-medium",children:D.name}),l.jsx("p",{className:"text-sm opacity-80",children:D.phone})]})},D.id))})})]}),l.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2",children:l.jsx("ul",{className:"space-y-3",children:v.length>0?v.map(D=>l.jsx(wv,{entry:D,onPrintSlip:s},D.patient.id)):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 pt-8",children:"Queue is empty."})})})]})},kv=Xe.memo(Nv),fb=6048e5,jv=864e5,Wu=6e4,Ku=36e5,Sv=1e3,zo=43200,ch=1440,dh=Symbol.for("constructDateFrom");function St(n,s){return typeof n=="function"?n(s):n&&typeof n=="object"&&dh in n?n[dh](s):n instanceof Date?new n.constructor(s):new Date(s)}function nt(n,s){return St(s||n,n)}function Vo(n,s,r){const o=nt(n,r==null?void 0:r.in);return isNaN(s)?St((r==null?void 0:r.in)||n,NaN):(s&&o.setDate(o.getDate()+s),o)}function mb(n,s,r){const o=nt(n,r==null?void 0:r.in);if(isNaN(s))return St(n,NaN);if(!s)return o;const c=o.getDate(),u=St(n,o.getTime());u.setMonth(o.getMonth()+s+1,0);const m=u.getDate();return c>=m?u:(o.setFullYear(u.getFullYear(),u.getMonth(),c),o)}let Dv={};function $r(){return Dv}function cr(n,s){var b,h,g,p;const r=$r(),o=(s==null?void 0:s.weekStartsOn)??((h=(b=s==null?void 0:s.locale)==null?void 0:b.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((p=(g=r.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??0,c=nt(n,s==null?void 0:s.in),u=c.getDay(),m=(u<o?7:0)+u-o;return c.setDate(c.getDate()-m),c.setHours(0,0,0,0),c}function Il(n,s){return cr(n,{...s,weekStartsOn:1})}function gb(n,s){const r=nt(n,s==null?void 0:s.in),o=r.getFullYear(),c=St(r,0);c.setFullYear(o+1,0,4),c.setHours(0,0,0,0);const u=Il(c),m=St(r,0);m.setFullYear(o,0,4),m.setHours(0,0,0,0);const b=Il(m);return r.getTime()>=u.getTime()?o+1:r.getTime()>=b.getTime()?o:o-1}function Hl(n){const s=nt(n),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+n-+r}function Da(n,...s){const r=St.bind(null,n||s.find(o=>typeof o=="object"));return s.map(r)}function Kn(n,s){const r=nt(n,s==null?void 0:s.in);return r.setHours(0,0,0,0),r}function hb(n,s,r){const[o,c]=Da(r==null?void 0:r.in,n,s),u=Kn(o),m=Kn(c),b=+u-Hl(u),h=+m-Hl(m);return Math.round((b-h)/jv)}function Cv(n,s){const r=gb(n,s),o=St(n,0);return o.setFullYear(r,0,4),o.setHours(0,0,0,0),Il(o)}function zl(n,s){const r=+nt(n)-+nt(s);return r<0?-1:r>0?1:r}function bb(n){return St(n,Date.now())}function Av(n,s,r){const[o,c]=Da(r==null?void 0:r.in,n,s);return+Kn(o)==+Kn(c)}function Tv(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Mv(n){return!(!Tv(n)&&typeof n!="number"||isNaN(+nt(n)))}function Ev(n,s,r){const[o,c]=Da(r==null?void 0:r.in,n,s),u=o.getFullYear()-c.getFullYear(),m=o.getMonth()-c.getMonth();return u*12+m}function Ov(n,s,r){const[o,c]=Da(r==null?void 0:r.in,n,s);return o.getFullYear()-c.getFullYear()}function pb(n,s,r){const[o,c]=Da(r==null?void 0:r.in,n,s),u=uh(o,c),m=Math.abs(hb(o,c));o.setDate(o.getDate()-u*m);const b=+(uh(o,c)===-u),h=u*(m-b);return h===0?0:h}function uh(n,s){const r=n.getFullYear()-s.getFullYear()||n.getMonth()-s.getMonth()||n.getDate()-s.getDate()||n.getHours()-s.getHours()||n.getMinutes()-s.getMinutes()||n.getSeconds()-s.getSeconds()||n.getMilliseconds()-s.getMilliseconds();return r<0?-1:r>0?1:r}function Rv(n){return s=>{const o=(n?Math[n]:Math.trunc)(s);return o===0?0:o}}function Lv(n,s){return+nt(n)-+nt(s)}function Pv(n,s){const r=nt(n,s==null?void 0:s.in);return r.setHours(23,59,59,999),r}function xb(n,s){const r=nt(n,s==null?void 0:s.in),o=r.getMonth();return r.setFullYear(r.getFullYear(),o+1,0),r.setHours(23,59,59,999),r}function Bv(n,s){const r=nt(n,s==null?void 0:s.in);return+Pv(r,s)==+xb(r,s)}function _v(n,s,r){const[o,c,u]=Da(r==null?void 0:r.in,n,n,s),m=zl(c,u),b=Math.abs(Ev(c,u));if(b<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-m*b);let h=zl(c,u)===-m;Bv(o)&&b===1&&zl(o,u)===1&&(h=!1);const g=m*(b-+h);return g===0?0:g}function zv(n,s,r){const o=Lv(n,s)/1e3;return Rv(r==null?void 0:r.roundingMethod)(o)}function yb(n,s,r){const[o,c]=Da(r==null?void 0:r.in,n,s),u=zl(o,c),m=Math.abs(Ov(o,c));o.setFullYear(1584),c.setFullYear(1584);const b=zl(o,c)===-u,h=u*(m-+b);return h===0?0:h}function Iv(n,s){const[r,o]=Da(n,s.start,s.end);return{start:r,end:o}}function Hv(n,s){const{start:r,end:o}=Iv(s==null?void 0:s.in,n);let c=+r>+o;const u=c?+r:+o,m=c?o:r;m.setHours(0,0,0,0);let b=1;const h=[];for(;+m<=u;)h.push(St(r,m)),m.setDate(m.getDate()+b),m.setHours(0,0,0,0);return c?h.reverse():h}function qv(n,s){const r=nt(n,s==null?void 0:s.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Uv(n,s){const r=nt(n,s==null?void 0:s.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Gv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$v=(n,s,r)=>{let o;const c=Gv[n];return typeof c=="string"?o=c:s===1?o=c.one:o=c.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o};function yu(n){return(s={})=>{const r=s.width?String(s.width):n.defaultWidth;return n.formats[r]||n.formats[n.defaultWidth]}}const Yv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Fv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vv={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qv={date:yu({formats:Yv,defaultWidth:"full"}),time:yu({formats:Fv,defaultWidth:"full"}),dateTime:yu({formats:Vv,defaultWidth:"full"})},Xv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zv=(n,s,r,o)=>Xv[n];function ti(n){return(s,r)=>{const o=r!=null&&r.context?String(r.context):"standalone";let c;if(o==="formatting"&&n.formattingValues){const m=n.defaultFormattingWidth||n.defaultWidth,b=r!=null&&r.width?String(r.width):m;c=n.formattingValues[b]||n.formattingValues[m]}else{const m=n.defaultWidth,b=r!=null&&r.width?String(r.width):n.defaultWidth;c=n.values[b]||n.values[m]}const u=n.argumentCallback?n.argumentCallback(s):s;return c[u]}}const Wv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},e2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},n2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},a2=(n,s)=>{const r=Number(n),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},r2={ordinalNumber:a2,era:ti({values:Wv,defaultWidth:"wide"}),quarter:ti({values:Kv,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ti({values:Jv,defaultWidth:"wide"}),day:ti({values:e2,defaultWidth:"wide"}),dayPeriod:ti({values:t2,defaultWidth:"wide",formattingValues:n2,defaultFormattingWidth:"wide"})};function ni(n){return(s,r={})=>{const o=r.width,c=o&&n.matchPatterns[o]||n.matchPatterns[n.defaultMatchWidth],u=s.match(c);if(!u)return null;const m=u[0],b=o&&n.parsePatterns[o]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(b)?s2(b,v=>v.test(m)):l2(b,v=>v.test(m));let g;g=n.valueCallback?n.valueCallback(h):h,g=r.valueCallback?r.valueCallback(g):g;const p=s.slice(m.length);return{value:g,rest:p}}}function l2(n,s){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&s(n[r]))return r}function s2(n,s){for(let r=0;r<n.length;r++)if(s(n[r]))return r}function i2(n){return(s,r={})=>{const o=s.match(n.matchPattern);if(!o)return null;const c=o[0],u=s.match(n.parsePattern);if(!u)return null;let m=n.valueCallback?n.valueCallback(u[0]):u[0];m=r.valueCallback?r.valueCallback(m):m;const b=s.slice(c.length);return{value:m,rest:b}}}const o2=/^(\d+)(th|st|nd|rd)?/i,c2=/\d+/i,d2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u2={any:[/^b/i,/^(a|c)/i]},f2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},m2={any:[/1/i,/2/i,/3/i,/4/i]},g2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},b2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},p2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x2={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},y2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v2={ordinalNumber:i2({matchPattern:o2,parsePattern:c2,valueCallback:n=>parseInt(n,10)}),era:ni({matchPatterns:d2,defaultMatchWidth:"wide",parsePatterns:u2,defaultParseWidth:"any"}),quarter:ni({matchPatterns:f2,defaultMatchWidth:"wide",parsePatterns:m2,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ni({matchPatterns:g2,defaultMatchWidth:"wide",parsePatterns:h2,defaultParseWidth:"any"}),day:ni({matchPatterns:b2,defaultMatchWidth:"wide",parsePatterns:p2,defaultParseWidth:"any"}),dayPeriod:ni({matchPatterns:x2,defaultMatchWidth:"any",parsePatterns:y2,defaultParseWidth:"any"})},Ju={code:"en-US",formatDistance:$v,formatLong:Qv,formatRelative:Zv,localize:r2,match:v2,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w2(n,s){const r=nt(n,s==null?void 0:s.in);return hb(r,Uv(r))+1}function vb(n,s){const r=nt(n,s==null?void 0:s.in),o=+Il(r)-+Cv(r);return Math.round(o/fb)+1}function ef(n,s){var p,v,x,N;const r=nt(n,s==null?void 0:s.in),o=r.getFullYear(),c=$r(),u=(s==null?void 0:s.firstWeekContainsDate)??((v=(p=s==null?void 0:s.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??c.firstWeekContainsDate??((N=(x=c.locale)==null?void 0:x.options)==null?void 0:N.firstWeekContainsDate)??1,m=St((s==null?void 0:s.in)||n,0);m.setFullYear(o+1,0,u),m.setHours(0,0,0,0);const b=cr(m,s),h=St((s==null?void 0:s.in)||n,0);h.setFullYear(o,0,u),h.setHours(0,0,0,0);const g=cr(h,s);return+r>=+b?o+1:+r>=+g?o:o-1}function N2(n,s){var b,h,g,p;const r=$r(),o=(s==null?void 0:s.firstWeekContainsDate)??((h=(b=s==null?void 0:s.locale)==null?void 0:b.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(g=r.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??1,c=ef(n,s),u=St((s==null?void 0:s.in)||n,0);return u.setFullYear(c,0,o),u.setHours(0,0,0,0),cr(u,s)}function wb(n,s){const r=nt(n,s==null?void 0:s.in),o=+cr(r,s)-+N2(r,s);return Math.round(o/fb)+1}function ht(n,s){const r=n<0?"-":"",o=Math.abs(n).toString().padStart(s,"0");return r+o}const lr={y(n,s){const r=n.getFullYear(),o=r>0?r:1-r;return ht(s==="yy"?o%100:o,s.length)},M(n,s){const r=n.getMonth();return s==="M"?String(r+1):ht(r+1,2)},d(n,s){return ht(n.getDate(),s.length)},a(n,s){const r=n.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(n,s){return ht(n.getHours()%12||12,s.length)},H(n,s){return ht(n.getHours(),s.length)},m(n,s){return ht(n.getMinutes(),s.length)},s(n,s){return ht(n.getSeconds(),s.length)},S(n,s){const r=s.length,o=n.getMilliseconds(),c=Math.trunc(o*Math.pow(10,r-3));return ht(c,s.length)}},_l={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fh={G:function(n,s,r){const o=n.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(o,{width:"abbreviated"});case"GGGGG":return r.era(o,{width:"narrow"});case"GGGG":default:return r.era(o,{width:"wide"})}},y:function(n,s,r){if(s==="yo"){const o=n.getFullYear(),c=o>0?o:1-o;return r.ordinalNumber(c,{unit:"year"})}return lr.y(n,s)},Y:function(n,s,r,o){const c=ef(n,o),u=c>0?c:1-c;if(s==="YY"){const m=u%100;return ht(m,2)}return s==="Yo"?r.ordinalNumber(u,{unit:"year"}):ht(u,s.length)},R:function(n,s){const r=gb(n);return ht(r,s.length)},u:function(n,s){const r=n.getFullYear();return ht(r,s.length)},Q:function(n,s,r){const o=Math.ceil((n.getMonth()+1)/3);switch(s){case"Q":return String(o);case"QQ":return ht(o,2);case"Qo":return r.ordinalNumber(o,{unit:"quarter"});case"QQQ":return r.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(o,{width:"wide",context:"formatting"})}},q:function(n,s,r){const o=Math.ceil((n.getMonth()+1)/3);switch(s){case"q":return String(o);case"qq":return ht(o,2);case"qo":return r.ordinalNumber(o,{unit:"quarter"});case"qqq":return r.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(o,{width:"wide",context:"standalone"})}},M:function(n,s,r){const o=n.getMonth();switch(s){case"M":case"MM":return lr.M(n,s);case"Mo":return r.ordinalNumber(o+1,{unit:"month"});case"MMM":return r.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(o,{width:"wide",context:"formatting"})}},L:function(n,s,r){const o=n.getMonth();switch(s){case"L":return String(o+1);case"LL":return ht(o+1,2);case"Lo":return r.ordinalNumber(o+1,{unit:"month"});case"LLL":return r.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(o,{width:"wide",context:"standalone"})}},w:function(n,s,r,o){const c=wb(n,o);return s==="wo"?r.ordinalNumber(c,{unit:"week"}):ht(c,s.length)},I:function(n,s,r){const o=vb(n);return s==="Io"?r.ordinalNumber(o,{unit:"week"}):ht(o,s.length)},d:function(n,s,r){return s==="do"?r.ordinalNumber(n.getDate(),{unit:"date"}):lr.d(n,s)},D:function(n,s,r){const o=w2(n);return s==="Do"?r.ordinalNumber(o,{unit:"dayOfYear"}):ht(o,s.length)},E:function(n,s,r){const o=n.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(o,{width:"short",context:"formatting"});case"EEEE":default:return r.day(o,{width:"wide",context:"formatting"})}},e:function(n,s,r,o){const c=n.getDay(),u=(c-o.weekStartsOn+8)%7||7;switch(s){case"e":return String(u);case"ee":return ht(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(c,{width:"short",context:"formatting"});case"eeee":default:return r.day(c,{width:"wide",context:"formatting"})}},c:function(n,s,r,o){const c=n.getDay(),u=(c-o.weekStartsOn+8)%7||7;switch(s){case"c":return String(u);case"cc":return ht(u,s.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(c,{width:"narrow",context:"standalone"});case"cccccc":return r.day(c,{width:"short",context:"standalone"});case"cccc":default:return r.day(c,{width:"wide",context:"standalone"})}},i:function(n,s,r){const o=n.getDay(),c=o===0?7:o;switch(s){case"i":return String(c);case"ii":return ht(c,s.length);case"io":return r.ordinalNumber(c,{unit:"day"});case"iii":return r.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(o,{width:"short",context:"formatting"});case"iiii":default:return r.day(o,{width:"wide",context:"formatting"})}},a:function(n,s,r){const c=n.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(n,s,r){const o=n.getHours();let c;switch(o===12?c=_l.noon:o===0?c=_l.midnight:c=o/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(n,s,r){const o=n.getHours();let c;switch(o>=17?c=_l.evening:o>=12?c=_l.afternoon:o>=4?c=_l.morning:c=_l.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(n,s,r){if(s==="ho"){let o=n.getHours()%12;return o===0&&(o=12),r.ordinalNumber(o,{unit:"hour"})}return lr.h(n,s)},H:function(n,s,r){return s==="Ho"?r.ordinalNumber(n.getHours(),{unit:"hour"}):lr.H(n,s)},K:function(n,s,r){const o=n.getHours()%12;return s==="Ko"?r.ordinalNumber(o,{unit:"hour"}):ht(o,s.length)},k:function(n,s,r){let o=n.getHours();return o===0&&(o=24),s==="ko"?r.ordinalNumber(o,{unit:"hour"}):ht(o,s.length)},m:function(n,s,r){return s==="mo"?r.ordinalNumber(n.getMinutes(),{unit:"minute"}):lr.m(n,s)},s:function(n,s,r){return s==="so"?r.ordinalNumber(n.getSeconds(),{unit:"second"}):lr.s(n,s)},S:function(n,s){return lr.S(n,s)},X:function(n,s,r){const o=n.getTimezoneOffset();if(o===0)return"Z";switch(s){case"X":return gh(o);case"XXXX":case"XX":return Ir(o);case"XXXXX":case"XXX":default:return Ir(o,":")}},x:function(n,s,r){const o=n.getTimezoneOffset();switch(s){case"x":return gh(o);case"xxxx":case"xx":return Ir(o);case"xxxxx":case"xxx":default:return Ir(o,":")}},O:function(n,s,r){const o=n.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+mh(o,":");case"OOOO":default:return"GMT"+Ir(o,":")}},z:function(n,s,r){const o=n.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+mh(o,":");case"zzzz":default:return"GMT"+Ir(o,":")}},t:function(n,s,r){const o=Math.trunc(+n/1e3);return ht(o,s.length)},T:function(n,s,r){return ht(+n,s.length)}};function mh(n,s=""){const r=n>0?"-":"+",o=Math.abs(n),c=Math.trunc(o/60),u=o%60;return u===0?r+String(c):r+String(c)+s+ht(u,2)}function gh(n,s){return n%60===0?(n>0?"-":"+")+ht(Math.abs(n)/60,2):Ir(n,s)}function Ir(n,s=""){const r=n>0?"-":"+",o=Math.abs(n),c=ht(Math.trunc(o/60),2),u=ht(o%60,2);return r+c+s+u}const hh=(n,s)=>{switch(n){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Nb=(n,s)=>{switch(n){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},k2=(n,s)=>{const r=n.match(/(P+)(p+)?/)||[],o=r[1],c=r[2];if(!c)return hh(n,s);let u;switch(o){case"P":u=s.dateTime({width:"short"});break;case"PP":u=s.dateTime({width:"medium"});break;case"PPP":u=s.dateTime({width:"long"});break;case"PPPP":default:u=s.dateTime({width:"full"});break}return u.replace("{{date}}",hh(o,s)).replace("{{time}}",Nb(c,s))},_u={p:Nb,P:k2},j2=/^D+$/,S2=/^Y+$/,D2=["D","DD","YY","YYYY"];function kb(n){return j2.test(n)}function jb(n){return S2.test(n)}function zu(n,s,r){const o=C2(n,s,r);if(console.warn(o),D2.includes(n))throw new RangeError(o)}function C2(n,s,r){const o=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${s}\`) for formatting ${o} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const A2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,T2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M2=/^'([^]*?)'?$/,E2=/''/g,O2=/[a-zA-Z]/;function ye(n,s,r){var p,v,x,N;const o=$r(),c=o.locale??Ju,u=o.firstWeekContainsDate??((v=(p=o.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,m=o.weekStartsOn??((N=(x=o.locale)==null?void 0:x.options)==null?void 0:N.weekStartsOn)??0,b=nt(n,r==null?void 0:r.in);if(!Mv(b))throw new RangeError("Invalid time value");let h=s.match(T2).map(D=>{const A=D[0];if(A==="p"||A==="P"){const j=_u[A];return j(D,c.formatLong)}return D}).join("").match(A2).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const A=D[0];if(A==="'")return{isToken:!1,value:R2(D)};if(fh[A])return{isToken:!0,value:D};if(A.match(O2))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:D}});c.localize.preprocessor&&(h=c.localize.preprocessor(b,h));const g={firstWeekContainsDate:u,weekStartsOn:m,locale:c};return h.map(D=>{if(!D.isToken)return D.value;const A=D.value;(jb(A)||kb(A))&&zu(A,s,String(n));const j=fh[A[0]];return j(b,A,c.localize,g)}).join("")}function R2(n){const s=n.match(M2);return s?s[1].replace(E2,"'"):n}function L2(n,s,r){const o=$r(),c=(r==null?void 0:r.locale)??o.locale??Ju,u=2520,m=zl(n,s);if(isNaN(m))throw new RangeError("Invalid time value");const b=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:m}),[h,g]=Da(r==null?void 0:r.in,...m>0?[s,n]:[n,s]),p=zv(g,h),v=(Hl(g)-Hl(h))/1e3,x=Math.round((p-v)/60);let N;if(x<2)return r!=null&&r.includeSeconds?p<5?c.formatDistance("lessThanXSeconds",5,b):p<10?c.formatDistance("lessThanXSeconds",10,b):p<20?c.formatDistance("lessThanXSeconds",20,b):p<40?c.formatDistance("halfAMinute",0,b):p<60?c.formatDistance("lessThanXMinutes",1,b):c.formatDistance("xMinutes",1,b):x===0?c.formatDistance("lessThanXMinutes",1,b):c.formatDistance("xMinutes",x,b);if(x<45)return c.formatDistance("xMinutes",x,b);if(x<90)return c.formatDistance("aboutXHours",1,b);if(x<ch){const D=Math.round(x/60);return c.formatDistance("aboutXHours",D,b)}else{if(x<u)return c.formatDistance("xDays",1,b);if(x<zo){const D=Math.round(x/ch);return c.formatDistance("xDays",D,b)}else if(x<zo*2)return N=Math.round(x/zo),c.formatDistance("aboutXMonths",N,b)}if(N=_v(g,h),N<12){const D=Math.round(x/zo);return c.formatDistance("xMonths",D,b)}else{const D=N%12,A=Math.trunc(N/12);return D<3?c.formatDistance("aboutXYears",A,b):D<9?c.formatDistance("overXYears",A,b):c.formatDistance("almostXYears",A+1,b)}}function Sb(n,s){return L2(n,bb(n),s)}function P2(n,s){return nt(n,s==null?void 0:s.in).getDay()}function B2(){return Object.assign({},$r())}function _2(n,s){const r=nt(n,s==null?void 0:s.in).getDay();return r===0?7:r}function z2(n,s){const r=I2(s)?new s(0):St(s,0);return r.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),r}function I2(n){var s;return typeof n=="function"&&((s=n.prototype)==null?void 0:s.constructor)===n}const H2=10;class Db{constructor(){Ne(this,"subPriority",0)}validate(s,r){return!0}}class q2 extends Db{constructor(s,r,o,c,u){super(),this.value=s,this.validateValue=r,this.setValue=o,this.priority=c,u&&(this.subPriority=u)}validate(s,r){return this.validateValue(s,this.value,r)}set(s,r,o){return this.setValue(s,r,this.value,o)}}class U2 extends Db{constructor(r,o){super();Ne(this,"priority",H2);Ne(this,"subPriority",-1);this.context=r||(c=>St(o,c))}set(r,o){return o.timestampIsSet?r:St(r,z2(r,this.context))}}class dt{run(s,r,o,c){const u=this.parse(s,r,o,c);return u?{setter:new q2(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(s,r,o){return!0}}class G2 extends dt{constructor(){super(...arguments);Ne(this,"priority",140);Ne(this,"incompatibleTokens",["R","u","t","T"])}parse(r,o,c){switch(o){case"G":case"GG":case"GGG":return c.era(r,{width:"abbreviated"})||c.era(r,{width:"narrow"});case"GGGGG":return c.era(r,{width:"narrow"});case"GGGG":default:return c.era(r,{width:"wide"})||c.era(r,{width:"abbreviated"})||c.era(r,{width:"narrow"})}}set(r,o,c){return o.era=c,r.setFullYear(c,0,1),r.setHours(0,0,0,0),r}}const Bt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ia={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function _t(n,s){return n&&{value:s(n.value),rest:n.rest}}function At(n,s){const r=s.match(n);return r?{value:parseInt(r[0],10),rest:s.slice(r[0].length)}:null}function oa(n,s){const r=s.match(n);if(!r)return null;if(r[0]==="Z")return{value:0,rest:s.slice(1)};const o=r[1]==="+"?1:-1,c=r[2]?parseInt(r[2],10):0,u=r[3]?parseInt(r[3],10):0,m=r[5]?parseInt(r[5],10):0;return{value:o*(c*Ku+u*Wu+m*Sv),rest:s.slice(r[0].length)}}function Cb(n){return At(Bt.anyDigitsSigned,n)}function Et(n,s){switch(n){case 1:return At(Bt.singleDigit,s);case 2:return At(Bt.twoDigits,s);case 3:return At(Bt.threeDigits,s);case 4:return At(Bt.fourDigits,s);default:return At(new RegExp("^\\d{1,"+n+"}"),s)}}function Qo(n,s){switch(n){case 1:return At(Bt.singleDigitSigned,s);case 2:return At(Bt.twoDigitsSigned,s);case 3:return At(Bt.threeDigitsSigned,s);case 4:return At(Bt.fourDigitsSigned,s);default:return At(new RegExp("^-?\\d{1,"+n+"}"),s)}}function tf(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ab(n,s){const r=s>0,o=r?s:1-s;let c;if(o<=50)c=n||100;else{const u=o+50,m=Math.trunc(u/100)*100,b=n>=u%100;c=n+m-(b?100:0)}return r?c:1-c}function Tb(n){return n%400===0||n%4===0&&n%100!==0}class $2 extends dt{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,o,c){const u=m=>({year:m,isTwoDigitYear:o==="yy"});switch(o){case"y":return _t(Et(4,r),u);case"yo":return _t(c.ordinalNumber(r,{unit:"year"}),u);default:return _t(Et(o.length,r),u)}}validate(r,o){return o.isTwoDigitYear||o.year>0}set(r,o,c){const u=r.getFullYear();if(c.isTwoDigitYear){const b=Ab(c.year,u);return r.setFullYear(b,0,1),r.setHours(0,0,0,0),r}const m=!("era"in o)||o.era===1?c.year:1-c.year;return r.setFullYear(m,0,1),r.setHours(0,0,0,0),r}}class Y2 extends dt{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,o,c){const u=m=>({year:m,isTwoDigitYear:o==="YY"});switch(o){case"Y":return _t(Et(4,r),u);case"Yo":return _t(c.ordinalNumber(r,{unit:"year"}),u);default:return _t(Et(o.length,r),u)}}validate(r,o){return o.isTwoDigitYear||o.year>0}set(r,o,c,u){const m=ef(r,u);if(c.isTwoDigitYear){const h=Ab(c.year,m);return r.setFullYear(h,0,u.firstWeekContainsDate),r.setHours(0,0,0,0),cr(r,u)}const b=!("era"in o)||o.era===1?c.year:1-c.year;return r.setFullYear(b,0,u.firstWeekContainsDate),r.setHours(0,0,0,0),cr(r,u)}}class F2 extends dt{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,o){return Qo(o==="R"?4:o.length,r)}set(r,o,c){const u=St(r,0);return u.setFullYear(c,0,4),u.setHours(0,0,0,0),Il(u)}}class V2 extends dt{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,o){return Qo(o==="u"?4:o.length,r)}set(r,o,c){return r.setFullYear(c,0,1),r.setHours(0,0,0,0),r}}class Q2 extends dt{constructor(){super(...arguments);Ne(this,"priority",120);Ne(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,o,c){switch(o){case"Q":case"QQ":return Et(o.length,r);case"Qo":return c.ordinalNumber(r,{unit:"quarter"});case"QQQ":return c.quarter(r,{width:"abbreviated",context:"formatting"})||c.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return c.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return c.quarter(r,{width:"wide",context:"formatting"})||c.quarter(r,{width:"abbreviated",context:"formatting"})||c.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,o){return o>=1&&o<=4}set(r,o,c){return r.setMonth((c-1)*3,1),r.setHours(0,0,0,0),r}}class X2 extends dt{constructor(){super(...arguments);Ne(this,"priority",120);Ne(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,o,c){switch(o){case"q":case"qq":return Et(o.length,r);case"qo":return c.ordinalNumber(r,{unit:"quarter"});case"qqq":return c.quarter(r,{width:"abbreviated",context:"standalone"})||c.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return c.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return c.quarter(r,{width:"wide",context:"standalone"})||c.quarter(r,{width:"abbreviated",context:"standalone"})||c.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,o){return o>=1&&o<=4}set(r,o,c){return r.setMonth((c-1)*3,1),r.setHours(0,0,0,0),r}}class Z2 extends dt{constructor(){super(...arguments);Ne(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ne(this,"priority",110)}parse(r,o,c){const u=m=>m-1;switch(o){case"M":return _t(At(Bt.month,r),u);case"MM":return _t(Et(2,r),u);case"Mo":return _t(c.ordinalNumber(r,{unit:"month"}),u);case"MMM":return c.month(r,{width:"abbreviated",context:"formatting"})||c.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return c.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return c.month(r,{width:"wide",context:"formatting"})||c.month(r,{width:"abbreviated",context:"formatting"})||c.month(r,{width:"narrow",context:"formatting"})}}validate(r,o){return o>=0&&o<=11}set(r,o,c){return r.setMonth(c,1),r.setHours(0,0,0,0),r}}class W2 extends dt{constructor(){super(...arguments);Ne(this,"priority",110);Ne(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,o,c){const u=m=>m-1;switch(o){case"L":return _t(At(Bt.month,r),u);case"LL":return _t(Et(2,r),u);case"Lo":return _t(c.ordinalNumber(r,{unit:"month"}),u);case"LLL":return c.month(r,{width:"abbreviated",context:"standalone"})||c.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return c.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return c.month(r,{width:"wide",context:"standalone"})||c.month(r,{width:"abbreviated",context:"standalone"})||c.month(r,{width:"narrow",context:"standalone"})}}validate(r,o){return o>=0&&o<=11}set(r,o,c){return r.setMonth(c,1),r.setHours(0,0,0,0),r}}function K2(n,s,r){const o=nt(n,r==null?void 0:r.in),c=wb(o,r)-s;return o.setDate(o.getDate()-c*7),nt(o,r==null?void 0:r.in)}class J2 extends dt{constructor(){super(...arguments);Ne(this,"priority",100);Ne(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,o,c){switch(o){case"w":return At(Bt.week,r);case"wo":return c.ordinalNumber(r,{unit:"week"});default:return Et(o.length,r)}}validate(r,o){return o>=1&&o<=53}set(r,o,c,u){return cr(K2(r,c,u),u)}}function e1(n,s,r){const o=nt(n,r==null?void 0:r.in),c=vb(o,r)-s;return o.setDate(o.getDate()-c*7),o}class t1 extends dt{constructor(){super(...arguments);Ne(this,"priority",100);Ne(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,o,c){switch(o){case"I":return At(Bt.week,r);case"Io":return c.ordinalNumber(r,{unit:"week"});default:return Et(o.length,r)}}validate(r,o){return o>=1&&o<=53}set(r,o,c){return Il(e1(r,c))}}const n1=[31,28,31,30,31,30,31,31,30,31,30,31],a1=[31,29,31,30,31,30,31,31,30,31,30,31];class r1 extends dt{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"subPriority",1);Ne(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,o,c){switch(o){case"d":return At(Bt.date,r);case"do":return c.ordinalNumber(r,{unit:"date"});default:return Et(o.length,r)}}validate(r,o){const c=r.getFullYear(),u=Tb(c),m=r.getMonth();return u?o>=1&&o<=a1[m]:o>=1&&o<=n1[m]}set(r,o,c){return r.setDate(c),r.setHours(0,0,0,0),r}}class l1 extends dt{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"subpriority",1);Ne(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,o,c){switch(o){case"D":case"DD":return At(Bt.dayOfYear,r);case"Do":return c.ordinalNumber(r,{unit:"date"});default:return Et(o.length,r)}}validate(r,o){const c=r.getFullYear();return Tb(c)?o>=1&&o<=366:o>=1&&o<=365}set(r,o,c){return r.setMonth(0,c),r.setHours(0,0,0,0),r}}function nf(n,s,r){var v,x,N,D;const o=$r(),c=(r==null?void 0:r.weekStartsOn)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??o.weekStartsOn??((D=(N=o.locale)==null?void 0:N.options)==null?void 0:D.weekStartsOn)??0,u=nt(n,r==null?void 0:r.in),m=u.getDay(),h=(s%7+7)%7,g=7-c,p=s<0||s>6?s-(m+g)%7:(h+g)%7-(m+g)%7;return Vo(u,p,r)}class s1 extends dt{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,o,c){switch(o){case"E":case"EE":case"EEE":return c.day(r,{width:"abbreviated",context:"formatting"})||c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return c.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return c.day(r,{width:"wide",context:"formatting"})||c.day(r,{width:"abbreviated",context:"formatting"})||c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"})}}validate(r,o){return o>=0&&o<=6}set(r,o,c,u){return r=nf(r,c,u),r.setHours(0,0,0,0),r}}class i1 extends dt{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,o,c,u){const m=b=>{const h=Math.floor((b-1)/7)*7;return(b+u.weekStartsOn+6)%7+h};switch(o){case"e":case"ee":return _t(Et(o.length,r),m);case"eo":return _t(c.ordinalNumber(r,{unit:"day"}),m);case"eee":return c.day(r,{width:"abbreviated",context:"formatting"})||c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"});case"eeeee":return c.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return c.day(r,{width:"wide",context:"formatting"})||c.day(r,{width:"abbreviated",context:"formatting"})||c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"})}}validate(r,o){return o>=0&&o<=6}set(r,o,c,u){return r=nf(r,c,u),r.setHours(0,0,0,0),r}}class o1 extends dt{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,o,c,u){const m=b=>{const h=Math.floor((b-1)/7)*7;return(b+u.weekStartsOn+6)%7+h};switch(o){case"c":case"cc":return _t(Et(o.length,r),m);case"co":return _t(c.ordinalNumber(r,{unit:"day"}),m);case"ccc":return c.day(r,{width:"abbreviated",context:"standalone"})||c.day(r,{width:"short",context:"standalone"})||c.day(r,{width:"narrow",context:"standalone"});case"ccccc":return c.day(r,{width:"narrow",context:"standalone"});case"cccccc":return c.day(r,{width:"short",context:"standalone"})||c.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return c.day(r,{width:"wide",context:"standalone"})||c.day(r,{width:"abbreviated",context:"standalone"})||c.day(r,{width:"short",context:"standalone"})||c.day(r,{width:"narrow",context:"standalone"})}}validate(r,o){return o>=0&&o<=6}set(r,o,c,u){return r=nf(r,c,u),r.setHours(0,0,0,0),r}}function c1(n,s,r){const o=nt(n,r==null?void 0:r.in),c=_2(o,r),u=s-c;return Vo(o,u,r)}class d1 extends dt{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,o,c){const u=m=>m===0?7:m;switch(o){case"i":case"ii":return Et(o.length,r);case"io":return c.ordinalNumber(r,{unit:"day"});case"iii":return _t(c.day(r,{width:"abbreviated",context:"formatting"})||c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"}),u);case"iiiii":return _t(c.day(r,{width:"narrow",context:"formatting"}),u);case"iiiiii":return _t(c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"}),u);case"iiii":default:return _t(c.day(r,{width:"wide",context:"formatting"})||c.day(r,{width:"abbreviated",context:"formatting"})||c.day(r,{width:"short",context:"formatting"})||c.day(r,{width:"narrow",context:"formatting"}),u)}}validate(r,o){return o>=1&&o<=7}set(r,o,c){return r=c1(r,c),r.setHours(0,0,0,0),r}}class u1 extends dt{constructor(){super(...arguments);Ne(this,"priority",80);Ne(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,o,c){switch(o){case"a":case"aa":case"aaa":return c.dayPeriod(r,{width:"abbreviated",context:"formatting"})||c.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return c.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return c.dayPeriod(r,{width:"wide",context:"formatting"})||c.dayPeriod(r,{width:"abbreviated",context:"formatting"})||c.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,o,c){return r.setHours(tf(c),0,0,0),r}}class f1 extends dt{constructor(){super(...arguments);Ne(this,"priority",80);Ne(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,o,c){switch(o){case"b":case"bb":case"bbb":return c.dayPeriod(r,{width:"abbreviated",context:"formatting"})||c.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return c.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return c.dayPeriod(r,{width:"wide",context:"formatting"})||c.dayPeriod(r,{width:"abbreviated",context:"formatting"})||c.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,o,c){return r.setHours(tf(c),0,0,0),r}}class m1 extends dt{constructor(){super(...arguments);Ne(this,"priority",80);Ne(this,"incompatibleTokens",["a","b","t","T"])}parse(r,o,c){switch(o){case"B":case"BB":case"BBB":return c.dayPeriod(r,{width:"abbreviated",context:"formatting"})||c.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return c.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return c.dayPeriod(r,{width:"wide",context:"formatting"})||c.dayPeriod(r,{width:"abbreviated",context:"formatting"})||c.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,o,c){return r.setHours(tf(c),0,0,0),r}}class g1 extends dt{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,o,c){switch(o){case"h":return At(Bt.hour12h,r);case"ho":return c.ordinalNumber(r,{unit:"hour"});default:return Et(o.length,r)}}validate(r,o){return o>=1&&o<=12}set(r,o,c){const u=r.getHours()>=12;return u&&c<12?r.setHours(c+12,0,0,0):!u&&c===12?r.setHours(0,0,0,0):r.setHours(c,0,0,0),r}}class h1 extends dt{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,o,c){switch(o){case"H":return At(Bt.hour23h,r);case"Ho":return c.ordinalNumber(r,{unit:"hour"});default:return Et(o.length,r)}}validate(r,o){return o>=0&&o<=23}set(r,o,c){return r.setHours(c,0,0,0),r}}class b1 extends dt{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,o,c){switch(o){case"K":return At(Bt.hour11h,r);case"Ko":return c.ordinalNumber(r,{unit:"hour"});default:return Et(o.length,r)}}validate(r,o){return o>=0&&o<=11}set(r,o,c){return r.getHours()>=12&&c<12?r.setHours(c+12,0,0,0):r.setHours(c,0,0,0),r}}class p1 extends dt{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,o,c){switch(o){case"k":return At(Bt.hour24h,r);case"ko":return c.ordinalNumber(r,{unit:"hour"});default:return Et(o.length,r)}}validate(r,o){return o>=1&&o<=24}set(r,o,c){const u=c<=24?c%24:c;return r.setHours(u,0,0,0),r}}class x1 extends dt{constructor(){super(...arguments);Ne(this,"priority",60);Ne(this,"incompatibleTokens",["t","T"])}parse(r,o,c){switch(o){case"m":return At(Bt.minute,r);case"mo":return c.ordinalNumber(r,{unit:"minute"});default:return Et(o.length,r)}}validate(r,o){return o>=0&&o<=59}set(r,o,c){return r.setMinutes(c,0,0),r}}class y1 extends dt{constructor(){super(...arguments);Ne(this,"priority",50);Ne(this,"incompatibleTokens",["t","T"])}parse(r,o,c){switch(o){case"s":return At(Bt.second,r);case"so":return c.ordinalNumber(r,{unit:"second"});default:return Et(o.length,r)}}validate(r,o){return o>=0&&o<=59}set(r,o,c){return r.setSeconds(c,0),r}}class v1 extends dt{constructor(){super(...arguments);Ne(this,"priority",30);Ne(this,"incompatibleTokens",["t","T"])}parse(r,o){const c=u=>Math.trunc(u*Math.pow(10,-o.length+3));return _t(Et(o.length,r),c)}set(r,o,c){return r.setMilliseconds(c),r}}class w1 extends dt{constructor(){super(...arguments);Ne(this,"priority",10);Ne(this,"incompatibleTokens",["t","T","x"])}parse(r,o){switch(o){case"X":return oa(ia.basicOptionalMinutes,r);case"XX":return oa(ia.basic,r);case"XXXX":return oa(ia.basicOptionalSeconds,r);case"XXXXX":return oa(ia.extendedOptionalSeconds,r);case"XXX":default:return oa(ia.extended,r)}}set(r,o,c){return o.timestampIsSet?r:St(r,r.getTime()-Hl(r)-c)}}class N1 extends dt{constructor(){super(...arguments);Ne(this,"priority",10);Ne(this,"incompatibleTokens",["t","T","X"])}parse(r,o){switch(o){case"x":return oa(ia.basicOptionalMinutes,r);case"xx":return oa(ia.basic,r);case"xxxx":return oa(ia.basicOptionalSeconds,r);case"xxxxx":return oa(ia.extendedOptionalSeconds,r);case"xxx":default:return oa(ia.extended,r)}}set(r,o,c){return o.timestampIsSet?r:St(r,r.getTime()-Hl(r)-c)}}class k1 extends dt{constructor(){super(...arguments);Ne(this,"priority",40);Ne(this,"incompatibleTokens","*")}parse(r){return Cb(r)}set(r,o,c){return[St(r,c*1e3),{timestampIsSet:!0}]}}class j1 extends dt{constructor(){super(...arguments);Ne(this,"priority",20);Ne(this,"incompatibleTokens","*")}parse(r){return Cb(r)}set(r,o,c){return[St(r,c),{timestampIsSet:!0}]}}const S1={G:new G2,y:new $2,Y:new Y2,R:new F2,u:new V2,Q:new Q2,q:new X2,M:new Z2,L:new W2,w:new J2,I:new t1,d:new r1,D:new l1,E:new s1,e:new i1,c:new o1,i:new d1,a:new u1,b:new f1,B:new m1,h:new g1,H:new h1,K:new b1,k:new p1,m:new x1,s:new y1,S:new v1,X:new w1,x:new N1,t:new k1,T:new j1},D1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,C1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,A1=/^'([^]*?)'?$/,T1=/''/g,M1=/\S/,E1=/[a-zA-Z]/;function ln(n,s,r,o){var j,O,T,I;const c=()=>St(r,NaN),u=B2(),m=u.locale??Ju,b=u.firstWeekContainsDate??((O=(j=u.locale)==null?void 0:j.options)==null?void 0:O.firstWeekContainsDate)??1,h=u.weekStartsOn??((I=(T=u.locale)==null?void 0:T.options)==null?void 0:I.weekStartsOn)??0;if(!s)return n?c():nt(r,o==null?void 0:o.in);const g={firstWeekContainsDate:b,weekStartsOn:h,locale:m},p=[new U2(o==null?void 0:o.in,r)],v=s.match(C1).map(R=>{const _=R[0];if(_ in _u){const $=_u[_];return $(R,m.formatLong)}return R}).join("").match(D1),x=[];for(let R of v){jb(R)&&zu(R,s,n),kb(R)&&zu(R,s,n);const _=R[0],$=S1[_];if($){const{incompatibleTokens:se}=$;if(Array.isArray(se)){const ie=x.find(ue=>se.includes(ue.token)||ue.token===_);if(ie)throw new RangeError(`The format string mustn't contain \`${ie.fullToken}\` and \`${R}\` at the same time`)}else if($.incompatibleTokens==="*"&&x.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);x.push({token:_,fullToken:R});const q=$.run(n,R,m.match,g);if(!q)return c();p.push(q.setter),n=q.rest}else{if(_.match(E1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");if(R==="''"?R="'":_==="'"&&(R=O1(R)),n.indexOf(R)===0)n=n.slice(R.length);else return c()}}if(n.length>0&&M1.test(n))return c();const N=p.map(R=>R.priority).sort((R,_)=>_-R).filter((R,_,$)=>$.indexOf(R)===_).map(R=>p.filter(_=>_.priority===R).sort((_,$)=>$.subPriority-_.subPriority)).map(R=>R[0]);let D=nt(r,o==null?void 0:o.in);if(isNaN(+D))return c();const A={};for(const R of N){if(!R.validate(D,g))return c();const _=R.set(D,A,g);Array.isArray(_)?(D=_[0],Object.assign(A,_[1])):D=_}return D}function O1(n){return n.match(A1)[1].replace(T1,"'")}function Hr(n,s){return Av(St(n,n),bb(n))}function R1(n,s,r){const o=+nt(n,r==null?void 0:r.in),[c,u]=[+nt(s.start,r==null?void 0:r.in),+nt(s.end,r==null?void 0:r.in)].sort((m,b)=>m-b);return o>=c&&o<=u}function Qt(n,s){const r=()=>St(s==null?void 0:s.in,NaN),c=_1(n);let u;if(c.date){const g=z1(c.date,2);u=I1(g.restDateString,g.year)}if(!u||isNaN(+u))return r();const m=+u;let b=0,h;if(c.time&&(b=H1(c.time),isNaN(b)))return r();if(c.timezone){if(h=q1(c.timezone),isNaN(h))return r()}else{const g=new Date(m+b),p=nt(0,s==null?void 0:s.in);return p.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),p.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),p}return nt(m+b+h,s==null?void 0:s.in)}const Io={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},L1=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,P1=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,B1=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _1(n){const s={},r=n.split(Io.dateTimeDelimiter);let o;if(r.length>2)return s;if(/:/.test(r[0])?o=r[0]:(s.date=r[0],o=r[1],Io.timeZoneDelimiter.test(s.date)&&(s.date=n.split(Io.timeZoneDelimiter)[0],o=n.substr(s.date.length,n.length))),o){const c=Io.timezone.exec(o);c?(s.time=o.replace(c[1],""),s.timezone=c[1]):s.time=o}return s}function z1(n,s){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),o=n.match(r);if(!o)return{year:NaN,restDateString:""};const c=o[1]?parseInt(o[1]):null,u=o[2]?parseInt(o[2]):null;return{year:u===null?c:u*100,restDateString:n.slice((o[1]||o[2]).length)}}function I1(n,s){if(s===null)return new Date(NaN);const r=n.match(L1);if(!r)return new Date(NaN);const o=!!r[4],c=ai(r[1]),u=ai(r[2])-1,m=ai(r[3]),b=ai(r[4]),h=ai(r[5])-1;if(o)return F1(s,b,h)?U1(s,b,h):new Date(NaN);{const g=new Date(0);return!$1(s,u,m)||!Y1(s,c)?new Date(NaN):(g.setUTCFullYear(s,u,Math.max(c,m)),g)}}function ai(n){return n?parseInt(n):1}function H1(n){const s=n.match(P1);if(!s)return NaN;const r=vu(s[1]),o=vu(s[2]),c=vu(s[3]);return V1(r,o,c)?r*Ku+o*Wu+c*1e3:NaN}function vu(n){return n&&parseFloat(n.replace(",","."))||0}function q1(n){if(n==="Z")return 0;const s=n.match(B1);if(!s)return 0;const r=s[1]==="+"?-1:1,o=parseInt(s[2]),c=s[3]&&parseInt(s[3])||0;return Q1(o,c)?r*(o*Ku+c*Wu):NaN}function U1(n,s,r){const o=new Date(0);o.setUTCFullYear(n,0,4);const c=o.getUTCDay()||7,u=(s-1)*7+r+1-c;return o.setUTCDate(o.getUTCDate()+u),o}const G1=[31,null,31,30,31,30,31,31,30,31,30,31];function Mb(n){return n%400===0||n%4===0&&n%100!==0}function $1(n,s,r){return s>=0&&s<=11&&r>=1&&r<=(G1[s]||(Mb(n)?29:28))}function Y1(n,s){return s>=1&&s<=(Mb(n)?366:365)}function F1(n,s,r){return s>=1&&s<=53&&r>=0&&r<=6}function V1(n,s,r){return n===24?s===0&&r===0:r>=0&&r<60&&s>=0&&s<60&&n>=0&&n<25}function Q1(n,s){return s>=0&&s<=59}function X1(n,s,r){return mb(n,-1,r)}const Z1=({isOpen:n,onClose:s,title:r,children:o,size:c="lg",closeOnBackdropClick:u=!0})=>{if(!n)return null;const m={lg:"max-w-lg","4xl":"max-w-4xl"}[c],b=()=>{u&&s()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",onClick:b,children:l.jsxs("div",{className:`bg-white dark:bg-dark-card rounded-lg shadow-xl w-full ${m} p-6 m-4`,onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-dark-text dark:text-dark-text-primary",children:r}),l.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{children:o})]})})},ut=Xe.memo(Z1),af=({slipData:n,onClose:s,appSettings:r})=>{const{patient:o,queueNumber:c}=n,{slipSettings:u}=r,m=()=>{const b=window.open("","","height=500,width=400");if(!b){alert("Could not open print window. Please disable your pop-up blocker.");return}const h=`
      <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; text-align: center; border: 2px solid #0A74DA; padding: 20px; border-radius: 8px; width: 300px; margin: 20px auto; display: flex; flex-direction: column; align-items: center;">
        ${u.showLogo&&r.appLogo?`<img src="${r.appLogo}" alt="Logo" style="max-height: 60px; margin-bottom: 10px;" />`:""}
        ${u.showClinicName?`<h1 style="font-size: 20px; font-weight: bold; color: #0A74DA; margin: 0 0 5px 0;">${r.appName}</h1>`:""}
        <h2 style="font-size: 16px; color: #4B5563; margin: 0; font-weight: normal;">${u.title}</h2>
        <div style="border-top: 1px dashed #ccc; border-bottom: 1px dashed #ccc; padding: 20px 0; margin: 15px 0; width: 100%;">
          <div style="font-size: 14px; color: #6B7280;">Queue Number</div>
          <div style="font-size: 72px; font-weight: bold; color: #1F2937; margin: 10px 0; line-height: 1;">${c}</div>
          <div style="font-size: 24px; font-weight: 500; color: #1F2937;">${o.name}</div>
        </div>
        <p style="font-size: 12px; color: #6B7280;">${u.footerText}</p>
        <p style="margin-top: 15px; font-size: 12px; color: #6B7280;">Generated: ${new Date().toLocaleString()}</p>
      </div>
    `;b.document.write(`<html><head><title>Queue Slip</title></head><body style="display: flex; justify-content: center; align-items: center;">${h}</body></html>`),b.document.close(),b.focus(),setTimeout(()=>{b.print(),b.close(),s()},250)};return w.useEffect(()=>{const b=h=>{h.key==="Enter"&&(h.preventDefault(),m())};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[o,c,r]),l.jsxs("div",{children:[l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"border-2 border-dashed border-gray-300 p-6 my-4 rounded-lg flex flex-col items-center",children:[u.showLogo&&r.appLogo&&l.jsx("img",{src:r.appLogo,alt:"Logo",className:"max-h-16 mb-2"}),u.showClinicName&&l.jsx("h1",{className:"text-xl font-bold text-brand-blue",children:r.appName}),l.jsx("h2",{className:"text-lg text-gray-600 dark:text-gray-300",children:u.title}),l.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Queue Number"}),l.jsx("p",{className:"text-8xl font-bold my-2 text-brand-blue",children:c}),l.jsx("p",{className:"text-3xl font-semibold",children:o.name}),l.jsx("p",{className:"text-sm text-gray-500 mt-4",children:u.footerText}),l.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Generated: ",new Date().toLocaleString()]})]})}),l.jsxs("div",{className:"flex gap-4 mt-6",children:[l.jsxs("button",{onClick:m,className:"w-full flex justify-center items-center gap-2 bg-brand-blue text-white p-2 rounded-md hover:bg-brand-blue-dark",children:[l.jsx(Ur,{className:"w-5 h-5"}),"Print Slip"]}),l.jsx("button",{onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300",children:"Close"})]})]})},W1=({isOpen:n,onClose:s,patientName:r,availableSurgeries:o,onAssign:c})=>n?l.jsx(ut,{isOpen:n,onClose:s,title:`Assign ${r}`,children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-lg mb-4",children:"A surgery is available. Where would you like to send this patient?"}),l.jsxs("div",{className:"space-y-3",children:[o.map(u=>l.jsxs("button",{onClick:()=>c(u),className:"w-full bg-brand-blue text-white p-3 rounded-lg hover:bg-brand-blue-dark font-semibold",children:["Send to ",u]},u)),l.jsx("button",{onClick:()=>c("Waiting"),className:"w-full bg-gray-200 text-gray-700 p-3 rounded-lg hover:bg-gray-300 font-semibold",children:"Send to Waiting Room"})]})]})}):null,wu=({title:n,value:s,color:r,onClick:o})=>l.jsxs("button",{onClick:o,className:"bg-white dark:bg-dark-card p-4 rounded-lg shadow-md border border-gray-200 dark:border-dark-border text-center transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-blue","aria-label":`View ${n} patients`,children:[l.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:n}),l.jsx("p",{className:`text-3xl font-bold ${r}`,children:s})]}),bh=({surgery:n,patientName:s,onClick:r})=>{const o=l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:n}),s?l.jsx("p",{className:"font-bold text-lg text-blue-600 dark:text-blue-300 truncate",children:s}):l.jsx("p",{className:"font-medium text-green-600 dark:text-green-400",children:"Available"})]}),c="p-4 rounded-lg text-center transition-all duration-300 ease-in-out",u="bg-blue-50 dark:bg-blue-900/40 border border-blue-200 dark:border-blue-700",m="bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700";return r?l.jsx("button",{onClick:r,className:`${c} ${s?u:m} w-full`,children:o}):l.jsx("div",{className:`${c} ${s?u:m}`,children:o})},K1=({dailyQueue:n,onStatClick:s,startTreatmentProcess:r,canResetQueue:o,onResetQueue:c})=>{var m,b;const u=w.useMemo(()=>{const h=n.queue;return{completed:h.filter(g=>g.status==="Completed").length,cancelled:h.filter(g=>g.status==="Cancelled").length,total:h.length,surgery1Patient:h.find(g=>g.status==="In Surgery 1"),surgery2Patient:h.find(g=>g.status==="In Surgery 2")}},[n]);return l.jsxs("div",{className:"bg-white dark:bg-dark-card p-6 rounded-lg shadow-md border border-gray-200 dark:border-dark-border flex flex-col lg:h-full transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1 relative",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-dark-text dark:text-dark-text-primary",children:"Today's Queue Stats"}),o&&l.jsx("button",{onClick:c,className:"bg-red-500 text-white px-4 py-1.5 rounded-lg border border-red-300 shadow-md font-semibold text-sm transition-all duration-200 ease-in-out hover:bg-red-600 hover:shadow-xl hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2",style:{boxShadow:"0 4px 16px 0 rgba(220,38,38,0.10)"},title:"Reset Queue",children:"Reset Queue"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[l.jsx(wu,{title:"Total Visits",value:u.total,color:"text-indigo-500",onClick:()=>s("Total Visits")}),l.jsx(wu,{title:"Completed",value:u.completed,color:"text-green-500",onClick:()=>s("Completed")}),l.jsx(wu,{title:"Cancelled",value:u.cancelled,color:"text-red-500",onClick:()=>s("Cancelled")})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-dark-border",children:[l.jsx(bh,{surgery:"Surgery 1",patientName:(m=u.surgery1Patient)==null?void 0:m.patient.name,onClick:u.surgery1Patient?()=>r(u.surgery1Patient.patient.id):void 0}),l.jsx(bh,{surgery:"Surgery 2",patientName:(b=u.surgery2Patient)==null?void 0:b.patient.name,onClick:u.surgery2Patient?()=>r(u.surgery2Patient.patient.id):void 0})]})]})},J1=Xe.memo(K1),Yr=()=>{const n=w.useContext(sb);if(n===void 0)throw new Error("useNotification must be used within a NotificationProvider");return n},rf=({isOpen:n,onClose:s,onConfirm:r,patientName:o,closeOnBackdropClick:c=!0})=>{const[u,m]=w.useState(""),{showNotification:b}=Yr(),h=()=>{if(!u.trim()){b("Please provide a reason for cancellation.","error");return}r(u)};return l.jsx(ut,{isOpen:n,onClose:s,title:`Cancel Appointment for ${o}`,closeOnBackdropClick:c,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cancellation-reason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason for Cancellation"}),l.jsx("textarea",{id:"cancellation-reason",value:u,onChange:g=>m(g.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:4,placeholder:"e.g., Patient requested to reschedule, No-show...",required:!0})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:s,className:"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:"Go Back"}),l.jsx("button",{type:"button",onClick:h,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Confirm Cancellation"})]})]})})},Hn=n=>{if(!n)return null;const s=new Date(n);return isNaN(s.getTime())?null:s},ew=(n,s)=>{if(!n)return null;try{const r=ln(n,"HH:mm:ss",s);return isNaN(r.getTime())?null:r}catch{return null}},tw=({onSubmit:n,onClose:s})=>{const[r,o]=w.useState(""),[c,u]=w.useState(""),[m,b]=w.useState(""),[h,g]=w.useState(""),[p,v]=w.useState(""),[x,N]=w.useState(""),D=A=>{A.preventDefault(),n({name:r,phone:c,reason:m,gender:h,email:p,address:x,dob:"",medicalHistory:""})};return l.jsxs("form",{onSubmit:D,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Patient Name"}),l.jsx("input",{id:"walkin-name",type:"text",placeholder:"Full Name",value:r,onChange:A=>o(A.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),l.jsx("input",{id:"walkin-phone",type:"tel",placeholder:"+92 300-1234567",value:c,onChange:A=>u(A.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),l.jsx("input",{id:"walkin-email",type:"email",placeholder:"patient@example.com",value:p,onChange:A=>v(A.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-gender",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gender"}),l.jsxs("select",{id:"walkin-gender",value:h,onChange:A=>g(A.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"})]})]})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{htmlFor:"walkin-address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),l.jsx("textarea",{id:"walkin-address",placeholder:"123 Dental Lane, Toothville",value:x,onChange:A=>N(A.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{htmlFor:"walkin-reason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason for Visit"}),l.jsx("textarea",{id:"walkin-reason",placeholder:"e.g., Toothache, broken tooth",value:m,onChange:A=>b(A.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:3,required:!0})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white p-2 rounded-md hover:bg-brand-blue-dark",children:"Add & Assign"})]})]})},nw=({appointment:n,patient:s,onReschedule:r,onCancel:o})=>{const[c,u]=w.useState(!1),m=w.useRef(null);w.useEffect(()=>{const h=g=>{m.current&&!m.current.contains(g.target)&&u(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const b=h=>{h(),u(!1)};return s?l.jsxs("div",{className:"relative",ref:m,onClick:h=>h.stopPropagation(),children:[l.jsxs("button",{onClick:()=>u(h=>!h),className:"flex items-center gap-2 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-3 py-1.5 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:[l.jsx(ob,{className:"h-4 w-4"}),"Actions"]}),c&&l.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-dark-card rounded-md shadow-lg z-10 border border-gray-200 dark:border-dark-border",children:l.jsxs("div",{className:"py-1",children:[l.jsx("button",{onClick:()=>b(()=>r(n)),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Reschedule"}),l.jsx("button",{onClick:()=>b(()=>o(n)),className:"block w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/20",children:"Cancel"})]})})]}):null},aw=()=>{const{users:n,patients:s,appointments:r,transactions:o,treatments:c,handleSetCurrentView:u,dailyQueue:m,addPatientToQueue:b,addWalkInPatient:h,assignPatientToSurgery:g,startTreatmentProcess:p,cancelAppointment:v,openEditTreatmentModal:x,requestDeleteTreatment:N,handlePrintPatientReport:D,handlePrintSingleTreatment:A,openManualTransactionModal:j,requestDeleteExpense:O,openPatientModal:T,requestDeletePatient:I,openAppointmentModal:R,openDayBook:_,resetQueueManually:$,currentUser:se}=Dt(),q=new Date,ie=ye(q,"yyyy-MM-dd"),[ue,K]=w.useState(null),[me,Me]=w.useState(!1),[Z,Ae]=w.useState(null),[E,W]=w.useState(null),[ce,pe]=w.useState(null),[S,F]=w.useState(null),[B,X]=w.useState(!1),[te,Te]=w.useState(!1),we=r.filter(ne=>ne.date===ie&&(ne.status==="Scheduled"||ne.status==="Cancelled")),{income:oe,expenses:xe}=w.useMemo(()=>{const ne=o.filter(le=>{const ve=Hn(le.date);return ve&&Hr(ve)&&le.status==="active"});return{income:ne.filter(le=>le.type==="income").reduce((le,ve)=>le+ve.amount,0),expenses:ne.filter(le=>le.type==="expense").reduce((le,ve)=>le+ve.amount,0)}},[o]),_e=w.useMemo(()=>{const ne=[];return c.forEach(le=>{var Y,Ee;const ve=Hn(le.date);ve&&Hr(ve)&&ne.push({id:`treat-${le.id}`,date:ve,type:"treatment",patientName:((Y=s.find(Be=>Be.id===le.patientId))==null?void 0:Y.name)||"Unknown Patient",description:(le.procedures||[]).map(Be=>Be.procedureName).join(", "),amount:le.finalAmount,originalData:le,userName:(Ee=n.find(Be=>Be.id===le.userId))==null?void 0:Ee.username})}),o.forEach(le=>{var Y;const ve=Hn(le.date);!le.treatmentId&&le.status==="active"&&ve&&Hr(ve)&&ne.push({id:`manual-${le.id}`,date:ve,type:le.type,description:le.description,amount:le.amount,originalData:le,userName:(Y=n.find(Ee=>Ee.id===le.userId))==null?void 0:Y.username})}),s.forEach(le=>{const ve=Hn(le.createdAt);ve&&Hr(ve)&&ne.push({id:`new-${le.id}`,date:ve,type:"new_patient",patientName:le.name,description:"New patient record created.",originalData:le})}),r.forEach(le=>{const ve=Hn(le.createdAt);ve&&Hr(ve)&&!le.updatedAt&&ne.push({id:`new-app-${le.id}`,date:ve,type:"new_appointment",patientName:le.patientName,description:`Appointment for ${le.date?ye(Hn(le.date)||new Date,"MMM d"):"N/A"} @ ${le.time}`,originalData:le});const Y=Hn(le.updatedAt);Y&&Hr(Y)&&ne.push({id:`resched-app-${le.id}`,date:Y,type:"rescheduled_appointment",patientName:le.patientName,description:`Rescheduled to ${le.date?ye(Hn(le.date)||new Date,"MMM d"):"N/A"} @ ${le.time}`,originalData:le}),le.cancellationDate&&le.cancellationDate===ye(q,"yyyy-MM-dd")&&ne.push({id:`cancel-app-${le.id}`,date:new Date,type:"cancelled_appointment",patientName:le.patientName,description:`Cancelled appointment for ${le.date?ye(Hn(le.date)||new Date,"MMM d"):"N/A"}`,originalData:le})}),ne.sort((le,ve)=>ve.date.getTime()-le.date.getTime())},[c,o,s,n,r]),$e=()=>{const ne=[];return m.queue.some(le=>le.status==="In Surgery 1")||ne.push("Surgery 1"),m.queue.some(le=>le.status==="In Surgery 2")||ne.push("Surgery 2"),ne},qe=async ne=>{if(!ne)return;const le=m.queue.find(Y=>Y.patient.id===ne.id&&Y.status!=="Completed"&&Y.status!=="Cancelled");if(le){K({patient:ne,queueNumber:le.queueNumber});return}W(ne);const ve=$e();if(ve.length>0)Ae({patient:ne,availableSurgeries:ve});else{const Y=await b(ne,"Waiting");K({patient:ne,queueNumber:Y}),W(null)}},Ye=async ne=>{if(!E)return;const le=await b(E,ne);K({patient:E,queueNumber:le}),Ae(null),W(null)},ae=async ne=>{const le=$e(),{patient:ve,queueNumber:Y}=await h({...ne});Me(!1),le.length>0?(W(ve),Ae({patient:ve,availableSurgeries:le})):K({patient:ve,queueNumber:Y})},be=ne=>{K({patient:ne.patient,queueNumber:ne.queueNumber})},Se=ne=>{let le="",ve=[];switch(ne){case"Waiting":le="Patients Waiting",ve=m.queue.filter(Y=>Y.status==="Waiting");break;case"In Surgery":le="Patients In Surgery",ve=m.queue.filter(Y=>Y.status.startsWith("In Surgery"));break;case"Completed":le="Completed Visits",ve=m.queue.filter(Y=>Y.status==="Completed");break;case"Cancelled":le="Cancelled Visits",ve=m.queue.filter(Y=>Y.status==="Cancelled");break;case"Total Visits":le="All Visits Today",ve=m.queue;break}pe({title:le,patients:ve.sort((Y,Ee)=>Y.queueNumber-Ee.queueNumber)})},lt=ne=>{switch(ne){case"In Surgery 1":return"bg-blue-200 text-blue-800 dark:bg-blue-300 dark:text-blue-900";case"In Surgery 2":return"bg-teal-200 text-teal-800 dark:bg-teal-300 dark:text-teal-900";case"Waiting":return"bg-yellow-200 text-yellow-800 dark:bg-yellow-300 dark:text-yellow-900";case"Completed":return"bg-green-200 text-green-800 dark:bg-green-300 dark:text-green-900";case"Cancelled":return"bg-red-200 text-red-800 dark:bg-red-300 dark:text-red-900";default:return"bg-gray-200 text-gray-800 dark:bg-gray-400 dark:text-gray-900"}},ge=ne=>{S&&(v(S.id,ne),F(null))},tt=se==null?void 0:se.permissions.includes("ACCOUNTING"),tn=()=>{m.queue.length>0?Te(!0):$()};return l.jsxs("div",{className:"p-4 md:p-8 lg:h-full",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:h-full",children:[l.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6 lg:min-h-0",children:[l.jsx("div",{className:"relative",children:l.jsx(J1,{dailyQueue:m,onStatClick:Se,startTreatmentProcess:p,canResetQueue:tt,onResetQueue:tn})}),l.jsx("div",{className:"bg-white dark:bg-dark-card p-6 rounded-lg shadow-md border border-gray-200 dark:border-dark-border lg:flex-grow flex flex-col lg:min-h-0 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:l.jsx(kv,{onAddExistingPatient:qe,onPrintSlip:be})}),l.jsx("button",{onClick:()=>Me(!0),className:"w-full bg-white dark:bg-dark-card text-brand-blue border border-brand-blue p-3 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-700 font-semibold shadow-md dark:text-blue-400 dark:border-blue-400 flex-shrink-0 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:"Add Walk-in to Queue"})]}),l.jsx("div",{className:"lg:col-span-1 flex flex-col gap-6 lg:min-h-0",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card p-6 rounded-lg shadow-md border border-gray-200 dark:border-dark-border flex flex-col lg:h-full transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary flex-shrink-0",children:["Today's Appointments (",we.length,")"]}),l.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2 max-h-80 lg:max-h-full",children:l.jsx("ul",{className:"space-y-3",children:we.length>0?we.sort((ne,le)=>ne.time.localeCompare(le.time)).map(ne=>{const le=s.find(Y=>Y.id===ne.patientId),ve=m.queue.find(Y=>Y.patient.id===ne.patientId&&Y.status!=="Completed"&&Y.status!=="Cancelled");return l.jsxs("li",{className:`p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg transition-all duration-200 ease-in-out hover:shadow-lg hover:-translate-y-px border border-gray-200 dark:border-gray-700 ${ne.status==="Cancelled"?"opacity-60":""} ${ne.status==="Scheduled"&&le&&!ve?"cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20":""}`,onClick:()=>{ne.status==="Scheduled"&&le&&!ve&&qe(le)},children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:ne.patientName}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:le==null?void 0:le.phone}),l.jsx("p",{className:"font-bold text-gray-600 dark:text-gray-300 mt-1",children:ne.reason})]}),l.jsx("span",{className:`font-mono text-brand-blue bg-blue-100 dark:bg-blue-500/20 dark:text-blue-300 px-2 py-1 rounded flex-shrink-0 ${ne.status==="Cancelled"?"line-through":""}`,children:(()=>{const Y=ew(ne.time,new Date);return Y?ye(Y,"p"):"Invalid time"})()})]}),ne.status==="Scheduled"&&l.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[ve?l.jsx("span",{className:`text-xs font-semibold px-3 py-1 rounded-full ${lt(ve.status)}`,children:ve.status}):l.jsx("span",{className:"text-xs text-gray-500 italic",children:"Waiting for check-in"}),l.jsx(nw,{appointment:ne,patient:le,onReschedule:Y=>R({existingAppointment:Y}),onCancel:F})]}),ne.status==="Cancelled"&&l.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700 text-red-500 dark:text-red-400 text-center",children:[l.jsx("p",{className:"font-bold",children:"Cancelled"}),ne.cancellationReason&&l.jsxs("p",{className:"text-xs italic",children:["Reason: ",ne.cancellationReason]})]})]},ne.id)}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 pt-16",children:"No appointments scheduled for today."})})})]})}),l.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6 lg:min-h-0",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-card p-6 rounded-lg shadow-md border border-gray-200 dark:border-dark-border flex-shrink-0 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("button",{onClick:()=>X(ne=>!ne),className:"w-full flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h3",{className:"text-xl font-bold text-dark-text dark:text-dark-text-primary",children:"Today's Financials"}),_?l.jsx("span",{className:"text-xs font-bold bg-green-200 text-green-800 dark:bg-green-300 dark:text-green-900 px-2 py-0.5 rounded-full",children:"Open"}):l.jsx("span",{className:"text-xs font-bold bg-red-200 text-red-800 dark:bg-red-300 dark:text-red-900 px-2 py-0.5 rounded-full",children:"Closed"})]}),B?l.jsx(ci,{className:"h-6 w-6 text-gray-500"}):l.jsx(Zu,{className:"h-6 w-6 text-gray-500"})]}),l.jsxs("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${B?"max-h-96 mt-4":"max-h-0"}`,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 bg-green-50 dark:bg-green-500/10 rounded-lg border border-green-200 dark:border-green-500/20",children:[l.jsx("p",{className:"font-medium text-green-800 dark:text-green-300",children:"Income"}),l.jsxs("p",{className:"font-bold text-lg text-green-600 dark:text-green-400",children:["PKR ",Number(oe||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between items-center p-4 bg-red-50 dark:bg-red-500/10 rounded-lg border border-red-200 dark:border-red-500/20",children:[l.jsx("p",{className:"font-medium text-red-800 dark:text-red-300",children:"Expenses"}),l.jsxs("p",{className:"font-bold text-lg text-red-600 dark:text-red-400",children:["PKR ",Number(xe||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 dark:bg-blue-500/10 rounded-lg border border-blue-200 dark:border-blue-500/20",children:[l.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Net Flow"}),l.jsxs("p",{className:`font-bold text-lg ${Number(oe||0)-Number(xe||0)>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:["PKR ",Number((oe||0)-(xe||0)).toFixed(2)]})]})]}),l.jsx("button",{onClick:()=>u("ACCOUNTING"),className:"mt-6 w-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 p-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:"View Full Ledger"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-card p-6 rounded-lg shadow-md border border-gray-200 dark:border-dark-border lg:flex-grow flex flex-col lg:min-h-0 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary flex-shrink-0",children:"Today's Activity"}),l.jsx("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2 max-h-80 lg:max-h-full",children:l.jsx("ul",{className:"space-y-3",children:_e.length>0?_e.map(ne=>{let le,ve=[];switch(ne.type){case"treatment":le=l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:ne.patientName}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs font-bold",title:ne.description,children:ne.description}),l.jsxs("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["PKR ",(isFinite(Number(ne.amount))?Number(ne.amount):0).toFixed(2)]})]}),ve.push(l.jsx("button",{onClick:()=>A(ne.originalData.id),className:"p-1.5 text-gray-500 hover:text-indigo-500 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Print Treatment Record",children:l.jsx(Ur,{className:"h-5 w-5"})},"print"),l.jsx("button",{onClick:()=>x(ne.originalData),className:"p-1.5 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Edit Treatment",children:l.jsx(Sa,{className:"h-5 w-5"})},"edit"),l.jsx("button",{onClick:()=>N(ne.originalData.id),className:"p-1.5 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20",title:"Delete Treatment",children:l.jsx(Gn,{className:"h-5 w-5"})},"delete"));break;case"income":case"expense":le=l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:ne.description}),l.jsxs("p",{className:`text-sm font-semibold ${ne.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[ne.type==="expense"&&"- ","PKR ",(isFinite(Number(ne.amount))?Number(ne.amount):0).toFixed(2)]})]}),ve.push(l.jsx("button",{onClick:()=>j({type:ne.type,transaction:ne.originalData}),className:"p-1.5 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Edit Transaction",children:l.jsx(Sa,{className:"h-5 w-5"})},"edit"),l.jsx("button",{onClick:()=>O(ne.originalData.id),className:"p-1.5 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20",title:"Delete Transaction",children:l.jsx(Gn,{className:"h-5 w-5"})},"delete"));break;case"new_patient":le=l.jsxs("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:["New Patient: ",l.jsx("span",{className:"font-bold",children:ne.patientName})]}),ve.push(l.jsx("button",{onClick:()=>T(ne.originalData),className:"p-1.5 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Edit Patient",children:l.jsx(Sa,{className:"h-5 w-5"})},"edit"));break;case"new_appointment":le=l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:["New Appt: ",l.jsx("span",{className:"font-bold",children:ne.patientName})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ne.description})]}),ve.push(l.jsx("button",{onClick:()=>R({existingAppointment:ne.originalData}),className:"p-1.5 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Reschedule Appointment",children:l.jsx(Yo,{className:"h-5 w-5"})},"edit"),l.jsx("button",{onClick:()=>F(ne.originalData),className:"p-1.5 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20",title:"Cancel Appointment",children:l.jsx(Gn,{className:"h-5 w-5"})},"delete"));break;case"rescheduled_appointment":le=l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:["Appt. Rescheduled: ",l.jsx("span",{className:"font-bold",children:ne.patientName})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ne.description})]}),ve.push(l.jsx("button",{onClick:()=>R({existingAppointment:ne.originalData}),className:"p-1.5 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Reschedule Appointment",children:l.jsx(Yo,{className:"h-5 w-5"})},"edit"));break;case"cancelled_appointment":le=l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary text-red-600 dark:text-red-400",children:["Appt. Cancelled: ",l.jsx("span",{className:"font-bold",children:ne.patientName})]}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ne.description}),l.jsxs("p",{className:"text-xs italic text-gray-500 dark:text-gray-400",children:["Reason: ",ne.originalData.cancellationReason]})]});break}return l.jsxs("li",{className:"flex items-start justify-between gap-4 bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg border border-gray-200 dark:border-dark-border transition-all duration-200 ease-in-out hover:shadow-lg hover:-translate-y-px",children:[l.jsxs("div",{className:"flex-grow",children:[le,l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Sb(ne.date,{addSuffix:!0}),ne.userName&&l.jsxs("span",{className:"font-semibold",children:[" by ",ne.userName]})]})]}),ve.length>0&&l.jsx("div",{className:"flex-shrink-0 flex items-center gap-1 self-center",children:ve})]},ne.id)}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No activity recorded today."})})})]})]})]}),l.jsx(ut,{isOpen:me,onClose:()=>Me(!1),title:"Add Walk-in to Queue",closeOnBackdropClick:!1,children:l.jsx(tw,{onSubmit:ae,onClose:()=>Me(!1)})}),ue&&l.jsx(ut,{isOpen:!!ue,onClose:()=>K(null),title:"Queue Slip Confirmation",children:l.jsx(af,{slipData:ue,onClose:()=>K(null),appSettings:Dt().appSettings})}),Z&&l.jsx(W1,{isOpen:!!Z,onClose:()=>Ae(null),patientName:Z.patient.name,availableSurgeries:Z.availableSurgeries,onAssign:Ye}),ce&&l.jsx(ut,{isOpen:!!ce,onClose:()=>pe(null),title:ce.title,children:l.jsxs("ul",{className:"space-y-3 max-h-96 overflow-y-auto",children:[ce.patients.map(ne=>{let le=null;if(ne.status.startsWith("In Surgery")){const ve=r.find(Y=>Y.patientId===ne.patient.id&&Y.date===ie&&Y.status!=="Cancelled");ve&&(le=l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 pl-8",children:["Reason: ",ve.reason]}))}else if(ne.status==="Completed"){const ve=c.filter(Y=>Y.patientId===ne.patient.id&&ye(Hn(Y.date)||new Date,"yyyy-MM-dd")===ie).sort((Y,Ee)=>{const Be=Hn(Y.date),We=Hn(Ee.date);return((We==null?void 0:We.getTime())||0)-((Be==null?void 0:Be.getTime())||0)})[0];ve&&(le=l.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 pl-8",children:[l.jsxs("p",{children:["Treatment: ",(ve.procedures||[]).map(Y=>Y.procedureName).join(", ")]}),l.jsxs("p",{children:["Payment: PKR ",(isFinite(Number(ve.finalAmount))?Number(ve.finalAmount):0).toFixed(2)]})]}))}return l.jsxs("li",{className:"bg-gray-100 dark:bg-gray-800/60 p-3 rounded-lg border border-gray-200 dark:border-dark-border/50",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{className:"font-medium text-dark-text dark:text-dark-text-primary",children:[l.jsxs("span",{className:"font-bold text-brand-blue mr-3",children:[ne.queueNumber,"."]}),ne.patient.name]}),l.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${lt(ne.status)}`,children:ne.status})]}),le]},ne.patient.id)}),ce.patients.length===0&&l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No patients in this category."})]})}),S&&l.jsx(rf,{isOpen:!!S,onClose:()=>F(null),onConfirm:ge,patientName:S.patientName}),te&&l.jsx(ut,{isOpen:te,onClose:()=>Te(!1),title:"Confirm Queue Reset",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-red-600 font-semibold",children:"There are still patients in the queue. Resetting will remove all waiting patients."}),l.jsx("p",{children:"Are you sure you want to reset the queue?"}),l.jsxs("div",{className:"flex gap-4 justify-end mt-6",children:[l.jsx("button",{onClick:()=>Te(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),l.jsx("button",{onClick:async()=>{Te(!1),await $()},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Yes, Reset Queue"})]})]})})]})},rw=Xe.memo(aw),lw=({currentPage:n,totalPages:s,onPageChange:r})=>{if(s<=1)return null;const c=(()=>{const u=[],b=Math.floor(2.5);if(s<=5)for(let h=1;h<=s;h++)u.push(h);else{u.push(1),n>b+2&&u.push("...");let h=Math.max(2,n-b),g=Math.min(s-1,n+b);n<=b+1&&(h=2,g=4),n>=s-b&&(h=s-5+2,g=s-1);for(let p=h;p<=g;p++)u.push(p);n<s-b-1&&u.push("..."),u.push(s)}return u})();return l.jsx("div",{className:"flex justify-end items-center mt-6",children:l.jsx("nav",{"aria-label":"Pagination",children:l.jsxs("ul",{className:"inline-flex items-center -space-x-px text-sm",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>r(n-1),disabled:n===1,className:"flex items-center justify-center px-4 h-10 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"})}),c.map((u,m)=>l.jsx("li",{children:typeof u=="number"?l.jsx("button",{onClick:()=>r(u),className:`flex items-center justify-center px-4 h-10 leading-tight border border-gray-300 dark:border-gray-700 ${n===u?"z-10 text-white bg-brand-blue hover:bg-brand-blue-dark dark:bg-brand-blue dark:text-white font-bold":"text-gray-500 bg-white hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"}`,children:u}):l.jsx("span",{className:"flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",children:u})},m)),l.jsx("li",{children:l.jsx("button",{onClick:()=>r(n+1),disabled:n===s,className:"flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})})]})})})},lc=Xe.memo(lw);function Eb(n,s){const[r,o]=w.useState(n);return w.useEffect(()=>{const c=setTimeout(()=>{o(n)},s);return()=>{clearTimeout(c)}},[n,s]),r}function sc(n){if(!n.startsWith("+92")||n.length!==13)return n;const s=n.slice(3);return`+92 ${s.slice(0,3)}-${s.slice(3)}`}const ic=({value:n,onChange:s,required:r=!1,label:o,placeholder:c="300-1234567",error:u,disabled:m=!1,name:b="phone",id:h="phone-input"})=>{const g=T=>T.replace(/[^0-9]/g,"").slice(0,10),[p,v]=w.useState(g(n)),[x,N]=w.useState(!1);w.useEffect(()=>{v(g(n))},[n]);const D=T=>T?T.length<=3?T:T.slice(0,3)+"-"+T.slice(3):"",A=T=>{const I=g(T.target.value);v(I),s(I)},j=p.length===10,O=x&&(!j||!!u);return l.jsxs("div",{className:"w-full",children:[o&&l.jsxs("label",{htmlFor:h,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o,r&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"inline-block px-2 py-2 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-l-md text-gray-600 dark:text-gray-300 font-mono select-none",children:"+92"}),l.jsx("input",{id:h,name:b,type:"tel",inputMode:"numeric",pattern:"[0-9]{3}-[0-9]{7}",maxLength:11,className:`w-full p-2 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none font-mono ${O?"border-red-500":""}`,placeholder:c,value:D(p),onChange:A,onBlur:()=>N(!0),required:r,disabled:m,autoComplete:"off"})]}),O&&l.jsx("div",{className:"text-xs text-red-600 mt-1",children:u||"Please enter a valid 10-digit number after +92 (e.g. 300-1234567)"})]})},Iu=(n,s)=>{if(!n)return"N/A";const r=new Date(n);if(isNaN(r.getTime()))return"N/A";try{return ye(r,s)}catch{return"N/A"}},Go=n=>{if(!n)return null;try{return yb(new Date,Qt(n))}catch{return null}},sw=Xe.memo(({onSelectPatient:n})=>{const{activePatients:s,requestDeletePatient:r,openPatientModal:o,openAppointmentModal:c,treatments:u,currentUser:m}=Dt(),[b,h]=w.useState(""),[g,p]=w.useState(1),[v,x]=w.useState({key:"createdAt",direction:"descending"}),N=10,D=Eb(b,300),A=w.useMemo(()=>{const q=new Map;return u.forEach(ie=>{const ue=q.get(ie.patientId)||[];ue.push(ie),q.set(ie.patientId,ue)}),q.forEach(ie=>ie.sort((ue,K)=>new Date(K.date).getTime()-new Date(ue.date).getTime())),q},[u]),j=w.useMemo(()=>{if(!D)return s;const q=D.toLowerCase();return s.filter(ie=>{var ue;return ie.name.toLowerCase().includes(q)||ie.phone.includes(D)||String(ie.id).includes(D)||((ue=A.get(ie.id))==null?void 0:ue.some(K=>String(K.id).includes(D)))})},[s,D,A]),O=w.useMemo(()=>{let q=[...j];return v!==null&&q.sort((ie,ue)=>{var Me,Z,Ae,E;let K,me;switch(v.key){case"age":K=Go(ie.dob)||-1,me=Go(ue.dob)||-1;break;case"balance":K=ie.balance||0,me=ue.balance||0;break;case"lastVisit":K=(Z=(Me=A.get(ie.id))==null?void 0:Me[0])!=null&&Z.date?new Date(A.get(ie.id)[0].date).getTime():0,me=(E=(Ae=A.get(ue.id))==null?void 0:Ae[0])!=null&&E.date?new Date(A.get(ue.id)[0].date).getTime():0;break;case"recordCount":K=(A.get(ie.id)||[]).length,me=(A.get(ue.id)||[]).length;break;default:K=ie[v.key],me=ue[v.key]}return K==null&&(K=typeof me=="string"?"":-1/0),me==null&&(me=typeof K=="string"?"":-1/0),K<me?v.direction==="ascending"?-1:1:K>me?v.direction==="ascending"?1:-1:0}),q},[j,v,A]);w.useEffect(()=>{p(1)},[D,v]);const T=Math.ceil(O.length/N),I=w.useMemo(()=>O.slice((g-1)*N,g*N),[O,g]),R=q=>{let ie="ascending";v&&v.key===q&&v.direction==="ascending"&&(ie="descending"),x({key:q,direction:ie})},_=q=>!v||v.key!==q?l.jsx(ci,{className:"h-4 w-4 inline ml-1 text-gray-400 opacity-50"}):v.direction==="ascending"?l.jsx(ci,{className:"h-4 w-4 inline ml-1"}):l.jsx(Zu,{className:"h-4 w-4 inline ml-1"}),$=m==null?void 0:m.permissions.includes("delete_patient"),se=q=>q>0?l.jsxs("span",{className:"text-red-600 dark:text-red-400 font-mono",children:["PKR ",q.toFixed(2)," ",l.jsx("span",{className:"text-xs ml-1",children:"Due"})]}):q<0?l.jsxs("span",{className:"text-blue-600 dark:text-green-400 font-mono",children:["PKR ",Math.abs(q).toFixed(2)," ",l.jsx("span",{className:"text-xs ml-1",children:"Advance"})]}):l.jsx("span",{className:"text-green-600 dark:text-green-400 font-mono",children:"Settled"});return l.jsxs("div",{className:"p-2 sm:p-4 md:p-8",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-2",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:"Patient Records"}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[l.jsxs("div",{className:"relative w-full sm:w-auto",children:[l.jsx("input",{type:"text",placeholder:"Search by name, phone, patient/treatment ID...",value:b,onChange:q=>h(q.target.value),className:"w-full max-w-xs sm:max-w-sm p-2 sm:p-3 pl-10 sm:pl-12 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none","aria-label":"Search patients"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),l.jsx("button",{onClick:()=>o(),className:"bg-brand-blue text-white px-3 py-2 sm:px-4 sm:py-2 rounded-lg hover:bg-brand-blue-dark text-sm sm:text-base",children:"Add New Patient"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border overflow-x-auto transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("div",{className:"sm:hidden text-xs text-gray-500 px-4 pt-2 pb-1",children:"Swipe left/right to see more columns"}),l.jsxs("table",{className:"min-w-max w-full text-xs sm:text-sm",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 font-semibold text-gray-600 dark:text-gray-300",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left w-20 sm:w-28 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>R("id"),children:["Patient ID ",_("id")]}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>R("name"),children:["Name ",_("name")]}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left w-24 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 hidden md:table-cell",onClick:()=>R("gender"),children:["Gender ",_("gender")]}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left w-20 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 hidden md:table-cell",onClick:()=>R("age"),children:["Age ",_("age")]}),l.jsx("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left",children:"Contact"}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-right w-32 sm:w-40 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>R("balance"),children:["Pending Balance ",_("balance")]}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left w-28 sm:w-36 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 hidden lg:table-cell",onClick:()=>R("lastVisit"),children:["Last Visit ",_("lastVisit")]}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-center w-16 sm:w-24 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 hidden lg:table-cell",onClick:()=>R("recordCount"),children:["Records ",_("recordCount")]}),l.jsxs("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-left w-28 sm:w-36 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 hidden xl:table-cell",onClick:()=>R("createdAt"),children:["Created On ",_("createdAt")]}),l.jsx("th",{className:"px-2 sm:px-4 py-2 sm:py-3 text-right",children:"Actions"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:[I.map(q=>{const ie=A.get(q.id),ue=ie!=null&&ie[0]?ye(Qt(ie[0].date),"dd MMM yyyy"):"N/A",K=(ie==null?void 0:ie.length)||0;return l.jsxs("tr",{className:"transition-colors hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-gray-500 dark:text-gray-400 font-mono whitespace-nowrap",children:q.id}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-dark-text dark:text-dark-text-primary font-semibold whitespace-nowrap",children:q.name}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-gray-600 dark:text-gray-400 whitespace-nowrap hidden md:table-cell",children:q.gender||"N/A"}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-gray-600 dark:text-gray-400 whitespace-nowrap hidden md:table-cell",children:Go(q.dob)||"N/A"}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-gray-600 dark:text-gray-400",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:sc(q.phone)}),l.jsx("span",{className:"text-xs",children:q.email})]})}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-right font-semibold",children:se(Number(q.balance)||0)}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-gray-600 dark:text-gray-400 whitespace-nowrap hidden lg:table-cell",children:ue}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-center text-gray-600 dark:text-gray-400 font-medium hidden lg:table-cell",children:K}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3 text-gray-600 dark:text-gray-400 whitespace-nowrap hidden xl:table-cell",children:Iu(q.createdAt,"dd MMM yyyy")}),l.jsx("td",{className:"px-2 sm:px-4 py-2 sm:py-3",children:l.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-1",children:[l.jsx("button",{onClick:()=>n(q),className:"text-xs bg-indigo-500 text-white px-2 py-1.5 sm:px-3 sm:py-1.5 rounded-md hover:bg-indigo-600 font-semibold",children:"Records"}),l.jsx("button",{onClick:()=>c({initialPatient:q}),title:"Set Appointment",className:"p-1 text-gray-500 dark:text-gray-400 hover:text-brand-blue dark:hover:text-blue-400 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(Yo,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),l.jsx("button",{onClick:()=>o(q),title:"Edit Patient",className:"p-1 text-gray-500 dark:text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(Sa,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),$&&l.jsx("button",{onClick:()=>r(q.id),title:"Archive Patient",className:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(Gn,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})})]},q.id)}),I.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:10,className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No patients found."})})]})]})]}),l.jsx(lc,{currentPage:g,totalPages:T,onPageChange:p})]})}),iw=Xe.memo(({patient:n,onBack:s})=>{const{treatments:r,doctors:o,openEditTreatmentModal:c,requestDeleteTreatment:u,startTreatmentProcess:m,handlePrintPatientReport:b,handlePrintSingleTreatment:h,currentUser:g,openPaymentModal:p}=Dt(),v=w.useMemo(()=>r.filter(T=>T.patientId===n.id).sort((T,I)=>new Date(I.date).getTime()-new Date(T.date).getTime()),[r,n.id]),x=Go(n.dob),N=({title:T,children:I,className:R})=>l.jsxs("div",{className:`bg-white dark:bg-dark-card shadow-lg rounded-xl border border-gray-200 dark:border-dark-border p-6 ${R}`,children:[l.jsx("h3",{className:"text-xl font-bold text-dark-text dark:text-dark-text-primary mb-4 border-b border-gray-200 dark:border-dark-border pb-2",children:T}),I]}),D=({label:T,value:I,isMono:R,className:_})=>l.jsxs("div",{className:_,children:[l.jsx("dt",{className:"font-medium text-gray-500 dark:text-gray-400 text-sm",children:T}),l.jsx("dd",{className:`mt-1 text-dark-text dark:text-dark-text-primary font-semibold ${R?"font-mono":""}`,children:I||"N/A"})]}),A=g==null?void 0:g.permissions.includes("delete_treatment");(Number(n.balance)||0)>0;const j=T=>{const I={Paid:"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-300","Partially Paid":"bg-yellow-100 text-yellow-800 dark:bg-yellow-500/20 dark:text-yellow-300",Unpaid:"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-300"};return l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${I[T]}`,children:T})},O=T=>T>0?l.jsxs("span",{className:"text-red-600 dark:text-red-400 font-mono",children:["PKR ",T.toFixed(2)," ",l.jsx("span",{className:"text-xs ml-1",children:"Due"})]}):T<0?l.jsxs("span",{className:"text-blue-600 dark:text-green-400 font-mono",children:["PKR ",Math.abs(T).toFixed(2)," ",l.jsx("span",{className:"text-xs ml-1",children:"Advance"})]}):l.jsx("span",{className:"text-green-600 dark:text-green-400 font-mono",children:"Settled"});return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex justify-between items-start gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:s,className:"mb-2 inline-flex items-center gap-2 px-3 py-1.5 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md shadow-sm text-gray-700 dark:text-gray-200 bg-white dark:bg-dark-card hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-blue",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),l.jsx("h2",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:n.name})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 mt-8",children:[l.jsxs("button",{onClick:()=>b(n.id),className:"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 flex items-center gap-2",children:[l.jsx(Ur,{className:"h-5 w-5"})," Print All"]}),l.jsxs("button",{onClick:()=>p(n),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 flex items-center gap-2",children:[l.jsx(Fo,{className:"h-5 w-5"})," Receive Payment"]}),l.jsx("button",{onClick:()=>m(n.id),className:"bg-brand-green text-white px-4 py-2 rounded-lg hover:bg-green-600",children:"Add New Treatment"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[l.jsx(N,{title:"Patient Information",children:l.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-4",children:[l.jsx(D,{label:"Patient ID",value:n.id,isMono:!0}),l.jsx(D,{label:"Gender",value:n.gender}),l.jsx(D,{label:"Age",value:x?`${x} years old`:"N/A"}),l.jsx(D,{label:"Date of Birth",value:Iu(n.dob,"dd MMMM, yyyy")}),l.jsx(D,{label:"Phone Number",value:sc(n.phone)}),l.jsx(D,{label:"Email Address",value:n.email}),l.jsx(D,{label:"Outstanding Balance",value:O(Number(n.balance)||0),className:"col-span-2"}),l.jsx(D,{label:"Address",value:n.address,className:"col-span-2"})]})}),l.jsx(N,{title:"Medical History",children:l.jsx("dl",{children:l.jsx(D,{label:"Allergies & Conditions",value:l.jsx("p",{className:"whitespace-pre-wrap font-normal h-full",children:n.medicalHistory||"None provided."})})})})]}),l.jsxs("h3",{className:"text-2xl font-bold text-dark-text dark:text-dark-text-primary mb-4",children:["Treatment History (",v.length,")"]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:v.length>0?v.map(T=>{const I=o.find(R=>R.id===T.doctorId);return l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow rounded-lg border border-gray-200 dark:border-dark-border flex flex-col transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-dark-border flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-lg text-dark-text dark:text-dark-text-primary",children:Iu(T.date,"dd MMM, yyyy")}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Doctor: ",(I==null?void 0:I.name)||"Unknown"]}),l.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 font-mono mt-1",children:["ID: ",T.id]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>h(T.id),className:"p-1.5 text-gray-500 hover:text-indigo-500 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Print Treatment Record",children:l.jsx(Ur,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>c(T),className:"p-1.5 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Edit Treatment",children:l.jsx(Sa,{className:"h-5 w-5"})}),A&&l.jsx("button",{onClick:()=>u(T.id),className:"p-1.5 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20",title:"Delete Treatment",children:l.jsx(Gn,{className:"h-5 w-5"})})]})]}),l.jsxs("div",{className:"p-4 flex-grow",children:[l.jsx("ul",{className:"space-y-2",children:(T.procedures||[]).map((R,_)=>l.jsxs("li",{className:"flex justify-between text-sm p-2 bg-gray-50 dark:bg-gray-800/60 rounded",children:[l.jsx("span",{children:R.procedureName}),l.jsxs("span",{className:"font-mono",children:["PKR ",Number(R.cost||0).toFixed(2)]})]},_))}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-dark-border text-right text-sm",children:[l.jsxs("p",{children:["Total Discount: PKR ",Number(T.totalDiscount||0).toFixed(2)]}),l.jsxs("p",{className:"font-bold text-lg",children:["Final Amount: PKR ",Number(T.finalAmount||0).toFixed(2)]}),l.jsxs("p",{children:["Amount Paid: PKR ",Number(T.paidAmount||0).toFixed(2)]}),l.jsxs("p",{className:Number(T.finalAmount-T.paidAmount)>0?"text-red-600 font-bold":"text-green-600",children:["Pending Balance: PKR ",Number(T.finalAmount-T.paidAmount).toFixed(2)]})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-dark-border flex justify-between items-center bg-gray-50 dark:bg-gray-900/50 rounded-b-lg",children:[l.jsx("span",{className:"font-semibold text-sm text-gray-700 dark:text-gray-300",children:"Payment Status:"}),j(T.paymentStatus)]}),T.notes&&l.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-dark-border text-sm text-gray-600 dark:text-gray-400 bg-yellow-50 dark:bg-yellow-500/10",children:[l.jsx("strong",{className:"text-yellow-800 dark:text-yellow-300",children:"Notes:"})," ",T.notes]})]},T.id)}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 col-span-full",children:"No treatment history found."})})]})}),ow=()=>{const{patients:n}=Dt(),[s,r]=w.useState(null);return w.useEffect(()=>{s&&!n.some(o=>o.id===s.id)&&r(null)},[n,s]),s?l.jsx(iw,{patient:s,onBack:()=>r(null)}):l.jsx("div",{className:"p-8",children:l.jsx(sw,{onSelectPatient:r})})},cw=Xe.memo(ow),dw=()=>{const{appointments:n,patients:s,treatments:r,cancelAppointment:o,openAppointmentModal:c}=Dt(),[u,m]=w.useState(new Date),[b,h]=w.useState("calendar"),[g,p]=w.useState(null),[v,x]=w.useState(null),[N,D]=w.useState(""),[A,j]=w.useState(null),[O,T]=w.useState(1),I=10,R=w.useRef(null),_=Eb(N,300),$=w.useMemo(()=>Hv({start:qv(u),end:xb(u)}),[u]),se=P2($[0]),q=w.useMemo(()=>ye(new Date,"yyyy-MM-dd"),[]),{pendingTodayCount:ie,completedTodayCount:ue,cancelledTodayCount:K}=w.useMemo(()=>({pendingTodayCount:n.filter(S=>S.date===q&&S.status==="Scheduled").length,completedTodayCount:n.filter(S=>S.date===q&&S.status==="Completed").length,cancelledTodayCount:n.filter(S=>S.status==="Cancelled"&&S.cancellationDate===q).length}),[n,q]),me=w.useMemo(()=>{const S=Kn(new Date),F=Vo(S,1),B=Vo(S,5);return n.filter(X=>X.status==="Scheduled"&&R1(Kn(ln(X.date,"yyyy-MM-dd",new Date)),{start:F,end:B})).sort((X,te)=>X.date.localeCompare(te.date)||X.time.localeCompare(te.time))},[n]),Me=w.useMemo(()=>n.filter(S=>S.status==="Cancelled"&&S.cancellationDate).sort((S,F)=>new Date(F.cancellationDate).getTime()-new Date(S.cancellationDate).getTime()),[n]),Z=w.useMemo(()=>{const S=ye(new Date,"yyyy-MM-dd"),F=n.filter(X=>X.status==="Scheduled"&&X.date>=S).sort((X,te)=>X.date.localeCompare(te.date)||X.time.localeCompare(te.time));if(!_)return F;const B=_.toLowerCase();return F.filter(X=>{var Te;const te=s.find(we=>we.id===X.patientId);return X.patientName.toLowerCase().includes(B)||te&&(te.phone.includes(_)||te.id.includes(_)||((Te=te.email)==null?void 0:Te.toLowerCase().includes(B)))})},[n,_,s]),Ae=Math.ceil(Z.length/I),E=w.useMemo(()=>Z.slice((O-1)*I,O*I),[Z,O]),W=async S=>{v&&(await o(v.id,S),x(null))},ce=S=>{const F=ye(new Date,"yyyy-MM-dd");let B="",X=[];switch(S){case"pending":B="Pending Appointments Today",X=n.filter(te=>te.date===F&&te.status==="Scheduled");break;case"completed":B="Completed Appointments Today",X=n.filter(te=>te.date===F&&te.status==="Completed");break;case"cancelled":B="Cancelled Appointments Today",X=n.filter(te=>te.status==="Cancelled"&&te.cancellationDate===F);break}j({title:B,appointments:X.sort((te,Te)=>te.time.localeCompare(Te.time))})},pe=()=>{if(!g)return null;const S=ye(g,"yyyy-MM-dd"),F=n.filter(B=>B.date===S).sort((B,X)=>{const te={Scheduled:1,Completed:2,Cancelled:3};return te[B.status]-te[X.status]||B.time.localeCompare(X.time)});return l.jsx(ut,{isOpen:!!g,onClose:()=>p(null),title:`Appointments for ${ye(g,"MMMM d, yyyy")}`,children:l.jsxs("div",{className:"max-h-[70vh] flex flex-col",children:[l.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:F.length>0?l.jsx("ul",{className:"space-y-3",children:F.map((B,X)=>l.jsxs("li",{className:`p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg transition-opacity ${B.status!=="Scheduled"?"opacity-70":""}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:[l.jsxs("span",{className:"text-brand-blue font-bold mr-2",children:[X+1,"."]}),B.patientName]}),l.jsx("p",{className:"text-xs text-gray-400 font-mono pl-6",children:B.patientId}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 pl-6",children:B.reason})]}),l.jsx("span",{className:`font-mono bg-blue-100 dark:bg-blue-500/20 dark:text-blue-300 px-2 py-1 rounded flex-shrink-0 ${B.status==="Cancelled"?"line-through text-red-500 dark:text-red-400 bg-red-100 dark:bg-red-500/10":"text-brand-blue"}`,children:B.time})]}),B.status==="Scheduled"&&l.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700 flex items-center gap-2 pl-6",children:[l.jsx("button",{onClick:()=>{p(null),c({existingAppointment:B})},className:"flex-1 text-xs bg-yellow-500 text-white px-2 py-1.5 rounded-md hover:bg-yellow-600",children:"Reschedule"}),l.jsx("button",{onClick:()=>x(B),className:"flex-1 text-xs bg-red-500 text-white px-2 py-1.5 rounded-md hover:bg-red-600",children:"Cancel"})]}),B.status==="Completed"&&l.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700 text-green-600 dark:text-green-400",children:l.jsx("p",{className:"font-bold text-center",children:"✓ Completed"})}),B.status==="Cancelled"&&l.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 dark:border-gray-700 text-red-500 dark:text-red-400",children:[l.jsx("p",{className:"font-bold text-center",children:"Cancelled"}),B.cancellationReason&&l.jsxs("p",{className:"text-sm italic text-center",children:["Reason: ",B.cancellationReason]})]})]},B.id))}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No appointments scheduled for this day."})}),l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-dark-border",children:l.jsx("button",{onClick:()=>{p(null),c({defaultDate:S})},className:"w-full bg-brand-green text-white p-2 rounded-lg hover:bg-green-600",children:"Add Appointment for this Day"})})]})})};return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:"Appointments"}),l.jsx("button",{onClick:()=>c(),className:"bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark",children:"Add New Appointment"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[l.jsxs("button",{onClick:()=>ce("pending"),className:"bg-white dark:bg-dark-card p-4 rounded-lg shadow-md border border-gray-200 dark:border-dark-border text-center transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("p",{className:"text-lg font-semibold text-dark-text dark:text-dark-text-primary",children:"Pending Today"}),l.jsx("p",{className:"text-4xl font-bold text-brand-blue",children:ie})]}),l.jsxs("button",{onClick:()=>ce("completed"),className:"bg-white dark:bg-dark-card p-4 rounded-lg shadow-md border border-gray-200 dark:border-dark-border text-center transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("p",{className:"text-lg font-semibold text-dark-text dark:text-dark-text-primary",children:"Completed Today"}),l.jsx("p",{className:"text-4xl font-bold text-brand-green",children:ue})]}),l.jsxs("button",{onClick:()=>ce("cancelled"),className:"bg-white dark:bg-dark-card p-4 rounded-lg shadow-md border border-gray-200 dark:border-dark-border text-center transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("p",{className:"text-lg font-semibold text-dark-text dark:text-dark-text-primary",children:"Cancelled Today"}),l.jsx("p",{className:"text-4xl font-bold text-red-600",children:K})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-card p-4 rounded-lg shadow-md border border-gray-200 dark:border-dark-border mb-6 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("p",{className:"text-lg font-semibold text-dark-text dark:text-dark-text-primary mb-2",children:"Upcoming (Next 5 Days)"}),l.jsx("div",{className:"max-h-[35vh] overflow-y-auto pr-2",children:me.length>0?l.jsx("ul",{className:"space-y-3",children:me.map(S=>{const F=s.find(te=>te.id===S.patientId),B=r.filter(te=>te.patientId===S.patientId&&new Date(te.date)<ln(S.date,"yyyy-MM-dd",new Date)).sort((te,Te)=>new Date(Te.date).getTime()-new Date(te.date).getTime())[0],X=B&&pb(ln(S.date,"yyyy-MM-dd",new Date),new Date(B.date))<45;return l.jsxs("li",{className:"grid grid-cols-[minmax(0,2fr)_minmax(0,1.2fr)_auto] gap-x-4 items-center bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg border border-gray-200 dark:border-dark-border/50 transition-all duration-200 ease-in-out hover:shadow-lg hover:-translate-y-px",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:S.patientName}),X&&l.jsx("span",{className:"text-xs font-bold bg-purple-200 text-purple-800 dark:bg-purple-300 dark:text-purple-900 px-2 py-0.5 rounded-full",children:"Follow-up"})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:F==null?void 0:F.phone}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:S.reason}),X&&B&&l.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1 italic",children:["Last procedure: ",B.procedures.map(te=>te.procedureName).join(", ")]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-medium text-gray-600 dark:text-gray-300 text-sm",children:ye(ln(S.date,"yyyy-MM-dd",new Date),"EEE, d MMM")}),l.jsx("p",{className:"font-bold text-brand-blue",children:ye(ln(S.time,"HH:mm",new Date),"p")})]}),l.jsxs("div",{className:"flex justify-end items-center gap-2",children:[l.jsx("button",{onClick:()=>c({existingAppointment:S}),className:"text-xs bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 font-semibold",children:"Reschedule"}),l.jsx("button",{onClick:()=>x(S),className:"text-xs bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 font-semibold",children:"Cancel"})]})]},S.id)})}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No upcoming appointments in the next 5 days."})})]}),l.jsxs("div",{className:"flex justify-center p-1 mb-4 space-x-1 bg-gray-200 dark:bg-gray-700 rounded-lg max-w-xs mx-auto",children:[l.jsx("button",{onClick:()=>h("calendar"),className:`w-full px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${b==="calendar"?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"Calendar View"}),l.jsx("button",{onClick:()=>h("list"),className:`w-full px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${b==="list"?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"List View"})]}),b==="calendar"?l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg p-4 border border-gray-200 dark:border-dark-border transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>m(X1(u)),className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"Previous month",children:"←"}),l.jsx("span",{className:"text-xl font-semibold w-48 text-center text-dark-text dark:text-dark-text-primary",children:ye(u,"MMMM yyyy")}),l.jsx("button",{onClick:()=>m(mb(u,1)),className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700","aria-label":"Next month",children:"→"})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 text-center font-semibold text-gray-600 dark:text-gray-400 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>l.jsx("div",{children:S},S))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:se}).map((S,F)=>l.jsx("div",{className:"border border-gray-200 dark:border-dark-border rounded-md min-h-28 bg-gray-50 dark:bg-gray-900/20"},`empty-${F}`)),$.map(S=>{const F=ye(S,"yyyy-MM-dd"),B=n.filter(te=>te.date===F&&te.status==="Scheduled").sort((te,Te)=>te.time.localeCompare(Te.time)),X=Hr(S);return l.jsxs("div",{className:`border rounded-md min-h-28 p-2 flex flex-col hover:bg-blue-50 dark:hover:bg-blue-900/50 cursor-pointer transition-all duration-200 ease-in-out hover:shadow-lg hover:-translate-y-px ${X?"border-2 border-brand-blue bg-blue-50 dark:bg-blue-900/50":"bg-white dark:bg-dark-card border-gray-200 dark:border-dark-border"}`,onClick:()=>p(S),children:[l.jsx("span",{className:`font-bold self-start ${X?"text-white bg-brand-blue rounded-full w-6 h-6 flex items-center justify-center":"dark:text-dark-text-secondary"}`,children:ye(S,"d")}),l.jsxs("div",{className:"flex-grow mt-1 space-y-1 overflow-hidden",children:[B.slice(0,2).map(te=>l.jsxs("div",{className:"bg-blue-100 dark:bg-blue-500/20 text-blue-800 dark:text-blue-200 p-1 rounded-sm text-xs truncate",title:`${te.time} - ${te.patientName}`,children:[l.jsx("span",{className:"font-semibold",children:te.time})," ",te.patientName]},te.id)),B.length>2&&l.jsxs("div",{className:"text-center font-bold text-blue-600 dark:text-blue-400 text-xs mt-1",children:["+ ",B.length-2," more"]})]})]},S.toString())})]})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg p-4 border border-gray-200 dark:border-dark-border overflow-x-auto transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("div",{className:"mb-6 relative",children:[l.jsx("input",{type:"text",placeholder:"Search by patient name, phone, or ID...",value:N,onChange:S=>{D(S.target.value),T(1)},className:"w-full max-w-sm p-3 pl-12 text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none","aria-label":"Search upcoming appointments"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 font-semibold text-gray-600 dark:text-gray-300",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3",children:"Patient"}),l.jsx("th",{className:"p-3",children:"Contact"}),l.jsx("th",{className:"p-3",children:"Date & Time"}),l.jsx("th",{className:"p-3",children:"Reason"}),l.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:E.length>0?E.map(S=>{const F=s.find(B=>B.id===S.patientId);return l.jsxs("tr",{children:[l.jsxs("td",{className:"p-3 text-dark-text dark:text-dark-text-primary",children:[l.jsx("p",{className:"font-medium",children:S.patientName}),l.jsx("p",{className:"text-xs text-gray-500 font-mono",children:S.patientId})]}),l.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:(F==null?void 0:F.phone)||"N/A"}),l.jsxs("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:[l.jsx("p",{children:ye(ln(S.date,"yyyy-MM-dd",new Date),"EEE, d MMM yyyy")}),l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:S.time})]}),l.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:S.reason}),l.jsx("td",{className:"p-3 text-right",children:l.jsxs("div",{className:"flex justify-end items-center gap-2",children:[l.jsx("button",{onClick:()=>c({existingAppointment:S}),className:"text-xs bg-yellow-500 text-white px-3 py-1.5 rounded-md hover:bg-yellow-600",children:"Reschedule"}),l.jsx("button",{onClick:()=>x(S),className:"text-xs bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600",children:"Cancel"})]})})]},S.id)}):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No upcoming appointments found."})})})]}),l.jsx(lc,{currentPage:O,totalPages:Ae,onPageChange:T})]}),l.jsxs("div",{ref:R,className:"mt-8",children:[l.jsx("h3",{className:"text-2xl font-bold mb-4 text-dark-text dark:text-dark-text-primary",children:"Cancelled Appointments Log"}),l.jsx("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg max-h-[30vh] overflow-y-auto border border-gray-200 dark:border-dark-border transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:Me.length>0?l.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:Me.map(S=>l.jsx("li",{className:"p-4 transition-all duration-200 ease-in-out hover:bg-gray-50 dark:hover:bg-gray-800/50 hover:shadow-md hover:-translate-y-px",children:l.jsxs("div",{className:"flex justify-between items-start gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:S.patientName}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Original Date: ",ye(ln(S.date,"yyyy-MM-dd",new Date),"MM/dd/yyyy")," @ ",S.time]}),S.cancellationDate&&l.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Cancelled On: ",ye(ln(S.cancellationDate,"yyyy-MM-dd",new Date),"MM/dd/yyyy")]})]}),l.jsxs("div",{className:"text-right flex-shrink-0",children:[l.jsx("p",{className:"font-semibold text-red-600 dark:text-red-400",children:"Cancelled"}),l.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 italic max-w-xs truncate",title:S.cancellationReason,children:["Reason: ",S.cancellationReason]})]})]})},S.id))}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No appointments have been cancelled."})})]}),l.jsx(pe,{}),v&&l.jsx(rf,{isOpen:!!v,onClose:()=>x(null),onConfirm:W,patientName:v.patientName,closeOnBackdropClick:!1}),A&&l.jsx(ut,{isOpen:!!A,onClose:()=>j(null),title:A.title,children:l.jsx("ul",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:A.appointments.length>0?A.appointments.map(S=>l.jsxs("li",{className:"bg-gray-100 dark:bg-gray-800/60 p-3 rounded-lg border border-gray-200 dark:border-dark-border/50",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-dark-text dark:text-dark-text-primary",children:S.patientName}),l.jsx("span",{className:"font-mono text-sm text-gray-600 dark:text-gray-300",children:S.time})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:S.reason}),S.status==="Cancelled"&&S.cancellationReason&&l.jsxs("p",{className:"text-xs italic text-red-500 dark:text-red-400 mt-1",children:["Reason: ",S.cancellationReason]})]},S.id)):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No appointments in this category."})})})]})},uw=Xe.memo(dw),fw=({isOpen:n,onClose:s,openDayBook:r})=>{const{transactions:o,closeDayBook:c}=Dt(),{showNotification:u}=Yr(),[m,b]=w.useState(""),[h,g]=w.useState("");w.useEffect(()=>{n&&(b(""),g(""))},[n]);const p=w.useMemo(()=>{if(!n)return{income:0,expenses:0,cashInDrawer:0};const N=o.filter(T=>T.dayBookDate===r.date&&T.status==="active"),D=N.filter(T=>T.type==="income").reduce((T,I)=>T+Number(I.amount),0),A=N.filter(T=>T.type==="expense").reduce((T,I)=>T+Number(I.amount),0);let O=(Number(r.openingBalance)||0)+D-A;return r.status==="closed"&&r.closingBalance!==void 0&&r.closingBalance!==null&&(O=Number(r.closingBalance)),{income:D,expenses:A,cashInDrawer:O}},[o,r,n]),v=w.useMemo(()=>{const N=Number(p.cashInDrawer)||0,D=Number(m)||0;return N-D},[p.cashInDrawer,m]),x=()=>{const N=Number(m)||0;if(N>p.cashInDrawer){u("Settlement amount cannot be greater than the cash in drawer.","error");return}c({transferredAmount:N,notes:h}),s()};return l.jsx(ut,{isOpen:n,onClose:s,title:`Close Day Book for ${ye(Qt(r.date),"dd MMM, yyyy")}`,children:l.jsxs("form",{onSubmit:N=>{N.preventDefault(),x()},className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800/50 rounded-lg space-y-2 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Opening Balance:"}),l.jsxs("span",{className:"font-semibold",children:["PKR ",Number(r.openingBalance||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Today's Income:"}),l.jsxs("span",{className:"font-semibold text-green-600",children:["+ PKR ",Number(p.income||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Today's Expenses:"}),l.jsxs("span",{className:"font-semibold text-red-600",children:["- PKR ",Number(p.expenses||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-gray-300 dark:border-gray-600",children:[l.jsx("span",{children:"Amount in Cash Drawer:"}),l.jsxs("span",{className:"text-blue-700",children:["PKR ",Number(p.cashInDrawer||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-gray-300 dark:border-gray-600",children:[l.jsx("span",{children:"Amount to Transfer:"}),l.jsxs("span",{className:"text-yellow-700",children:["PKR ",Number(m||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-gray-300 dark:border-gray-600",children:[l.jsx("span",{children:"Remaining in Drawer:"}),l.jsxs("span",{className:"text-green-700",children:["PKR ",Number(v).toFixed(2)]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settlementAmount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount Transferred to Owner"}),l.jsx("input",{id:"settlementAmount",type:"number",step:"0.01",value:m,onChange:N=>b(N.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"settlementNotes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notes (Optional)"}),l.jsx("textarea",{id:"settlementNotes",value:h,onChange:N=>g(N.target.value),placeholder:"e.g. Daily settlement",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",rows:2})]}),l.jsx("button",{type:"submit",className:"w-full bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Confirm & Close Day"})]})})},mw=({patients:n})=>{const{openPaymentModal:s,currentUser:r,treatments:o,openPatientModal:c}=Dt(),u=w.useMemo(()=>n.filter(x=>Number(x.balance)!==0).sort((x,N)=>(N.balance||0)-(x.balance||0)),[n]),{totalReceivables:m,totalAdvances:b}=w.useMemo(()=>u.reduce((x,N)=>(N.balance&&N.balance>0?x.totalReceivables+=N.balance:N.balance&&N.balance<0&&(x.totalAdvances+=Math.abs(N.balance)),x),{totalReceivables:0,totalAdvances:0}),[u]),h=r==null?void 0:r.permissions.includes("ACCOUNTING"),[g,p]=w.useState(null),v=x=>o.filter(N=>N.patientId===x&&Number(N.finalAmount)>Number(N.paidAmount));return l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border overflow-hidden transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-dark-border",children:[l.jsx("h3",{className:"text-xl font-bold text-dark-text dark:text-dark-text-primary",children:"Patients with Outstanding Balances"}),l.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total Receivables: "}),l.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["PKR ",Number(m||0).toFixed(2)]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total Advances: "}),l.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:["PKR ",Number(b||0).toFixed(2)]})]})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 text-left",children:"Patient Name"}),l.jsx("th",{className:"p-3 text-left",children:"Contact"}),l.jsx("th",{className:"p-3 text-right",children:"Balance"}),l.jsx("th",{className:"p-3 text-center",children:"Action"}),l.jsx("th",{className:"p-3 text-center",children:"Details"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:u.length>0?u.map(x=>{const N=x.balance||0,D=N>0;return l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[l.jsx("td",{className:"p-3 font-medium text-dark-text dark:text-dark-text-primary",children:x.name}),l.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:x.phone}),l.jsxs("td",{className:`p-3 text-right font-semibold font-mono ${D?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["PKR ",Number(Math.abs(N)||0).toFixed(2),l.jsx("span",{className:"text-xs ml-1",children:D?"Due":"Advance"})]}),l.jsx("td",{className:"p-3 text-center",children:h&&l.jsxs("button",{onClick:()=>s(x),className:"text-xs bg-purple-500 text-white px-3 py-1.5 rounded-md hover:bg-purple-600 flex items-center gap-1 mx-auto",children:[l.jsx(Fo,{className:"h-4 w-4"}),"Receive Payment"]})}),l.jsx("td",{className:"p-3 text-center",children:l.jsx("button",{onClick:()=>p(x),className:"text-xs bg-indigo-500 text-white px-3 py-1.5 rounded-md hover:bg-indigo-600",children:"Details"})})]},x.id)}):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center p-8 text-gray-500 dark:text-gray-400",children:"No outstanding balances found."})})})]})}),g&&l.jsx(ut,{isOpen:!!g,onClose:()=>p(null),title:`Pending Treatments for ${g.name}`,children:l.jsx("div",{className:"max-h-96 overflow-y-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2",children:"Record ID"}),l.jsx("th",{className:"p-2",children:"Date"}),l.jsx("th",{className:"p-2",children:"Amount Paid"}),l.jsx("th",{className:"p-2",children:"Pending Balance"}),l.jsx("th",{className:"p-2",children:"Action"})]})}),l.jsxs("tbody",{children:[v(g.id).map(x=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[l.jsx("td",{className:"p-2 font-mono",children:x.id}),l.jsx("td",{className:"p-2",children:ye(new Date(x.date),"dd MMM yyyy, p")}),l.jsxs("td",{className:"p-2 text-green-600 font-mono",children:["PKR ",Number(x.paidAmount||0).toFixed(2)]}),l.jsxs("td",{className:"p-2 text-red-600 font-mono",children:["PKR ",Number(x.finalAmount-x.paidAmount).toFixed(2)]}),l.jsx("td",{className:"p-2 text-center",children:l.jsx("button",{onClick:()=>c(g),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"View Record"})})]},x.id)),v(g.id).length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No pending treatments."})})]})]})})})]})},gw=()=>{const{transactions:n,patients:s,patientMap:r,users:o,dayBooks:c,activityLogs:u,startDayBook:m,openDayBook:b,requestDeleteExpense:h,currentUser:g,appSettings:p,reopenDayBook:v,openManualTransactionModal:x,activePatients:N}=Dt(),[D,A]=w.useState("today"),[j,O]=w.useState("all"),[T,I]=w.useState("ledger"),[R,_]=w.useState(!1),[$,se]=w.useState(!1),[q,ie]=w.useState(""),[ue,K]=w.useState(1),me=5,Me=g==null?void 0:g.permissions.includes("delete_expense"),Z=Array.isArray(g==null?void 0:g.permissions)&&g.permissions.includes("reopen_daybook"),Ae=g==null?void 0:g.permissions.includes("ACCOUNTING"),E=new Date,W=w.useMemo(()=>{const ae=Kn(E);switch(D){case"today":return{start:ae,end:E};case"month":return{start:Kn(new Date(E.getFullYear(),E.getMonth(),1)),end:E};case"year":return{start:Kn(new Date(E.getFullYear(),0,1)),end:E};case"all":return{start:new Date(0),end:E}}},[D]),ce=w.useMemo(()=>n.filter(ae=>ae.status==="active"),[n]),pe=(ae,be)=>{if(!ae)return"";const Se=new Date(ae);if(isNaN(Se.getTime()))return"";try{return ye(Se,be)}catch{return""}},S=w.useMemo(()=>{if(!b)return{income:0,expense:0,opening:0,cashInDrawer:0};const ae=ce.filter(tt=>tt.dayBookDate===b.date&&tt.status==="active"),be=ae.filter(tt=>tt.type==="income").reduce((tt,tn)=>tt+Number(tn.amount),0),Se=ae.filter(tt=>tt.type==="expense").reduce((tt,tn)=>tt+Number(tn.amount),0),lt=Number(b.openingBalance)||0;let ge=lt+be-Se;return b.status==="closed"&&b.closingBalance!==void 0&&b.closingBalance!==null&&(ge=Number(b.closingBalance)),{income:be,expense:Se,opening:lt,cashInDrawer:ge}},[ce,b]);w.useEffect(()=>{if(R){const ae=[...c].filter(be=>be.status==="closed").sort((be,Se)=>Se.date.localeCompare(be.date))[0];ae&&ae.closingBalance!==void 0&&ae.closingBalance!==null?ie(String(ae.closingBalance)):ie(String(p.cashInHand||0))}},[R,p.cashInHand,c]),w.useEffect(()=>{K(1)},[D]);const F=w.useMemo(()=>ce.filter(ae=>{const be=Qt(ae.date);return be>=W.start&&be<=W.end}),[ce,W]),B=w.useMemo(()=>{const ae={};return F.forEach(be=>{const Se=ye(Qt(be.date),"yyyy-MM-dd");ae[Se]||(ae[Se]=[]),ae[Se].push(be)}),Object.keys(ae).forEach(be=>{const Se=c.find(lt=>lt.date===be);Se&&(ae[be].push({id:`synthetic-open-${be}`,date:Kn(Qt(be)).toISOString(),description:"Opening Balance",type:"opening_balance",amount:Se.openingBalance,status:"active",createdAt:Kn(Qt(be)).toISOString()}),Se.status==="closed"&&Se.settledAmount!==void 0&&ae[be].push({id:`synthetic-close-${be}`,date:new Date(be+"T23:59:59").toISOString(),description:"Amount Handed Over",type:"settlement",amount:Se.settledAmount,status:"active",createdAt:new Date(be+"T23:59:59").toISOString()}))}),Object.entries(ae).sort(([be],[Se])=>Se.localeCompare(be))},[F,c]),X=w.useMemo(()=>D==="today"?B:B.slice((ue-1)*me,ue*me),[B,ue,D]),te=w.useMemo(()=>{const ae=["transaction","daybook"],be=["patient","appointment","user","doctor","procedure"];return j==="all"?u:j==="financial"?u.filter(Se=>ae.includes(Se.entity)):j==="admin"?u.filter(Se=>be.includes(Se.entity)):[]},[u,j]),Te=ae=>{const be=(r==null?void 0:r.get(ae||""))||s.find(Se=>Se.id===ae);return be?be.isDeleted?l.jsx("span",{style:{textDecoration:"line-through"},children:be.name}):be.name:""},we=ae=>{var be;return((be=o.find(Se=>Se.id===ae))==null?void 0:be.username)||"System"},oe=ae=>{const be="h-5 w-5";switch(ae.type){case"create":return l.jsx(ib,{className:`${be} text-green-500`});case"edit":return l.jsx(Sa,{className:`${be} text-yellow-500`});case"delete":return l.jsx(Gn,{className:`${be} text-red-500`});case"info":return l.jsx(nv,{className:`${be} text-blue-500`});default:return null}};pe(b==null?void 0:b.date,"dd MMM yyyy"),String(Number(S.opening||0).toFixed(2)),String(Number(S.income||0).toFixed(2)),String(Number(S.expense||0).toFixed(2)),String(Number(S.cashInDrawer||0).toFixed(2));const xe=w.useMemo(()=>[...c].filter(ae=>ae.status==="closed").sort((ae,be)=>be.date.localeCompare(ae.date))[0],[c]),_e=b?S.cashInDrawer:xe&&xe.closingBalance!==void 0&&xe.closingBalance!==null?xe.closingBalance:0,$e=ae=>{const be=n.filter(ge=>ge.dayBookDate===ae&&ge.status==="active"),Se=be.filter(ge=>ge.type==="income").reduce((ge,tt)=>ge+Number(tt.amount),0),lt=be.filter(ge=>ge.type==="expense").reduce((ge,tt)=>ge+Number(tt.amount),0);return{income:Se,expense:lt}},[qe,Ye]=w.useState("daybook");return l.jsxs("div",{className:"p-8",children:[l.jsx("h2",{className:"text-3xl font-bold mb-6 text-dark-text dark:text-dark-text-primary",children:"Accounting & Stats"}),l.jsx("div",{className:"flex justify-end mb-4",children:l.jsx("div",{className:"flex p-1 space-x-1 bg-gray-200 dark:bg-gray-700 rounded-lg",children:["today","month","year","all"].map(ae=>l.jsx("button",{onClick:()=>A(ae),className:`capitalize w-full px-3 py-1 text-xs font-medium rounded-md transition-colors ${D===ae?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:ae==="today"?"Day":ae.charAt(0).toUpperCase()+ae.slice(1)},ae))})}),l.jsxs("div",{className:"p-4 md:p-8",children:[l.jsx("div",{className:"mb-6 p-4 rounded-lg shadow-md border border-gray-200 dark:border-dark-border bg-white dark:bg-dark-card flex flex-col sm:flex-row justify-between items-center transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:b?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center sm:text-left mb-2 sm:mb-0",children:[l.jsxs("p",{className:"font-semibold text-lg text-green-600 dark:text-green-400 flex items-center gap-2",children:[l.jsxs("span",{className:"relative flex h-3 w-3",children:[l.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),l.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),"Day Book is Open"]}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Date: ",pe(b.date,"dd MMM, yyyy")]})]}),l.jsx("button",{onClick:()=>se(!0),className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 font-semibold shadow-md hover:shadow-lg transition-shadow",children:"Close Day & Settle"})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"font-semibold text-lg text-red-600 dark:text-red-400",children:"Day Book is Closed"}),l.jsx("button",{onClick:()=>_(!0),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 font-semibold mt-2 sm:mt-0 shadow-md hover:shadow-lg transition-shadow",children:"Start New Day"})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[l.jsxs("div",{className:"bg-indigo-100 dark:bg-indigo-500/10 p-4 rounded-lg shadow-md border border-indigo-200 dark:border-indigo-500/20",children:[l.jsx("p",{className:"text-indigo-800 dark:text-indigo-300 font-semibold",children:"Opening Balance"}),l.jsxs("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:["PKR ",Number(S.opening||0).toFixed(2)]})]}),l.jsxs("div",{className:"bg-green-100 dark:bg-green-500/10 p-4 rounded-lg shadow-md border border-green-200 dark:border-green-500/20",children:[l.jsx("p",{className:"text-green-800 dark:text-green-300 font-semibold",children:"Total Income"}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["PKR ",Number(S.income||0).toFixed(2)]})]}),l.jsxs("div",{className:"bg-red-100 dark:bg-red-500/10 p-4 rounded-lg shadow-md border border-red-200 dark:border-red-500/20",children:[l.jsx("p",{className:"text-red-800 dark:text-red-300 font-semibold",children:"Total Expenses"}),l.jsxs("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["PKR ",Number(S.expense||0).toFixed(2)]})]}),l.jsxs("div",{className:"bg-blue-100 dark:bg-blue-500/10 p-4 rounded-lg shadow-md border border-blue-200 dark:border-blue-500/20",children:[l.jsx("p",{className:"text-blue-800 dark:text-blue-300 font-semibold",children:"Amount in Cash Drawer"}),l.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["PKR ",Number(_e).toFixed(2)]})]})]}),Ae&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[l.jsx("button",{onClick:()=>x({type:"income"}),className:"w-full text-center bg-green-500/10 text-green-700 dark:text-green-300 font-semibold p-3 rounded-lg border-2 border-dashed border-green-500/30 hover:bg-green-500/20 transition",children:"+ Add Manual Income"}),l.jsx("button",{onClick:()=>x({type:"expense"}),className:"w-full text-center bg-red-500/10 text-red-700 dark:text-red-300 font-semibold p-3 rounded-lg border-2 border-dashed border-red-500/30 hover:bg-red-500/20 transition",children:"- Add Manual Expense"})]}),l.jsxs("div",{className:"flex justify-center p-1 mb-6 space-x-1 bg-gray-200 dark:bg-gray-700 rounded-lg max-w-sm mx-auto",children:[l.jsx("button",{onClick:()=>I("ledger"),className:`w-full px-4 py-1.5 text-sm font-medium rounded-md transition-colors ${T==="ledger"?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"Transaction Ledger"}),l.jsx("button",{onClick:()=>I("pendingPayments"),className:`w-full px-4 py-1.5 text-sm font-medium rounded-md transition-colors ${T==="pendingPayments"?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"Outstanding Balances"})]}),T==="ledger"?l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border p-4 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1 flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary",children:"Transaction Ledger"}),l.jsx("div",{className:"space-y-4 max-h-[calc(100vh-20rem)] overflow-y-auto pr-2 flex-grow",children:X.map(([ae,be])=>{const Se=be.filter(ge=>ge.type==="income").reduce((ge,tt)=>ge+Number(tt.amount),0),lt=be.filter(ge=>ge.type==="expense").reduce((ge,tt)=>ge+Number(tt.amount),0);return l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-dark-border",children:[l.jsxs("div",{className:"w-full flex justify-between items-center p-3 text-left font-semibold",children:[l.jsx("span",{className:"text-dark-text dark:text-dark-text-primary",children:ye(Qt(ae),"EEEE, dd MMMM yyyy")}),l.jsxs("div",{className:"flex items-center gap-4",children:[Se>0&&l.jsxs("span",{className:"text-sm text-green-600",children:["PKR ",Number(Se).toFixed(2)]}),lt>0&&l.jsxs("span",{className:"text-sm text-red-600",children:["-PKR ",Number(lt).toFixed(2)]})]})]}),l.jsx("div",{className:"border-t border-gray-200 dark:border-dark-border p-3 space-y-2",children:l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:be.sort((ge,tt)=>new Date(ge.date).getTime()-new Date(tt.date).getTime()).map(ge=>l.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-800",children:[l.jsx("td",{className:"py-2 pr-2 w-20",children:ye(Qt(ge.date),"p")}),l.jsxs("td",{className:"py-2 pr-2",children:[l.jsx("span",{className:`font-semibold ${ge.type==="opening_balance"||ge.type==="settlement"?"italic":""}`,children:ge.description}),l.jsx("br",{}),l.jsx("span",{className:"text-xs text-gray-500",children:ge.type!=="opening_balance"&&ge.type!=="settlement"&&l.jsxs(l.Fragment,{children:["by ",we(ge.userId),ge.patientId&&l.jsxs(l.Fragment,{children:[" from ",Te(ge.patientId)]})]})})]}),l.jsxs("td",{className:"py-2 pr-2 text-right font-mono whitespace-nowrap",children:[l.jsxs("span",{className:ge.type==="income"?"text-green-600 dark:text-green-400":ge.type==="expense"?"text-red-600 dark:text-red-400":ge.type==="opening_balance"?"text-indigo-600 dark:text-indigo-400":"text-orange-600 dark:text-orange-400",children:[ge.type==="expense"||ge.type==="settlement"?"-":"","PKR ",Number(ge.amount).toFixed(2)]}),l.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-bold ${ge.type==="income"?"bg-green-100 text-green-700":ge.type==="expense"?"bg-red-100 text-red-700":ge.type==="opening_balance"?"bg-indigo-100 text-indigo-700":ge.type==="settlement"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:ge.type.replace("_"," ").replace(/\b\w/g,tt=>tt.toUpperCase())})]}),l.jsx("td",{className:"w-20 text-right",children:!ge.treatmentId&&(ge.type==="income"||ge.type==="expense")?l.jsxs(l.Fragment,{children:[Ae&&l.jsx("button",{onClick:()=>x({type:ge.type,transaction:ge}),className:"p-1 text-gray-400 hover:text-yellow-500 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-500/20",children:l.jsx(Sa,{className:"h-4 w-4"})}),Me&&l.jsx("button",{onClick:()=>h(ge.id),className:"p-1 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20",children:l.jsx(Gn,{className:"h-4 w-4"})})]}):null})]},ge.id))})})})]},ae)})})," ",D!=="today"&&B.length>me&&l.jsx(lc,{currentPage:ue,totalPages:Math.ceil(B.length/me),onPageChange:K})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border p-4 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary",children:"Activity Log"}),l.jsx("div",{className:"flex p-1 space-x-1 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4",children:["all","financial","admin"].map(ae=>l.jsx("button",{onClick:()=>O(ae),className:`capitalize w-full px-3 py-1 text-xs font-medium rounded-md transition-colors ${j===ae?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:ae},ae))}),l.jsx("ul",{className:"space-y-3 max-h-[26rem] overflow-y-auto pr-2 text-sm",children:te.slice(0,50).map(ae=>l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 pt-1",children:oe(ae)}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"text-gray-800 dark:text-gray-200 break-words",children:ae.description}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Sb(Qt(ae.date),{addSuffix:!0})," by ",we(ae.userId)]})]})]},ae.id))})]})})]}):l.jsx(mw,{patients:N}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-center p-1 mb-4 space-x-1 bg-gray-200 dark:bg-gray-700 rounded-lg max-w-xs mx-auto mt-8",children:[l.jsx("button",{onClick:()=>Ye("daybook"),className:`w-full px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${qe==="daybook"?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"Day Book History"}),l.jsx("button",{onClick:()=>Ye("settlement"),className:`w-full px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${qe==="settlement"?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"Settlement History"})]}),qe==="daybook"&&l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border p-4 mt-6 mb-8 transition-all duration-200 ease-in-out",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary",children:"Day Book History"}),l.jsx("div",{className:"max-h-60 overflow-y-auto",children:l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2",children:"Date"}),l.jsx("th",{className:"p-2 text-right",children:"Opening"}),l.jsx("th",{className:"p-2 text-right",children:"Total Income"}),l.jsx("th",{className:"p-2 text-right",children:"Total Expense"}),l.jsx("th",{className:"p-2 text-right",children:"Cash to Owner"}),l.jsx("th",{className:"p-2 text-right",children:"Amount in Cash Drawer"}),l.jsx("th",{className:"p-2 text-right",children:"Notes"}),Z&&l.jsx("th",{className:"p-2",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:[...c].sort((ae,be)=>be.date.localeCompare(ae.date)).map(ae=>{const{income:be,expense:Se}=$e(ae.date);return l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 font-semibold",children:pe(ae.date,"dd MMM yyyy")}),l.jsxs("td",{className:"p-2 text-right font-mono text-green-600",children:["PKR ",Number(ae.openingBalance||0).toFixed(2)]}),l.jsxs("td",{className:"p-2 text-right font-mono text-green-600",children:["PKR ",Number(be).toFixed(2)]}),l.jsxs("td",{className:"p-2 text-right font-mono text-red-600",children:["PKR ",Number(Se).toFixed(2)]}),l.jsxs("td",{className:"p-2 text-right font-mono text-yellow-600",children:["PKR ",ae.settledAmount!==void 0&&ae.settledAmount!==null?Number(ae.settledAmount).toFixed(2):"N/A"]}),l.jsxs("td",{className:"p-2 text-right font-mono text-blue-600",children:["PKR ",ae.closingBalance!==void 0&&ae.closingBalance!==null?Number(ae.closingBalance).toFixed(2):"N/A"]}),l.jsx("td",{className:"p-2 text-right font-mono text-gray-600 dark:text-gray-400",children:ae.notes||"N/A"}),Z&&l.jsx("td",{className:"p-2",children:ae.status==="closed"&&l.jsx("button",{onClick:()=>v(ae.date),className:"text-xs bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600",children:"Reopen"})})]},ae.date)})})]})})]}),qe==="settlement"&&l.jsx(hw,{dayBooks:c})]}),l.jsx(ut,{isOpen:R,onClose:()=>_(!1),title:"Start Day Book",children:l.jsx(bw,{onSubmit:ae=>{m(ae),_(!1),ie("")},initialBalance:Number(q)||0})}),b&&l.jsx(fw,{isOpen:$,onClose:()=>se(!1),openDayBook:b})]})]})},hw=({dayBooks:n})=>{const[s,r]=w.useState("daily"),[o,c]=w.useState(1),u=10,m=w.useMemo(()=>n.filter(g=>g.status==="closed"),[n]);w.useEffect(()=>{c(1)},[s]);const b=w.useMemo(()=>{if(s==="daily")return m.map(g=>({period:ye(Qt(g.date),"dd MMM, yyyy"),settled:g.settledAmount||0})).sort((g,p)=>new Date(p.period).getTime()-new Date(g.period).getTime());if(s==="monthly"){const g={};return m.forEach(p=>{const v=ye(Qt(p.date),"yyyy-MM");g[v]||(g[v]=0),g[v]+=p.settledAmount||0}),Object.entries(g).map(([p,v])=>({period:ye(Qt(p),"MMMM yyyy"),settled:v})).sort((p,v)=>new Date(v.period).getTime()-new Date(p.period).getTime())}if(s==="yearly"){const g={};return m.forEach(p=>{const v=ye(Qt(p.date),"yyyy");g[v]||(g[v]=0),g[v]+=p.settledAmount||0}),Object.entries(g).map(([p,v])=>({period:p,settled:v})).sort((p,v)=>parseInt(v.period)-parseInt(p.period))}return[]},[m,s]),h=w.useMemo(()=>b.slice((o-1)*u,o*u),[b,o]);return l.jsxs("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border p-4 transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-dark-text dark:text-dark-text-primary",children:"Settlement History"}),l.jsx("div",{className:"flex p-1 space-x-1 bg-gray-200 dark:bg-gray-700 rounded-lg",children:["daily","monthly","yearly"].map(g=>l.jsx("button",{onClick:()=>r(g),className:`capitalize w-full px-3 py-1 text-xs font-medium rounded-md transition-colors ${s===g?"bg-white dark:bg-dark-card text-brand-blue shadow":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:g},g))})]}),l.jsx("div",{className:"flex-grow overflow-y-auto max-h-60",children:l.jsxs("table",{className:"w-full text-sm text-left",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"p-2 capitalize",children:[s," Period"]}),l.jsx("th",{className:"p-2 text-right",children:"Amount Handed Over"})]})}),l.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:[h.map(g=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 font-semibold",children:g.period}),l.jsxs("td",{className:"p-2 text-right font-mono text-red-600",children:["PKR ",Number(g.settled||0).toFixed(2)]})]},g.period)),h.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:2,className:"text-center p-4 text-gray-500",children:"No settlements found for this period."})})]})]})}),b.length>u&&l.jsx(lc,{currentPage:o,totalPages:Math.ceil(b.length/u),onPageChange:c})]})},bw=({onSubmit:n,initialBalance:s})=>{const[r,o]=w.useState(""),[c,u]=w.useState(""),[m,b]=w.useState(!1);w.useEffect(()=>{o(String(s)),u(""),b(!1)},[s]);const h=p=>{o(p.target.value),b(Number(p.target.value)!==s),Number(p.target.value)===s&&u("")},g=p=>{if(p.preventDefault(),m&&!c.trim())return;const v=parseFloat(r)||0;n(v)};return l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You must start the day book before recording any financial transactions."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"global-opening-balance",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Opening Balance (PKR)"}),l.jsx("input",{id:"global-opening-balance",type:"number",step:"0.01",value:r,onChange:h,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0,autoFocus:!0})]}),m&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"opening-reason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason for changing opening balance"}),l.jsx("textarea",{id:"opening-reason",value:c,onChange:p=>u(p.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0,rows:2})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark font-semibold",children:"Start Day"})]})},pw=gw,xw=({onSubmit:n,onClose:s})=>{const[r,o]=w.useState(""),[c,u]=w.useState(""),[m,b]=w.useState(""),[h,g]=w.useState(""),[p,v]=w.useState(""),[x,N]=w.useState(""),[D,A]=w.useState(""),[j,O]=w.useState(""),T=I=>{I.preventDefault(),n({name:r,phone:"+92"+c,reason:m,gender:h,email:p,address:x,dob:D,medicalHistory:j}),s()};return l.jsxs("form",{onSubmit:T,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-name-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Patient Name"}),l.jsx("input",{id:"walkin-name-q",type:"text",placeholder:"Full Name",value:r,onChange:I=>o(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-phone-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),l.jsx(ic,{value:c.startsWith("+92")?c.slice(3):c,onChange:u,required:!0,label:"Phone Number"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-email-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),l.jsx("input",{id:"walkin-email-q",type:"email",placeholder:"patient@example.com",value:p,onChange:I=>v(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-gender-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gender"}),l.jsxs("select",{id:"walkin-gender-q",value:h,onChange:I=>g(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"walkin-dob-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date of Birth"}),l.jsx("input",{id:"walkin-dob-q",type:"date",value:D,onChange:I=>A(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-address-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),l.jsx("textarea",{id:"walkin-address-q",placeholder:"123 Dental Lane, Toothville",value:x,onChange:I=>N(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-reason-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason for Visit"}),l.jsx("textarea",{id:"walkin-reason-q",placeholder:"e.g., Toothache, broken tooth",value:m,onChange:I=>b(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"walkin-history-q",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Medical History / Allergies"}),l.jsx("textarea",{id:"walkin-history-q",placeholder:"e.g., Hypertension, Penicillin allergy",value:j,onChange:I=>O(I.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2})]}),l.jsxs("div",{className:"flex gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white p-2 rounded-md hover:bg-brand-blue-dark",children:"Add to Queue"})]})]})},yw=()=>{var ie,ue;const{dailyQueue:n,addPatientToQueue:s,assignPatientToSurgery:r,requestCancelVisitFromQueue:o,confirmCancelVisit:c,patients:u,openPatientModal:m,openAppointmentModal:b}=Dt(),[h,g]=w.useState(!1),[p,v]=w.useState(null),[x,N]=w.useState(null),[D,A]=w.useState(null),j=Xe.useMemo(()=>ye(new Date,"yyyy-MM-dd"),[]),O=Xe.useMemo(()=>n.queue.filter(K=>K.status==="Waiting").sort((K,me)=>K.queueNumber-me.queueNumber),[n]),T=Xe.useMemo(()=>n.queue.find(K=>K.status==="In Surgery 1"),[n]),I=Xe.useMemo(()=>n.queue.find(K=>K.status==="In Surgery 2"),[n]),R=K=>{O[0]&&r(O[0].patient.id,K)},_=K=>{s(K,"Waiting"),g(!1)},$=(K,me)=>{K.stopPropagation(),me(),N(null)},se=K=>{const me=u.find(E=>E.patientId===K.id&&E.date===j),Me=(me==null?void 0:me.reason)||"Walk-in",Z=u.filter(E=>E.patientId===K.id&&new Date(E.date)<new Date).sort((E,W)=>new Date(W.date).getTime()-new Date(E.date).getTime())[0],Ae=Z&&pb(new Date,new Date(Z.date))<45;return{reason:Me,isFollowUp:Ae,lastTreatment:Z}},q=(K,me)=>{const{reason:Me,isFollowUp:Z,lastTreatment:Ae}=se(K.patient),E=u.filter(pe=>pe.patientId===K.patient.id),W=E.length;return l.jsxs("li",{className:"p-3 rounded-lg shadow-sm cursor-pointer border border-gray-200 dark:border-dark-border bg-white dark:bg-dark-card transition-all duration-200 ease-in-out hover:shadow-lg hover:-translate-y-px",onClick:()=>N(x===K.patient.id?null:K.patient.id),children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-semibold text-lg flex items-center gap-3 text-dark-text dark:text-dark-text-primary",children:[l.jsx("span",{className:`font-bold text-xl text-white rounded-full h-8 w-8 inline-flex items-center justify-center flex-shrink-0 ${me?K.status==="In Surgery 1"?"bg-blue-500":"bg-teal-500":"bg-brand-blue"}`,children:K.queueNumber}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:K.patient.name}),Z&&l.jsx("span",{className:"text-xs font-bold bg-purple-200 text-purple-800 dark:bg-purple-300 dark:text-purple-900 px-2 py-0.5 rounded-full",children:"Follow-up"})]}),W>0&&l.jsxs("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400",children:["Treatment History: ",W]})]})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 pl-11 italic",children:Me})]}),x===K.patient.id&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300 dark:border-dark-border space-y-4",children:[Z&&Ae&&l.jsxs("div",{className:"text-xs text-purple-700 dark:text-purple-300 bg-purple-50 dark:bg-purple-500/10 p-2 rounded-md",children:[l.jsxs("p",{className:"font-bold",children:["Last Visit: ",ye(new Date(Ae.date),"dd-MMM-yy")]}),l.jsxs("p",{children:["Procedures: ",Ae.procedures.map(pe=>pe.procedureName).join(", ")]})]}),W>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Recent Treatments (",W,")"]}),l.jsx("div",{className:"max-h-28 overflow-y-auto pr-1 space-y-2",children:E.sort((pe,S)=>new Date(S.date).getTime()-new Date(pe.date).getTime()).slice(0,2).map(pe=>{const S=u.find(X=>X.id===pe.doctorId),F=pe.procedures[0],B=pe.procedures.length-1;return l.jsxs("button",{onClick:X=>{X.stopPropagation(),A(pe)},className:"w-full text-left p-2 bg-gray-200/50 dark:bg-gray-700/50 rounded-md hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors text-xs",children:[l.jsxs("div",{className:"flex justify-between font-medium",children:[l.jsxs("p",{className:"truncate pr-2",children:[F==null?void 0:F.procedureName,B>0?` + ${B} more`:""]}),l.jsx("p",{className:"flex-shrink-0",children:ye(new Date(pe.date),"dd-MMM-yy")})]}),l.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["by ",(S==null?void 0:S.name)||"Unknown Doctor"]})]},pe.id)})})]}),l.jsxs("div",{className:"space-y-2",children:[me&&l.jsx("button",{onClick:pe=>$(pe,()=>{}),className:"w-full text-sm bg-green-500 text-white px-3 py-2 rounded-md hover:bg-green-600 font-semibold",children:"Record Treatment"}),l.jsx("button",{onClick:pe=>$(pe,()=>o(K)),className:"w-full text-sm bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600",children:"Cancel Visit"})]})]})]},K.patient.id)};return l.jsxs("div",{className:"p-4 sm:p-6 md:p-8 flex flex-col md:h-full",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4 flex-shrink-0",children:[l.jsx("h2",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:"Live Clinic Flow"}),l.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[l.jsx("button",{onClick:()=>g(!0),className:"flex-1 md:flex-none bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark font-semibold shadow-sm",children:"Add Walk-in"}),l.jsx("button",{onClick:()=>{},className:"flex-1 md:flex-none bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"Refresh"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 flex-grow min-h-0",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-lg shadow-md border border-gray-200 dark:border-dark-border flex flex-col transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsxs("h3",{className:"text-xl font-bold p-4 border-b border-gray-200 dark:border-dark-border text-center bg-gray-50 dark:bg-gray-900/50 rounded-t-lg text-dark-text dark:text-dark-text-primary flex-shrink-0",children:["Waiting Room (",O.length,")"]}),l.jsx("div",{className:"p-4 md:flex-grow md:min-h-0 md:overflow-y-auto",children:l.jsxs("ul",{className:"space-y-3",children:[O.map(K=>q(K,!1)),O.length===0&&l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 pt-16",children:"Waiting room is empty."})]})})]}),l.jsxs("div",{className:`rounded-lg shadow-md border flex flex-col transition-all duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1 ${T?"bg-blue-50 dark:bg-blue-900/50 border-blue-200 dark:border-blue-700":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700"}`,children:[l.jsx("h3",{className:"text-xl font-bold p-4 border-b text-center rounded-t-lg flex-shrink-0 text-dark-text dark:text-dark-text-primary",children:"Surgery 1"}),l.jsx("div",{className:"p-4 md:flex-grow md:min-h-0 md:overflow-y-auto",children:T?l.jsx("ul",{className:"space-y-3",children:q(T,!0)}):l.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 pt-16",children:[l.jsx("p",{className:"mb-4",children:"Surgery 1 is available."}),l.jsx("button",{onClick:()=>R("In Surgery 1"),disabled:O.length===0,className:"bg-brand-blue text-white font-bold py-2 px-4 rounded-lg disabled:bg-gray-400 dark:disabled:bg-gray-600 hover:bg-brand-blue-dark",children:"Call Next Patient"})]})})]}),l.jsxs("div",{className:`rounded-lg shadow-md border flex flex-col transition-all duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1 ${I?"bg-teal-50 dark:bg-teal-900/50 border-teal-200 dark:border-teal-700":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-700"}`,children:[l.jsx("h3",{className:"text-xl font-bold p-4 border-b text-center rounded-t-lg flex-shrink-0 text-dark-text dark:text-dark-text-primary",children:"Surgery 2"}),l.jsx("div",{className:"p-4 md:flex-grow md:min-h-0 md:overflow-y-auto",children:I?l.jsx("ul",{className:"space-y-3",children:q(I,!0)}):l.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 pt-16",children:[l.jsx("p",{className:"mb-4",children:"Surgery 2 is available."}),l.jsx("button",{onClick:()=>R("In Surgery 2"),disabled:O.length===0,className:"bg-brand-blue text-white font-bold py-2 px-4 rounded-lg disabled:bg-gray-400 dark:disabled:bg-gray-600 hover:bg-brand-blue-dark",children:"Call Next Patient"})]})})]})]}),l.jsx(ut,{isOpen:h,onClose:()=>g(!1),title:"Add Walk-in Patient",closeOnBackdropClick:!1,children:l.jsx(xw,{onSubmit:_,onClose:()=>g(!1)})}),l.jsx(ut,{isOpen:!!p,onClose:()=>v(null),title:"Queue Slip",closeOnBackdropClick:!1,children:p&&l.jsx(af,{slipData:p,onClose:()=>v(null),appSettings:{}})}),D&&l.jsx(ut,{isOpen:!!D,onClose:()=>A(null),title:"Treatment Summary",children:l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-dark-card rounded-lg border dark:border-dark-border",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Patient:"})," ",((ie=n.queue.find(K=>K.patient.id===D.patientId))==null?void 0:ie.patient.name)||"N/A"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Date:"})," ",ye(new Date(D.date),"dd MMMM, yyyy")]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Doctor:"})," ",((ue=u.find(K=>K.id===D.doctorId))==null?void 0:ue.name)||"N/A"]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold mb-1 text-dark-text dark:text-dark-text-primary",children:"Procedures Performed"}),l.jsx("ul",{className:"list-disc list-inside mt-1 space-y-1 bg-gray-50 dark:bg-gray-800/60 p-3 rounded-md",children:D.procedures.map((K,me)=>l.jsxs("li",{children:[K.procedureName," - ",l.jsxs("span",{className:"font-mono",children:["PKR ",Number(K.cost).toFixed(2)]})]},me))})]}),l.jsxs("div",{className:"text-right font-medium p-3 bg-gray-50 dark:bg-gray-800/60 rounded-md",children:[l.jsxs("p",{children:["Subtotal: ",l.jsxs("span",{className:"font-mono",children:["PKR ",Number(D.totalCost).toFixed(2)]})]}),l.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400",children:["Discount: ",l.jsxs("span",{className:"font-mono",children:["-PKR ",Number(D.totalDiscount).toFixed(2)]})]}),l.jsxs("p",{className:"font-bold text-base border-t border-dashed dark:border-gray-600 mt-1 pt-1",children:["Final Amount: ",l.jsxs("span",{className:"font-mono",children:["PKR ",Number(D.finalAmount).toFixed(2)]})]})]}),D.notes&&l.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-500/10 rounded-lg border border-yellow-200 dark:border-yellow-500/20",children:[l.jsx("p",{className:"font-semibold",children:"Notes:"}),l.jsx("p",{className:"whitespace-pre-wrap",children:D.notes})]})]})})]})},vw=Xe.memo(yw),ww=({isOpen:n,onClose:s,patient:r,onSubmit:o,existingTreatment:c})=>{const{activeDoctors:u,activeProcedures:m,appointments:b,appSettings:h}=Dt(),[g,p]=w.useState([]),[v,x]=w.useState(""),[N,D]=w.useState(""),[A,j]=w.useState(0),[O,T]=w.useState(""),[I,R]=w.useState(!1),[_,$]=w.useState(ye(new Date,"yyyy-MM-dd")),[se,q]=w.useState(""),[ie,ue]=w.useState(""),[K,me]=w.useState(""),[Me,Z]=w.useState(!1),[Ae,E]=w.useState(-1),W=w.useRef(null),ce=w.useRef([]),pe=w.useRef(null),S=!!c,{subtotal:F,procedureDiscounts:B,finalAmount:X,totalDiscount:te}=w.useMemo(()=>{const Y=g.reduce((We,it)=>We+(Number(it.cost)||0),0),Ee=g.reduce((We,it)=>We+(Number(it.discount)||0),0),Be=Ee+(Number(A)||0);return{subtotal:Y,procedureDiscounts:Ee,totalDiscount:Be,finalAmount:Y-Be}},[g,A]),Te=w.useMemo(()=>{const Y=parseFloat(O)||0;return X-Y},[X,O]),we=typeof r.balance=="number"?r.balance:0,oe=we<0?Math.abs(we):0,[xe,_e]=w.useState(!0),$e=parseFloat(O)||0,qe=X-$e,Ye=xe&&qe>0&&oe>0?Math.min(qe,oe):0,ae=$e+Ye,be=X-ae,Se=we-Ye;w.useEffect(()=>{n?c?(p(c.procedures),x(c.notes),D(c.doctorId),j(c.overallDiscount||0),T(String(c.paidAmount)),R(!1)):(p([]),x(""),D(u.length>0?u[0].id:""),j(0),T(""),R(!1),$(ye(new Date,"yyyy-MM-dd")),q(""),ue("")):(me(""),Z(!1),E(-1))},[n,c,u]),w.useEffect(()=>{S||T(String(X<0?0:X))},[X,S]),w.useEffect(()=>{var Y;!S&&g.length>0&&((Y=pe.current)==null||Y.select())},[g.length,S]),w.useEffect(()=>{n&&_e(!0)},[n,r.id]);const lt=w.useMemo(()=>g.map(Y=>Y.procedureId),[g]),ge=w.useMemo(()=>{const Y=K.toLowerCase(),Ee=m.filter(Be=>Be.name.toLowerCase().includes(Y)&&!lt.includes(Be.id));return E(-1),Ee},[K,m,lt]);w.useEffect(()=>{ce.current=ce.current.slice(0,ge.length)},[ge]),w.useEffect(()=>{const Y=Ee=>{!Me||ge.length===0||(Ee.key==="ArrowDown"?(Ee.preventDefault(),E(Be=>(Be+1)%ge.length)):Ee.key==="ArrowUp"?(Ee.preventDefault(),E(Be=>(Be-1+ge.length)%ge.length)):Ee.key==="Enter"&&(Ee.preventDefault(),Ae>=0&&Ae<ge.length&&tn(ge[Ae])))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[Me,Ae,ge]),w.useEffect(()=>{var Y;Ae>=0&&ce.current[Ae]&&((Y=ce.current[Ae])==null||Y.scrollIntoView({block:"nearest"}))},[Ae]),w.useEffect(()=>{const Y=Ee=>{W.current&&!W.current.contains(Ee.target)&&Z(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const tt=w.useMemo(()=>{if(!_)return[];const Y=new Set(b.filter(vt=>vt.date===_&&vt.status==="Scheduled").map(vt=>vt.time)),Ee=[],{clinicStartTime:Be,clinicEndTime:We}=h;if(!Be||!We)return[];let it=ln(Be,"HH:mm",new Date);const un=ln(We,"HH:mm",new Date);for(;it<un;)Ee.push(ye(it,"HH:mm")),it.setMinutes(it.getMinutes()+30);return Ee.map(vt=>({time:vt,isBooked:Y.has(vt)}))},[_,b,h]),tn=Y=>{if(lt.includes(Y.id))return;const Ee={procedureId:Y.id,procedureName:Y.name,cost:Number(Y.cost)||0,discount:0};p(Be=>[...Be,Ee]),me(""),Z(!1)},ne=Y=>{p(Ee=>Ee.filter((Be,We)=>We!==Y))},le=(Y,Ee)=>{p(Be=>Be.map((We,it)=>it===Y?{...We,discount:Ee}:We))},ve=Y=>{Y.preventDefault();const Ee=xe?ae:$e;if(S){if(!c)return;let Be;Ee>=X?Be="Paid":Ee>0?Be="Partially Paid":Be="Unpaid";const We={...c,procedures:g,notes:v,doctorId:N,overallDiscount:A,totalCost:F,totalDiscount:te,finalAmount:X,paymentStatus:Be,paidAmount:Ee};o(We)}else o({procedures:g,notes:v,doctorId:N,overallDiscount:A,paidAmount:Ee,scheduleFollowUp:I,followUpDate:_,followUpTime:se,followUpReason:ie})};return l.jsx(ut,{isOpen:n,onClose:s,title:S?`Edit Treatment for ${r.name}`:`Record Treatment for ${r.name}`,size:"4xl",closeOnBackdropClick:!1,children:l.jsx("div",{className:"max-h-[80vh] overflow-y-auto pr-4 -mr-4",children:l.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Procedures Performed"}),l.jsxs("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-dark-border",children:[l.jsxs("div",{className:"relative",ref:W,children:[l.jsx("input",{type:"text",value:K,onChange:Y=>me(Y.target.value),onFocus:()=>Z(!0),placeholder:"Search and add a procedure...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"}),Me&&ge.length>0&&l.jsx("div",{className:"absolute top-full left-0 right-0 z-20 bg-white dark:bg-dark-card border border-gray-300 dark:border-dark-border mt-1 rounded-md shadow-lg max-h-48 overflow-y-auto",children:l.jsx("ul",{children:ge.map((Y,Ee)=>l.jsx("li",{children:l.jsxs("button",{ref:Be=>{ce.current[Ee]=Be},type:"button",onClick:()=>tn(Y),onMouseEnter:()=>E(Ee),className:`w-full text-left px-4 py-2 transition-colors duration-150 ${Ae===Ee?"bg-brand-blue text-white":"hover:bg-brand-blue/80 hover:text-white dark:hover:bg-brand-blue"}`,children:[Y.name," ",l.jsxs("span",{className:"text-sm opacity-80",children:["(PKR ",Number(Y.cost||0).toFixed(2),")"]})]})},Y.id))})})]}),l.jsx("div",{className:"mt-3 space-y-2 max-h-48 overflow-y-auto p-1 bg-gray-100 dark:bg-gray-900/50 rounded-md",children:g.length>0?g.map((Y,Ee)=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-gray-800 rounded-md shadow-sm",children:[l.jsxs("span",{className:"font-bold text-gray-500 w-6",children:[Ee+1,"."]}),l.jsx("span",{className:"flex-grow font-medium text-dark-text dark:text-dark-text-primary",children:Y.procedureName}),l.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["PKR ",Number(Y.cost||0).toFixed(2)]}),l.jsx("input",{type:"number",value:Y.discount,onChange:Be=>le(Ee,parseFloat(Be.target.value)||0),placeholder:"Discount",className:"w-24 p-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-sm"}),l.jsx("button",{type:"button",onClick:()=>ne(Ee),className:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-500/20 rounded-full",children:l.jsx(Gn,{className:"h-4 w-4"})})]},Y.procedureId)):l.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 py-8",children:"No procedures added yet."})})]})]}),g.length>0&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Attending Doctor"}),l.jsxs("select",{value:N,onChange:Y=>D(Y.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0,children:[l.jsx("option",{value:"",disabled:!0,children:"Select a doctor..."}),u.map(Y=>l.jsxs("option",{value:Y.id,children:[Y.name," - ",Y.specialty]},Y.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Treatment Notes"}),l.jsx("textarea",{value:v,onChange:Y=>x(Y.target.value),placeholder:"Enter treatment notes...",rows:4,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0})]})]}),l.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/40 rounded-lg border border-blue-200 dark:border-blue-500/30 space-y-2 text-sm flex flex-col",children:[l.jsxs("div",{className:"flex justify-between font-medium text-gray-600 dark:text-gray-300",children:[l.jsx("span",{children:"Subtotal:"}),l.jsxs("span",{children:["PKR ",Number(F||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between text-yellow-600 dark:text-yellow-400",children:[l.jsx("span",{children:"Procedure Discounts:"}),l.jsxs("span",{children:["- PKR ",Number(B||0).toFixed(2)]})]}),l.jsx("div",{children:l.jsxs("div",{className:"flex justify-between text-yellow-600 dark:text-yellow-400 items-center",children:[l.jsx("label",{htmlFor:"overallDiscount",children:"Overall Discount:"}),l.jsx("input",{type:"number",id:"overallDiscount",value:A,onChange:Y=>j(parseFloat(Y.target.value)||0),className:"w-28 p-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-sm text-right"})]})}),l.jsxs("div",{className:"flex justify-between font-bold text-lg text-dark-text dark:text-dark-text-primary border-t-2 border-dashed border-blue-300 dark:border-blue-500/50 pt-2 mt-2",children:[l.jsx("span",{children:"Final Amount:"}),l.jsxs("span",{children:["PKR ",Number(X||0).toFixed(2)]})]}),l.jsxs("div",{className:"flex justify-between items-center font-bold text-lg pt-2 mt-2",children:[l.jsx("label",{htmlFor:"paidAmount",className:"text-dark-text dark:text-dark-text-primary",children:"Amount Paid:"}),l.jsx("input",{ref:pe,type:"number",id:"paidAmount",value:O,onChange:Y=>T(Y.target.value),className:"w-28 p-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-right font-bold",disabled:S})]}),S&&l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 -mt-1 text-right",children:"To add a new payment, use the 'Receive Payment' feature."}),l.jsxs("div",{className:`flex justify-between font-bold text-lg pt-2 mt-auto ${Te>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[l.jsx("span",{children:"Amount Due:"}),l.jsxs("span",{children:["PKR ",Number(Te||0).toFixed(2)]})]}),qe>0&&oe>0&&l.jsxs("div",{className:"flex items-center gap-2 mt-2 p-2 bg-green-50 dark:bg-green-900/30 rounded border border-green-200 dark:border-green-700",children:[l.jsx("input",{type:"checkbox",id:"useAdvance",checked:xe,onChange:Y=>_e(Y.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsxs("label",{htmlFor:"useAdvance",className:"text-sm text-green-800 dark:text-green-200",children:["Adjust due from advance payment (PKR ",oe.toFixed(2)," available)"]}),xe&&l.jsxs("span",{className:"ml-auto text-green-700 font-semibold",children:["- PKR ",Ye.toFixed(2)," applied"]})]}),xe&&Ye>0&&l.jsxs("div",{className:"flex justify-between text-xs text-green-700 dark:text-green-300 mt-1",children:[l.jsx("span",{children:"New Patient Advance:"}),l.jsxs("span",{children:["PKR ",Math.abs(Se).toFixed(2)," ",Se<0?"advance":"due"]})]}),xe&&Ye>0&&l.jsxs("div",{className:`flex justify-between font-bold text-lg pt-2 mt-2 ${be>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[l.jsx("span",{children:"Adjusted Due:"}),l.jsxs("span",{children:["PKR ",Number(be||0).toFixed(2)]})]})]})]}),!S&&l.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-dark-border",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"follow-up-checkbox",type:"checkbox",checked:I,onChange:Y=>R(Y.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"follow-up-checkbox",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Schedule Follow-up Visit"})]}),I&&l.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-dark-border",children:[l.jsx("h4",{className:"font-semibold text-dark-text dark:text-dark-text-primary",children:"Follow-up Details"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"followUpDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),l.jsx("input",{type:"date",id:"followUpDate",value:_,min:ye(new Date,"yyyy-MM-dd"),onChange:Y=>$(Y.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"followUpTime",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Time"}),l.jsx("select",{id:"followUpTime",value:se,onChange:Y=>q(Y.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:I,children:tt.map(Y=>l.jsxs("option",{value:Y.time,disabled:Y.isBooked,className:Y.isBooked?"text-gray-400 bg-gray-100 dark:bg-gray-700":"text-black dark:text-white",children:[ye(ln(Y.time,"HH:mm",new Date),"p")," ",Y.isBooked?"(Booked)":""]},Y.time))})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"followUpReason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason"}),l.jsx("input",{type:"text",id:"followUpReason",value:ie,onChange:Y=>ue(Y.target.value),placeholder:"e.g., Post-op check, Suture removal",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:I})]})]})]}),l.jsxs("div",{className:"flex gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2.5 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2.5 rounded-lg hover:bg-brand-blue-dark font-semibold",disabled:!N||g.length===0,children:S?"Save Changes":"Save Treatment & Complete Visit"})]})]})})})},Fe="/api.php",Ve=async n=>{const s=await n.json();if(!n.ok)throw new Error(s.error||"API error");return s},ke={async login(n,s){return Ve(await fetch(`${Fe}?entity=login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:s})}))},async getPatients(){return Ve(await fetch(`${Fe}?entity=patients`))},async getPatient(n){return Ve(await fetch(`${Fe}?entity=patients&id=${n}`))},async addPatient(n){return Ve(await fetch(`${Fe}?entity=patients`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updatePatient(n,s){return Ve(await fetch(`${Fe}?entity=patients&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deletePatient(n){return Ve(await fetch(`${Fe}?entity=patients&id=${n}`,{method:"DELETE"}))},async restorePatient(n){return Ve(await fetch(`${Fe}?entity=patients&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDeleted:!1,deletedAt:null})}))},async getDoctors(){return Ve(await fetch(`${Fe}?entity=doctors`))},async addDoctor(n){return Ve(await fetch(`${Fe}?entity=doctors`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateDoctor(n,s){return Ve(await fetch(`${Fe}?entity=doctors&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteDoctor(n){return Ve(await fetch(`${Fe}?entity=doctors&id=${n}`,{method:"DELETE"}))},async getProcedures(){return Ve(await fetch(`${Fe}?entity=procedures`))},async addProcedure(n){return Ve(await fetch(`${Fe}?entity=procedures`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateProcedure(n,s){return Ve(await fetch(`${Fe}?entity=procedures&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteProcedure(n){return Ve(await fetch(`${Fe}?entity=procedures&id=${n}`,{method:"DELETE"}))},async getAppointments(){return Ve(await fetch(`${Fe}?entity=appointments`))},async addAppointment(n){return Ve(await fetch(`${Fe}?entity=appointments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateAppointment(n,s){return Ve(await fetch(`${Fe}?entity=appointments&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteAppointment(n){return Ve(await fetch(`${Fe}?entity=appointments&id=${n}`,{method:"DELETE"}))},async cancelAppointment(n,s){const r=new Date().toISOString().slice(0,10);return Ve(await fetch(`${Fe}?entity=appointments&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Cancelled",cancellationReason:s,cancellationDate:r})}))},async getTreatments(){return Ve(await fetch(`${Fe}?entity=treatments`))},async addTreatment(n){return Ve(await fetch(`${Fe}?entity=treatments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateTreatment(n,s){return Ve(await fetch(`${Fe}?entity=treatments&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteTreatment(n){return Ve(await fetch(`${Fe}?entity=treatments&id=${n}`,{method:"DELETE"}))},async getTransactions(){return Ve(await fetch(`${Fe}?entity=transactions`))},async addTransaction(n){return Ve(await fetch(`${Fe}?entity=transactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateTransaction(n,s){return Ve(await fetch(`${Fe}?entity=transactions&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteTransaction(n){return Ve(await fetch(`${Fe}?entity=transactions&id=${n}`,{method:"DELETE"}))},async getUsers(){return Ve(await fetch(`${Fe}?entity=users`))},async addUser(n){return Ve(await fetch(`${Fe}?entity=users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateUser(n,s){return Ve(await fetch(`${Fe}?entity=users&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteUser(n){return Ve(await fetch(`${Fe}?entity=users&id=${n}`,{method:"DELETE"}))},async getDaybooks(){return Ve(await fetch(`${Fe}?entity=daybooks`))},async addDaybook(n){return Ve(await fetch(`${Fe}?entity=daybooks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateDaybook(n){return Ve(await fetch(`${Fe}?entity=daybooks`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async closeDaybook(n,s,r){return Ve(await fetch(`${Fe}?entity=daybooks`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:n,status:"closed",settledAmount:s,notes:r})}))},async reopenDaybook(n){return Ve(await fetch(`${Fe}?entity=daybooks`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:n,status:"open"})}))},async getActivityLogs(){return Ve(await fetch(`${Fe}?entity=activity_logs`))},async addActivityLog(n){return Ve(await fetch(`${Fe}?entity=activity_logs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async getQueue(n){const s=n?`&date=${encodeURIComponent(n)}`:"";return Ve(await fetch(`${Fe}?entity=queue${s}`))},async addQueueEntry(n){return Ve(await fetch(`${Fe}?entity=queue`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}))},async updateQueueEntry(n,s){return Ve(await fetch(`${Fe}?entity=queue&id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}))},async deleteQueueEntry(n){return Ve(await fetch(`${Fe}?entity=queue&id=${n}`,{method:"DELETE"}))},async resetQueue(){return Ve(await fetch(`${Fe}?entity=queue&reset=1`,{method:"POST"}))}},Nw=()=>l.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden","aria-hidden":"true",children:[l.jsx("div",{className:"absolute left-[calc(50%-4rem)] top-10 h-[24rem] w-[24rem] -translate-x-1/2 rounded-full bg-gradient-to-tr from-brand-blue/50 to-brand-green/50 blur-3xl opacity-40 sm:left-[calc(50%-18rem)] sm:h-[48rem] sm:w-[48rem]"}),l.jsx("div",{className:"absolute left-1/2 top-1/2 -z-10 h-[64rem] w-[64rem] -translate-y-1/2 [mask-image:radial-gradient(closest-side,white,transparent)] sm:left-full sm:-ml-80 lg:left-1/2 lg:ml-0 lg:-translate-x-1/2 lg:translate-y-0","aria-hidden":"true",children:l.jsxs("svg",{viewBox:"0 0 1024 1024",className:"absolute left-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2",children:[l.jsx("circle",{cx:"512",cy:"512",r:"512",fill:"url(#login-gradient)",fillOpacity:"0.7"}),l.jsx("defs",{children:l.jsxs("radialGradient",{id:"login-gradient",children:[l.jsx("stop",{stopColor:"#0A74DA"}),l.jsx("stop",{offset:"1",stopColor:"#10B981"})]})})]})})]}),kw=({onLogin:n,appSettings:s})=>{const[r,o]=w.useState(""),[c,u]=w.useState(""),[m,b]=w.useState(""),[h,g]=w.useState(!1),p=async v=>{v.preventDefault(),b("");try{const x=await ke.login(r,c);n(x.user)}catch{b("Invalid username or password.")}};return l.jsxs("div",{className:"relative isolate flex items-center justify-center min-h-screen bg-gray-900 text-white p-4 font-sans overflow-hidden",children:[l.jsx(Nw,{}),l.jsx("div",{className:"relative z-10 w-full max-w-md",children:l.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl p-8 rounded-2xl border border-gray-700/50 shadow-2xl animate-fade-in-up",children:[l.jsxs("div",{className:"text-center mb-8",style:{animationDelay:"100ms"},children:[l.jsx("div",{className:"inline-flex items-center justify-center gap-3 mb-2",children:s.appLogo?l.jsx("img",{src:s.appLogo,alt:"Clinic Logo",className:"w-12 h-12 rounded-lg object-cover shadow-lg"}):l.jsx(cb,{className:"w-12 h-12 text-brand-blue"})}),l.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-400",children:"Welcome Back"}),l.jsxs("p",{className:"text-gray-400 mt-2",children:["Sign in to access ",s.appName]})]}),l.jsxs("form",{className:"space-y-6",onSubmit:p,children:[l.jsxs("div",{className:"relative",style:{animationDelay:"200ms"},children:[l.jsx(ov,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{id:"username-input",type:"text",value:r,onChange:v=>o(v.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-900/50 border border-gray-700 rounded-lg text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-brand-blue transition-all",placeholder:"Username",autoComplete:"username"})]}),l.jsxs("div",{className:"relative",style:{animationDelay:"300ms"},children:[l.jsx(cv,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),l.jsx("input",{id:"password-input",type:h?"text":"password",value:c,onChange:v=>u(v.target.value),required:!0,className:"w-full pl-10 pr-10 py-3 bg-gray-900/50 border border-gray-700 rounded-lg text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-brand-blue transition-all",placeholder:"Password",autoComplete:"current-password"}),l.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200",children:h?l.jsx(uv,{className:"h-5 w-5"}):l.jsx(dv,{className:"h-5 w-5"})})]}),m&&l.jsx("div",{className:"bg-red-500/10 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-center text-sm",role:"alert",children:l.jsx("span",{children:m})}),l.jsx("div",{style:{animationDelay:"400ms"},children:l.jsxs("button",{type:"submit",className:"group w-full flex items-center justify-center py-3 px-4 border border-transparent text-base font-bold rounded-lg text-white bg-brand-blue hover:bg-brand-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-brand-blue transition-all transform hover:scale-105",children:["Sign In",l.jsx(fv,{className:"h-5 w-5 ml-2 transition-transform group-hover:translate-x-1"})]})})]}),l.jsxs("p",{className:"text-center text-xs text-gray-500 mt-8",children:["© ",new Date().getFullYear()," ",s.appName,". All rights reserved."]})]})})]})},ql=[{view:"DASHBOARD",label:"Dashboard",icon:Xy},{view:"QUEUE",label:"Queue Management",icon:Zy},{view:"PATIENTS",label:"Patients",icon:db},{view:"DOCTORS",label:"Doctors",icon:Wy},{view:"PROCEDURES",label:"Procedures",icon:Ky},{view:"APPOINTMENTS",label:"Appointments",icon:Jy},{view:"ACCOUNTING",label:"Accounting",icon:ev},{view:"SETTINGS",label:"Settings",icon:ub}],jw=ql.map(n=>n.view),Sw={"Page Access":jw,Administration:["manage_users","edit_settings"],"Advanced Financials":["reopen_daybook"],"Destructive Actions":["delete_patient","delete_doctor","delete_procedure","delete_treatment","delete_expense"]},ph={appName:"Abdullah Dental Clinic",appLogo:null,clinicAddress:"123 Dental Street, Smileville, Meditown",clinicContact:"+92 300 1234567",clinicStartTime:"09:00",clinicEndTime:"17:00",nightMode:!1,printSettings:{showLogo:!0,showAddress:!0,showContact:!0,footerText:"Report Generated by Abdullah Dental Clinic OS",fontSize:"medium",pageSize:"A4",pageMargin:"2cm",headerLayout:"left-right-aligned",showPatientAge:!0,showPatientContactOnReport:!0,showTreatmentIdOnReport:!0},slipSettings:{showLogo:!0,showClinicName:!0,title:"Queue Slip",footerText:"Please wait for your turn. Thank you!"},navOrder:ql.map(n=>n.view),cashInHand:0},Nu={monday:{start:"09:00",end:"17:00",isOff:!1},tuesday:{start:"09:00",end:"17:00",isOff:!1},wednesday:{start:"09:00",end:"17:00",isOff:!1},thursday:{start:"09:00",end:"17:00",isOff:!1},friday:{start:"09:00",end:"17:00",isOff:!1},saturday:{start:"10:00",end:"14:00",isOff:!1},sunday:{start:"09:00",end:"17:00",isOff:!0}};({...Nu,wednesday:{...Nu.wednesday}});const Ob=n=>{if(!n)return null;try{return yb(new Date,Qt(n))}catch(s){return console.error("Could not parse date of birth:",n,s),null}},lf=(n,s)=>{const r=window.open("","","height=800,width=800");return r?(r.document.write(s),r.document.close(),r.focus(),setTimeout(()=>{r.print(),r.close()},500),!0):(console.error("Could not open print window. Please disable pop-up blockers."),!1)},Dw=n=>{switch(n){case"small":return"12px";case"medium":return"14px";case"large":return"16px";default:return"14px"}},sf=n=>{const{printSettings:s}=n;return`
  <style>
    @page {
        size: ${s.pageSize||"A4"};
        margin: ${s.pageMargin||"2cm"};
    }
    body { font-family: sans-serif; margin: 0; color: #1f2937; font-size: ${Dw(s.fontSize)}; }
    /* Centered Layout */
    .header { text-align: center; border-bottom: 2px solid #374151; padding-bottom: 1rem; margin-bottom: 2rem; }
    .header-content { display: flex; align-items: center; justify-content: center; gap: 1rem; }
    .header-logo { max-height: 80px; max-width: 80px; }
    .header h1 { margin: 0; font-size: 2em; }
    .header p { margin: 0.25rem 0; font-size: 1em; color: #4b5563; }
    .header h2 { margin: 0.5rem 0; font-size: 1.25em; color: #4b5563; }
    
    /* Left/Right Aligned Layout */
    .header-grid-lr { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 1rem; align-items: start; }
    .header-clinic-info-lr { display: flex; align-items: start; gap: 1rem; }
    .header-clinic-info-lr h1 { font-size: 1.5em; font-weight: bold; margin: 0; }
    .header-clinic-info-lr p { font-size: 0.9em; margin: 0.25rem 0 0 0; color: #4b5563; }
    .header-logo-lr { max-height: 60px; max-width: 100px; }
    .header-patient-info-lr { text-align: right; }
    .header-patient-info-lr h2 { margin: 0; font-size: 1.5em; }
    .header-patient-info-lr p { margin: 0.1rem 0; font-size: 0.9em; }
    .header-patient-info-lr .record-id { font-size: 0.7em; font-family: monospace; }
    .print-hr-lr { border: none; border-top: 2px solid #374151; margin: 1rem 0 1.5rem 0; }
    
    .patient-details { background-color: #f9fafb; padding: 1rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; margin-bottom: 2rem; }
    .patient-details table { width: 100%; border-collapse: collapse; }
    .patient-details td { padding: 0.5rem; }
    .patient-details td:first-child { font-weight: 600; width: 150px; color: #4b5563; }
    .section-title { font-size: 1.5rem; font-weight: 600; border-bottom: 1px solid #d1d5db; padding-bottom: 0.5rem; margin-top: 2rem; margin-bottom: 1rem; }
    .treatment-card { border: 1px solid #e5e7eb; border-radius: 0.5rem; margin-bottom: 1rem; page-break-inside: avoid; }
    .treatment-header { background-color: #f9fafb; padding: 0.75rem 1rem; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; font-weight: 600; align-items: center; }
    .treatment-id { font-family: monospace; font-size: 0.65em; color: #6b7280; }
    .treatment-body { padding: 1rem; }
    .treatment-body ul { list-style: none; padding: 0; margin: 0; }
    .treatment-body li { display: flex; justify-content: space-between; padding: 0.25rem 0; }
    .treatment-body .totals { text-align: right; margin-top: 1rem; border-top: 1px dashed #d1d5db; padding-top: 0.75rem; }
    .notes { background-color: #fefce8; border: 1px solid #fde68a; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; min-height: 50px; }
    .footer { display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; font-size: 0.875rem; color: #6b7280; }

    /* Compact styles for single treatment print */
    .single-treatment-print { font-size: 11px; line-height: 1.3; }
    .single-treatment-print .header-grid-lr { gap: 0.5rem; margin-bottom: 0; }
    .single-treatment-print .header-clinic-info-lr h1 { font-size: 1.5em; }
    .single-treatment-print .header-clinic-info-lr p { font-size: 0.9em; margin: 0; }
    .single-treatment-print .header-patient-info-lr h2 { font-size: 1.5em; }
    .single-treatment-print .header-patient-info-lr p { margin: 0; font-size: 0.9em; }
    .single-treatment-print .header-patient-info-lr .record-id { font-size: 0.8em; color: #4b5563; }
    .single-treatment-print .print-hr-lr { margin: 0.5rem 0; border-top-width: 1px; }
    .single-treatment-print .section-title { font-size: 1.2em; font-weight: bold; margin-top: 0; margin-bottom: 0.5rem; padding-bottom: 0; border-bottom: none; }
    .single-treatment-print .treatment-card { border: none; border-radius: 0; margin-bottom: 0.5rem; page-break-inside: avoid; }
    .single-treatment-print .treatment-header { padding: 0.4rem 0.8rem; font-size: 0.9em; background-color: #f3f4f6; border-radius: 0.25rem; margin-bottom: 0.5rem; }
    .single-treatment-print .treatment-body { padding: 0; }
    .single-treatment-print .treatment-body ul { margin: 0 0 0.5rem 0; padding: 0; list-style: none; }
    .single-treatment-print .treatment-body li { display: flex; justify-content: space-between; padding: 0.2rem 0; border-bottom: 1px dotted #d1d5db; }
    .single-treatment-print .treatment-body .totals { margin-top: 0.5rem; padding-top: 0.5rem; font-size: 1em; }
    .single-treatment-print .totals p { margin: 0.1rem 0; }
    .single-treatment-print .notes { margin-top: 0.5rem; padding: 0.6rem; font-size: 1em; min-height: 0; background-color: #fefce8; border: 1px solid #fde68a; border-radius: 0.25rem; }
    .single-treatment-print .footer { margin-top: 1rem; font-size: 0.8em; }
  </style>
`},of=(n,s,r,o)=>{const{printSettings:c}=s;if(c.headerLayout==="left-right-aligned"&&r){const m=Ob(r.dob),b=m?`${m} years`:"N/A",h=ye(o?Qt(o.date):new Date,"dd MMMM, yyyy");return`
            <div class="header-grid-lr">
                <div class="header-clinic-info-lr">
                    ${c.showLogo&&s.appLogo?`<img src="${s.appLogo}" alt="Logo" class="header-logo-lr"/>`:""}
                    <div>
                        <h1>${s.appName}</h1>
                        ${c.showAddress?`<p>${s.clinicAddress||""}</p>`:""}
                        ${c.showContact?`<p>${s.clinicContact||""}</p>`:""}
                    </div>
                </div>
                <div class="header-patient-info-lr">
                    <p><strong>Date:</strong> ${h}</p>
                    ${c.showTreatmentIdOnReport&&o?`<p class="record-id"><strong>Record ID:</strong> ${o.id}</p>`:""}
                    <h2>${r.name}</h2>
                    ${c.showPatientAge?`<p><strong>Age:</strong> ${b}</p>`:""}
                    ${c.showPatientContactOnReport?`<p><strong>Contact:</strong> ${r.phone}</p>`:""}
                </div>
            </div>
            <hr class="print-hr-lr" />
        `}return`
        <div class="header">
            <div class="header-content">
                ${c.showLogo&&s.appLogo?`<img src="${s.appLogo}" alt="Clinic Logo" class="header-logo"/>`:""}
                <div>
                    <h1>${s.appName}</h1>
                    ${c.showAddress?`<p>${s.clinicAddress||""}</p>`:""}
                    ${c.showContact?`<p>${s.clinicContact||""}</p>`:""}
                </div>
            </div>
            <h2>${n}</h2>
        </div>
    `},cf=(n,s)=>{const{printSettings:r}=s,o=Ob(n.dob),c=o?`${o} years`:"N/A";return`
      <div class="patient-details">
        <table>
          <tr><td>Patient Name:</td><td>${n.name}</td></tr>
          <tr><td>Patient ID:</td><td>${n.id}</td></tr>
          ${r.showPatientAge?`<tr><td>Date of Birth:</td><td>${n.dob?ye(Qt(n.dob),"dd MMMM, yyyy"):"N/A"}</td></tr>`:""}
          ${r.showPatientAge?`<tr><td>Age:</td><td>${c}</td></tr>`:""}
          ${r.showPatientContactOnReport?`<tr><td>Contact:</td><td>${n.phone} | ${n.email||"N/A"}</td></tr>`:""}
          ${r.showPatientContactOnReport?`<tr><td>Address:</td><td>${n.address||"N/A"}</td></tr>`:""}
        </table>
      </div>
    `},df=(n,s,r)=>{const o=n.finalAmount-n.paidAmount,c=`
      ${n.totalDiscount>0?`<p>Subtotal: PKR ${Number(n.totalCost||0).toFixed(2)}</p><p>Discount: - PKR ${Number(n.totalDiscount||0).toFixed(2)}</p>`:""}
      <p><strong>Final Amount: PKR ${Number(n.finalAmount||0).toFixed(2)}</strong></p>
      <p>Amount Paid: PKR ${Number(n.paidAmount||0).toFixed(2)}</p>
      <p><strong>Balance Due (this visit): PKR ${Number(o||0).toFixed(2)}</strong></p>
    `;return`
    <div class="treatment-card">
        <div class="treatment-header">
        <span>Date: ${ye(Qt(n.date),"dd MMMM, yyyy")}</span>
        ${r.printSettings.showTreatmentIdOnReport?`<span class="treatment-id">ID: ${n.id}</span>`:""}
        <span>Doctor: ${(s==null?void 0:s.name)||"N/A"}</span>
        </div>
        <div class="treatment-body">
        <ul>
            ${n.procedures.map(u=>`<li><span>${u.procedureName}</span><span>PKR ${Number(u.cost||0).toFixed(2)}</span></li>`).join("")}
        </ul>
        <div class="totals">
            ${c}
        </div>
        ${n.notes?`<div class="notes"><strong>Notes:</strong> ${n.notes}</div>`:""}
        </div>
    </div>
`},uf=n=>`
    <div class="footer">
        <span>${n.printSettings.footerText}</span>
        <span>Report Generated on ${ye(new Date,"dd MMMM, yyyy HH:mm")}</span>
    </div>
`,Cw=(n,s,r,o)=>{const{printSettings:c}=o,u=s.filter(b=>b.patientId===n.id).sort((b,h)=>new Date(h.date).getTime()-new Date(b.date).getTime()),m=`
      <html>
        <head>
          <title>Patient Report for ${n.name}</title>
          ${sf(o)}
        </head>
        <body>
          ${of("Patient Treatment Report",o,n)}
          ${c.headerLayout==="center-aligned"?cf(n,o):""}
          <h3 class="section-title">Treatment History</h3>
          ${u.map(b=>df(b,r.find(h=>h.id===b.doctorId),o)).join("")}
          ${uf(o)}
        </body>
      </html>
    `;return lf(`Patient Report - ${n.name}`,m)},xh=(n,s,r,o)=>{const{printSettings:c}=o,u=`
      <html>
        <head>
          <title>Treatment Record for ${s.name}</title>
          ${sf(o)}
          <style>
            @page { size: A5 landscape; margin: 1cm; }
          </style>
        </head>
        <body class="single-treatment-print">
            ${of("Treatment Record",o,s,n)}
            ${c.headerLayout==="center-aligned"?cf(s,o):""}
            <h3 class="section-title">Treatment Details</h3>
            ${df(n,r,o)}
            ${uf(o)}
        </body>
      </html>
    `;return lf(`Treatment Record - ${n.id}`,u)},Aw=n=>{const{printSettings:s}=n,r={id:"P-007",name:"John Doe",dob:"1988-08-15",phone:"+1 555-123-4567",email:"john.doe@example.com",address:"456 Sample Ave, Preview City",createdAt:new Date().toISOString()},o={id:"T-999",date:new Date().toISOString(),notes:"This is a sample note to demonstrate how the notes section will appear on the final report.",procedures:[{procedureId:"proc1",procedureName:"Sample Procedure 1",cost:1e3,discount:0},{procedureId:"proc2",procedureName:"Sample Procedure 2",cost:2500,discount:500}],totalCost:3500,totalDiscount:500,finalAmount:3e3,paidAmount:1500},c={name:"Dr. Sample"},u=`
      <html>
        <head>
          <title>Sample Report Preview</title>
          ${sf(n)}
        </head>
        <body>
          ${of("Sample Report Preview",n,r,o)}
          ${s.headerLayout==="center-aligned"?cf(r,n):""}
          <h3 class="section-title">Sample Treatment Details</h3>
          ${df(o,c,n)}
          ${uf(n)}
        </body>
      </html>
    `;return lf("Sample Report Preview",u)};var ff=lb();const Tw=Qu(ff);function dn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Mw=typeof Symbol=="function"&&Symbol.observable||"@@observable",yh=Mw,vh=()=>Math.random().toString(36).substring(7).split("").join("."),Ew={INIT:`@@redux/INIT${vh()}`,REPLACE:`@@redux/REPLACE${vh()}`},wh=Ew;function Ow(n){if(typeof n!="object"||n===null)return!1;let s=n;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(n)===s||Object.getPrototypeOf(n)===null}function Rb(n,s,r){if(typeof n!="function")throw new Error(dn(2));if(typeof s=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(dn(0));if(typeof s=="function"&&typeof r>"u"&&(r=s,s=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(dn(1));return r(Rb)(n,s)}let o=n,c=s,u=new Map,m=u,b=0,h=!1;function g(){m===u&&(m=new Map,u.forEach((j,O)=>{m.set(O,j)}))}function p(){if(h)throw new Error(dn(3));return c}function v(j){if(typeof j!="function")throw new Error(dn(4));if(h)throw new Error(dn(5));let O=!0;g();const T=b++;return m.set(T,j),function(){if(O){if(h)throw new Error(dn(6));O=!1,g(),m.delete(T),u=null}}}function x(j){if(!Ow(j))throw new Error(dn(7));if(typeof j.type>"u")throw new Error(dn(8));if(typeof j.type!="string")throw new Error(dn(17));if(h)throw new Error(dn(9));try{h=!0,c=o(c,j)}finally{h=!1}return(u=m).forEach(T=>{T()}),j}function N(j){if(typeof j!="function")throw new Error(dn(10));o=j,x({type:wh.REPLACE})}function D(){const j=v;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(dn(11));function T(){const R=O;R.next&&R.next(p())}return T(),{unsubscribe:j(T)}},[yh](){return this}}}return x({type:wh.INIT}),{dispatch:x,subscribe:v,getState:p,replaceReducer:N,[yh]:D}}function Nh(n,s){return function(...r){return s(n.apply(this,r))}}function kh(n,s){if(typeof n=="function")return Nh(n,s);if(typeof n!="object"||n===null)throw new Error(dn(16));const r={};for(const o in n){const c=n[o];typeof c=="function"&&(r[o]=Nh(c,s))}return r}function Lb(...n){return n.length===0?s=>s:n.length===1?n[0]:n.reduce((s,r)=>(...o)=>s(r(...o)))}function Rw(...n){return s=>(r,o)=>{const c=s(r,o);let u=()=>{throw new Error(dn(15))};const m={getState:c.getState,dispatch:(h,...g)=>u(h,...g)},b=n.map(h=>h(m));return u=Lb(...b)(c.dispatch),{...c,dispatch:u}}}var ku={exports:{}},ju={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh;function Lw(){if(jh)return ju;jh=1;var n=rc();function s(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var r=typeof Object.is=="function"?Object.is:s,o=n.useSyncExternalStore,c=n.useRef,u=n.useEffect,m=n.useMemo,b=n.useDebugValue;return ju.useSyncExternalStoreWithSelector=function(h,g,p,v,x){var N=c(null);if(N.current===null){var D={hasValue:!1,value:null};N.current=D}else D=N.current;N=m(function(){function j(_){if(!O){if(O=!0,T=_,_=v(_),x!==void 0&&D.hasValue){var $=D.value;if(x($,_))return I=$}return I=_}if($=I,r(T,_))return $;var se=v(_);return x!==void 0&&x($,se)?(T=_,$):(T=_,I=se)}var O=!1,T,I,R=p===void 0?null:p;return[function(){return j(g())},R===null?void 0:function(){return j(R())}]},[g,p,v,x]);var A=o(h,N[0],N[1]);return u(function(){D.hasValue=!0,D.value=A},[A]),b(A),A},ju}var Sh;function Pw(){return Sh||(Sh=1,ku.exports=Lw()),ku.exports}Pw();var Bw=w.version.startsWith("19"),_w=Symbol.for(Bw?"react.transitional.element":"react.element"),zw=Symbol.for("react.portal"),Iw=Symbol.for("react.fragment"),Hw=Symbol.for("react.strict_mode"),qw=Symbol.for("react.profiler"),Uw=Symbol.for("react.consumer"),Gw=Symbol.for("react.context"),Pb=Symbol.for("react.forward_ref"),$w=Symbol.for("react.suspense"),Yw=Symbol.for("react.suspense_list"),mf=Symbol.for("react.memo"),Fw=Symbol.for("react.lazy"),Vw=Pb,Qw=mf;function Xw(n){if(typeof n=="object"&&n!==null){const{$$typeof:s}=n;switch(s){case _w:switch(n=n.type,n){case Iw:case qw:case Hw:case $w:case Yw:return n;default:switch(n=n&&n.$$typeof,n){case Gw:case Pb:case Fw:case mf:return n;case Uw:return n;default:return s}}case zw:return s}}}function Zw(n){return Xw(n)===mf}function Ww(n,s,r,o,{areStatesEqual:c,areOwnPropsEqual:u,areStatePropsEqual:m}){let b=!1,h,g,p,v,x;function N(T,I){return h=T,g=I,p=n(h,g),v=s(o,g),x=r(p,v,g),b=!0,x}function D(){return p=n(h,g),s.dependsOnOwnProps&&(v=s(o,g)),x=r(p,v,g),x}function A(){return n.dependsOnOwnProps&&(p=n(h,g)),s.dependsOnOwnProps&&(v=s(o,g)),x=r(p,v,g),x}function j(){const T=n(h,g),I=!m(T,p);return p=T,I&&(x=r(p,v,g)),x}function O(T,I){const R=!u(I,g),_=!c(T,h,I,g);return h=T,g=I,R&&_?D():R?A():_?j():x}return function(I,R){return b?O(I,R):N(I,R)}}function Kw(n,{initMapStateToProps:s,initMapDispatchToProps:r,initMergeProps:o,...c}){const u=s(n,c),m=r(n,c),b=o(n,c);return Ww(u,m,b,n,c)}function Jw(n,s){const r={};for(const o in n){const c=n[o];typeof c=="function"&&(r[o]=(...u)=>s(c(...u)))}return r}function Hu(n){return function(r){const o=n(r);function c(){return o}return c.dependsOnOwnProps=!1,c}}function Dh(n){return n.dependsOnOwnProps?!!n.dependsOnOwnProps:n.length!==1}function Bb(n,s){return function(o,{displayName:c}){const u=function(b,h){return u.dependsOnOwnProps?u.mapToProps(b,h):u.mapToProps(b,void 0)};return u.dependsOnOwnProps=!0,u.mapToProps=function(b,h){u.mapToProps=n,u.dependsOnOwnProps=Dh(n);let g=u(b,h);return typeof g=="function"&&(u.mapToProps=g,u.dependsOnOwnProps=Dh(g),g=u(b,h)),g},u}}function gf(n,s){return(r,o)=>{throw new Error(`Invalid value of type ${typeof n} for ${s} argument when connecting component ${o.wrappedComponentName}.`)}}function eN(n){return n&&typeof n=="object"?Hu(s=>Jw(n,s)):n?typeof n=="function"?Bb(n):gf(n,"mapDispatchToProps"):Hu(s=>({dispatch:s}))}function tN(n){return n?typeof n=="function"?Bb(n):gf(n,"mapStateToProps"):Hu(()=>({}))}function nN(n,s,r){return{...r,...n,...s}}function aN(n){return function(r,{displayName:o,areMergedPropsEqual:c}){let u=!1,m;return function(h,g,p){const v=n(h,g,p);return u?c(v,m)||(m=v):(u=!0,m=v),m}}}function rN(n){return n?typeof n=="function"?aN(n):gf(n,"mergeProps"):()=>nN}function lN(n){n()}function sN(){let n=null,s=null;return{clear(){n=null,s=null},notify(){lN(()=>{let r=n;for(;r;)r.callback(),r=r.next})},get(){const r=[];let o=n;for(;o;)r.push(o),o=o.next;return r},subscribe(r){let o=!0;const c=s={callback:r,next:null,prev:s};return c.prev?c.prev.next=c:n=c,function(){!o||n===null||(o=!1,c.next?c.next.prev=c.prev:s=c.prev,c.prev?c.prev.next=c.next:n=c.next)}}}}var Ch={notify(){},get:()=>[]};function _b(n,s){let r,o=Ch,c=0,u=!1;function m(A){p();const j=o.subscribe(A);let O=!1;return()=>{O||(O=!0,j(),v())}}function b(){o.notify()}function h(){D.onStateChange&&D.onStateChange()}function g(){return u}function p(){c++,r||(r=s?s.addNestedSub(h):n.subscribe(h),o=sN())}function v(){c--,r&&c===0&&(r(),r=void 0,o.clear(),o=Ch)}function x(){u||(u=!0,p())}function N(){u&&(u=!1,v())}const D={addNestedSub:m,notifyNestedSubs:b,handleChangeWrapper:h,isSubscribed:g,trySubscribe:x,tryUnsubscribe:N,getListeners:()=>o};return D}var iN=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oN=iN(),cN=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dN=cN(),uN=()=>oN||dN?w.useLayoutEffect:w.useEffect,Xo=uN();function Ah(n,s){return n===s?n!==0||s!==0||1/n===1/s:n!==n&&s!==s}function Su(n,s){if(Ah(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;const r=Object.keys(n),o=Object.keys(s);if(r.length!==o.length)return!1;for(let c=0;c<r.length;c++)if(!Object.prototype.hasOwnProperty.call(s,r[c])||!Ah(n[r[c]],s[r[c]]))return!1;return!0}var fN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},gN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hN={[Vw]:gN,[Qw]:zb};function Th(n){return Zw(n)?zb:hN[n.$$typeof]||fN}var bN=Object.defineProperty,pN=Object.getOwnPropertyNames,Mh=Object.getOwnPropertySymbols,xN=Object.getOwnPropertyDescriptor,yN=Object.getPrototypeOf,Eh=Object.prototype;function qu(n,s){if(typeof s!="string"){if(Eh){const u=yN(s);u&&u!==Eh&&qu(n,u)}let r=pN(s);Mh&&(r=r.concat(Mh(s)));const o=Th(n),c=Th(s);for(let u=0;u<r.length;++u){const m=r[u];if(!mN[m]&&!(c&&c[m])&&!(o&&o[m])){const b=xN(s,m);try{bN(n,m,b)}catch{}}}}return n}var Du=Symbol.for("react-redux-context"),Cu=typeof globalThis<"u"?globalThis:{};function vN(){if(!w.createContext)return{};const n=Cu[Du]??(Cu[Du]=new Map);let s=n.get(w.createContext);return s||(s=w.createContext(null),n.set(w.createContext,s)),s}var Ib=vN(),wN=[null,null];function NN(n,s,r){Xo(()=>n(...s),r)}function kN(n,s,r,o,c,u){n.current=o,r.current=!1,c.current&&(c.current=null,u())}function jN(n,s,r,o,c,u,m,b,h,g,p){if(!n)return()=>{};let v=!1,x=null;const N=()=>{if(v||!b.current)return;const A=s.getState();let j,O;try{j=o(A,c.current)}catch(T){O=T,x=T}O||(x=null),j===u.current?m.current||g():(u.current=j,h.current=j,m.current=!0,p())};return r.onStateChange=N,r.trySubscribe(),N(),()=>{if(v=!0,r.tryUnsubscribe(),r.onStateChange=null,x)throw x}}function SN(n,s){return n===s}function DN(n,s,r,{pure:o,areStatesEqual:c=SN,areOwnPropsEqual:u=Su,areStatePropsEqual:m=Su,areMergedPropsEqual:b=Su,forwardRef:h=!1,context:g=Ib}={}){const p=g,v=tN(n),x=eN(s),N=rN(r),D=!!n;return j=>{const O=j.displayName||j.name||"Component",T=`Connect(${O})`,I={shouldHandleStateChanges:D,displayName:T,wrappedComponentName:O,WrappedComponent:j,initMapStateToProps:v,initMapDispatchToProps:x,initMergeProps:N,areStatesEqual:c,areStatePropsEqual:m,areOwnPropsEqual:u,areMergedPropsEqual:b};function R(se){const[q,ie,ue]=w.useMemo(()=>{const{reactReduxForwardedRef:Ye,...ae}=se;return[se.context,Ye,ae]},[se]),K=w.useMemo(()=>{let Ye=p;return q!=null&&q.Consumer,Ye},[q,p]),me=w.useContext(K),Me=!!se.store&&!!se.store.getState&&!!se.store.dispatch,Z=!!me&&!!me.store,Ae=Me?se.store:me.store,E=Z?me.getServerState:Ae.getState,W=w.useMemo(()=>Kw(Ae.dispatch,I),[Ae]),[ce,pe]=w.useMemo(()=>{if(!D)return wN;const Ye=_b(Ae,Me?void 0:me.subscription),ae=Ye.notifyNestedSubs.bind(Ye);return[Ye,ae]},[Ae,Me,me]),S=w.useMemo(()=>Me?me:{...me,subscription:ce},[Me,me,ce]),F=w.useRef(void 0),B=w.useRef(ue),X=w.useRef(void 0),te=w.useRef(!1),Te=w.useRef(!1),we=w.useRef(void 0);Xo(()=>(Te.current=!0,()=>{Te.current=!1}),[]);const oe=w.useMemo(()=>()=>X.current&&ue===B.current?X.current:W(Ae.getState(),ue),[Ae,ue]),xe=w.useMemo(()=>ae=>ce?jN(D,Ae,ce,W,B,F,te,Te,X,pe,ae):()=>{},[ce]);NN(kN,[B,F,te,ue,X,pe]);let _e;try{_e=w.useSyncExternalStore(xe,oe,E?()=>W(E(),ue):oe)}catch(Ye){throw we.current&&(Ye.message+=`
The error may be correlated with this previous error:
${we.current.stack}

`),Ye}Xo(()=>{we.current=void 0,X.current=void 0,F.current=_e});const $e=w.useMemo(()=>w.createElement(j,{..._e,ref:ie}),[ie,j,_e]);return w.useMemo(()=>D?w.createElement(K.Provider,{value:S},$e):$e,[K,$e,S])}const $=w.memo(R);if($.WrappedComponent=j,$.displayName=R.displayName=T,h){const q=w.forwardRef(function(ue,K){return w.createElement($,{...ue,reactReduxForwardedRef:K})});return q.displayName=T,q.WrappedComponent=j,qu(q,j)}return qu($,j)}}var Hb=DN;function CN(n){const{children:s,context:r,serverState:o,store:c}=n,u=w.useMemo(()=>{const h=_b(c);return{store:c,subscription:h,getServerState:o?()=>o:void 0}},[c,o]),m=w.useMemo(()=>c.getState(),[c]);Xo(()=>{const{subscription:h}=u;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),m!==c.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[u,m]);const b=r||Ib;return w.createElement(b.Provider,{value:u},s)}var AN=CN,TN="Invariant failed";function MN(n,s){throw new Error(TN)}var Jn=function(s){var r=s.top,o=s.right,c=s.bottom,u=s.left,m=o-u,b=c-r,h={top:r,right:o,bottom:c,left:u,width:m,height:b,x:u,y:r,center:{x:(o+u)/2,y:(c+r)/2}};return h},hf=function(s,r){return{top:s.top-r.top,left:s.left-r.left,bottom:s.bottom+r.bottom,right:s.right+r.right}},Oh=function(s,r){return{top:s.top+r.top,left:s.left+r.left,bottom:s.bottom-r.bottom,right:s.right-r.right}},EN=function(s,r){return{top:s.top+r.y,left:s.left+r.x,bottom:s.bottom+r.y,right:s.right+r.x}},Au={top:0,right:0,bottom:0,left:0},bf=function(s){var r=s.borderBox,o=s.margin,c=o===void 0?Au:o,u=s.border,m=u===void 0?Au:u,b=s.padding,h=b===void 0?Au:b,g=Jn(hf(r,c)),p=Jn(Oh(r,m)),v=Jn(Oh(p,h));return{marginBox:g,borderBox:Jn(r),paddingBox:p,contentBox:v,margin:c,border:m,padding:h}},qn=function(s){var r=s.slice(0,-2),o=s.slice(-2);if(o!=="px")return 0;var c=Number(r);return isNaN(c)&&MN(),c},ON=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Zo=function(s,r){var o=s.borderBox,c=s.border,u=s.margin,m=s.padding,b=EN(o,r);return bf({borderBox:b,border:c,margin:u,padding:m})},Wo=function(s,r){return r===void 0&&(r=ON()),Zo(s,r)},qb=function(s,r){var o={top:qn(r.marginTop),right:qn(r.marginRight),bottom:qn(r.marginBottom),left:qn(r.marginLeft)},c={top:qn(r.paddingTop),right:qn(r.paddingRight),bottom:qn(r.paddingBottom),left:qn(r.paddingLeft)},u={top:qn(r.borderTopWidth),right:qn(r.borderRightWidth),bottom:qn(r.borderBottomWidth),left:qn(r.borderLeftWidth)};return bf({borderBox:s,margin:o,padding:c,border:u})},Ub=function(s){var r=s.getBoundingClientRect(),o=window.getComputedStyle(s);return qb(r,o)},di=function(s){var r=[],o=null,c=function(){for(var m=arguments.length,b=new Array(m),h=0;h<m;h++)b[h]=arguments[h];r=b,!o&&(o=requestAnimationFrame(function(){o=null,s.apply(void 0,r)}))};return c.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},c};function Ko(){return Ko=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var o in r)({}).hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},Ko.apply(null,arguments)}function Gb(n,s){}Gb.bind(null,"warn");Gb.bind(null,"error");function ir(){}function RN(n,s){return{...n,...s}}function Un(n,s,r){const o=s.map(c=>{const u=RN(r,c.options);return n.addEventListener(c.eventName,c.fn,u),function(){n.removeEventListener(c.eventName,c.fn,u)}});return function(){o.forEach(u=>{u()})}}const LN="Invariant failed";class Jo extends Error{}Jo.prototype.toString=function(){return this.message};function he(n,s){throw new Jo(LN)}class PN extends Xe.Component{constructor(...s){super(...s),this.callbacks=null,this.unbind=ir,this.onWindowError=r=>{const o=this.getCallbacks();o.isDragging()&&o.tryAbort(),r.error instanceof Jo&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Un(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(s){if(s instanceof Jo){this.setState({});return}throw s}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const BN=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ec=n=>n+1,_N=n=>`
  You have lifted an item in position ${ec(n.source.index)}
`,$b=(n,s)=>{const r=n.droppableId===s.droppableId,o=ec(n.index),c=ec(s.index);return r?`
      You have moved the item from position ${o}
      to position ${c}
    `:`
    You have moved the item from position ${o}
    in list ${n.droppableId}
    to list ${s.droppableId}
    in position ${c}
  `},Yb=(n,s,r)=>s.droppableId===r.droppableId?`
      The item ${n}
      has been combined with ${r.draggableId}`:`
      The item ${n}
      in list ${s.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,zN=n=>{const s=n.destination;if(s)return $b(n.source,s);const r=n.combine;return r?Yb(n.draggableId,n.source,r):"You are over an area that cannot be dropped on"},Rh=n=>`
  The item has returned to its starting position
  of ${ec(n.index)}
`,IN=n=>{if(n.reason==="CANCEL")return`
      Movement cancelled.
      ${Rh(n.source)}
    `;const s=n.destination,r=n.combine;return s?`
      You have dropped the item.
      ${$b(n.source,s)}
    `:r?`
      You have dropped the item.
      ${Yb(n.draggableId,n.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Rh(n.source)}
  `},$o={dragHandleUsageInstructions:BN,onDragStart:_N,onDragUpdate:zN,onDragEnd:IN};function HN(n,s){return!!(n===s||Number.isNaN(n)&&Number.isNaN(s))}function Fb(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!HN(n[r],s[r]))return!1;return!0}function rt(n,s){const r=w.useState(()=>({inputs:s,result:n()}))[0],o=w.useRef(!0),c=w.useRef(r),m=o.current||!!(s&&c.current.inputs&&Fb(s,c.current.inputs))?c.current:{inputs:s,result:n()};return w.useEffect(()=>{o.current=!1,c.current=m},[m]),m.result}function Pe(n,s){return rt(()=>n,s)}const Zt={x:0,y:0},en=(n,s)=>({x:n.x+s.x,y:n.y+s.y}),Cn=(n,s)=>({x:n.x-s.x,y:n.y-s.y}),or=(n,s)=>n.x===s.x&&n.y===s.y,Yl=n=>({x:n.x!==0?-n.x:0,y:n.y!==0?-n.y:0}),Gr=(n,s,r=0)=>n==="x"?{x:s,y:r}:{x:r,y:s},ui=(n,s)=>Math.sqrt((s.x-n.x)**2+(s.y-n.y)**2),Lh=(n,s)=>Math.min(...s.map(r=>ui(n,r))),Vb=n=>s=>({x:n(s.x),y:n(s.y)});var qN=(n,s)=>{const r=Jn({top:Math.max(s.top,n.top),right:Math.min(s.right,n.right),bottom:Math.min(s.bottom,n.bottom),left:Math.max(s.left,n.left)});return r.width<=0||r.height<=0?null:r};const pi=(n,s)=>({top:n.top+s.y,left:n.left+s.x,bottom:n.bottom+s.y,right:n.right+s.x}),Ph=n=>[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.left,y:n.bottom},{x:n.right,y:n.bottom}],UN={top:0,right:0,bottom:0,left:0},GN=(n,s)=>s?pi(n,s.scroll.diff.displacement):n,$N=(n,s,r)=>r&&r.increasedBy?{...n,[s.end]:n[s.end]+r.increasedBy[s.line]}:n,YN=(n,s)=>s&&s.shouldClipSubject?qN(s.pageMarginBox,n):Jn(n);var Ul=({page:n,withPlaceholder:s,axis:r,frame:o})=>{const c=GN(n.marginBox,o),u=$N(c,r,s),m=YN(u,o);return{page:n,withPlaceholder:s,active:m}},pf=(n,s)=>{n.frame||he();const r=n.frame,o=Cn(s,r.scroll.initial),c=Yl(o),u={...r,scroll:{initial:r.scroll.initial,current:s,diff:{value:o,displacement:c},max:r.scroll.max}},m=Ul({page:n.subject.page,withPlaceholder:n.subject.withPlaceholder,axis:n.axis,frame:u});return{...n,frame:u,subject:m}};function Xt(n,s=Fb){let r=null;function o(...c){if(r&&r.lastThis===this&&s(c,r.lastArgs))return r.lastResult;const u=n.apply(this,c);return r={lastResult:u,lastArgs:c,lastThis:this},u}return o.clear=function(){r=null},o}const Qb=Xt(n=>n.reduce((s,r)=>(s[r.descriptor.id]=r,s),{})),Xb=Xt(n=>n.reduce((s,r)=>(s[r.descriptor.id]=r,s),{})),oc=Xt(n=>Object.values(n)),FN=Xt(n=>Object.values(n));var Fl=Xt((n,s)=>FN(s).filter(o=>n===o.descriptor.droppableId).sort((o,c)=>o.descriptor.index-c.descriptor.index));function xf(n){return n.at&&n.at.type==="REORDER"?n.at.destination:null}function cc(n){return n.at&&n.at.type==="COMBINE"?n.at.combine:null}var dc=Xt((n,s)=>s.filter(r=>r.descriptor.id!==n.descriptor.id)),VN=({isMovingForward:n,draggable:s,destination:r,insideDestination:o,previousImpact:c})=>{if(!r.isCombineEnabled||!xf(c))return null;function m(N){const D={type:"COMBINE",combine:{draggableId:N,droppableId:r.descriptor.id}};return{...c,at:D}}const b=c.displaced.all,h=b.length?b[0]:null;if(n)return h?m(h):null;const g=dc(s,o);if(!h){if(!g.length)return null;const N=g[g.length-1];return m(N.descriptor.id)}const p=g.findIndex(N=>N.descriptor.id===h);p===-1&&he();const v=p-1;if(v<0)return null;const x=g[v];return m(x.descriptor.id)},Vl=(n,s)=>n.descriptor.droppableId===s.descriptor.id;const Zb={point:Zt,value:0},fi={invisible:{},visible:{},all:[]},QN={displaced:fi,displacedBy:Zb,at:null};var $n=(n,s)=>r=>n<=r&&r<=s,Wb=n=>{const s=$n(n.top,n.bottom),r=$n(n.left,n.right);return o=>{if(s(o.top)&&s(o.bottom)&&r(o.left)&&r(o.right))return!0;const u=s(o.top)||s(o.bottom),m=r(o.left)||r(o.right);if(u&&m)return!0;const h=o.top<n.top&&o.bottom>n.bottom,g=o.left<n.left&&o.right>n.right;return h&&g?!0:h&&m||g&&u}},XN=n=>{const s=$n(n.top,n.bottom),r=$n(n.left,n.right);return o=>s(o.top)&&s(o.bottom)&&r(o.left)&&r(o.right)};const yf={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Kb={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var ZN=n=>s=>{const r=$n(s.top,s.bottom),o=$n(s.left,s.right);return c=>n===yf?r(c.top)&&r(c.bottom):o(c.left)&&o(c.right)};const WN=(n,s)=>{const r=s.frame?s.frame.scroll.diff.displacement:Zt;return pi(n,r)},KN=(n,s,r)=>s.subject.active?r(s.subject.active)(n):!1,JN=(n,s,r)=>r(s)(n),vf=({target:n,destination:s,viewport:r,withDroppableDisplacement:o,isVisibleThroughFrameFn:c})=>{const u=o?WN(n,s):n;return KN(u,s,c)&&JN(u,r,c)},ek=n=>vf({...n,isVisibleThroughFrameFn:Wb}),Jb=n=>vf({...n,isVisibleThroughFrameFn:XN}),tk=n=>vf({...n,isVisibleThroughFrameFn:ZN(n.destination.axis)}),nk=(n,s,r)=>{if(typeof r=="boolean")return r;if(!s)return!0;const{invisible:o,visible:c}=s;if(o[n])return!1;const u=c[n];return u?u.shouldAnimate:!0};function ak(n,s){const r=n.page.marginBox,o={top:s.point.y,right:0,bottom:0,left:s.point.x};return Jn(hf(r,o))}function mi({afterDragging:n,destination:s,displacedBy:r,viewport:o,forceShouldAnimate:c,last:u}){return n.reduce(function(b,h){const g=ak(h,r),p=h.descriptor.id;if(b.all.push(p),!ek({target:g,destination:s,viewport:o,withDroppableDisplacement:!0}))return b.invisible[h.descriptor.id]=!0,b;const x=nk(p,u,c),N={draggableId:p,shouldAnimate:x};return b.visible[p]=N,b},{all:[],visible:{},invisible:{}})}function rk(n,s){if(!n.length)return 0;const r=n[n.length-1].descriptor.index;return s.inHomeList?r:r+1}function Bh({insideDestination:n,inHomeList:s,displacedBy:r,destination:o}){const c=rk(n,{inHomeList:s});return{displaced:fi,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:c}}}}function tc({draggable:n,insideDestination:s,destination:r,viewport:o,displacedBy:c,last:u,index:m,forceShouldAnimate:b}){const h=Vl(n,r);if(m==null)return Bh({insideDestination:s,inHomeList:h,displacedBy:c,destination:r});const g=s.find(D=>D.descriptor.index===m);if(!g)return Bh({insideDestination:s,inHomeList:h,displacedBy:c,destination:r});const p=dc(n,s),v=s.indexOf(g),x=p.slice(v);return{displaced:mi({afterDragging:x,destination:r,displacedBy:c,last:u,viewport:o.frame,forceShouldAnimate:b}),displacedBy:c,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:m}}}}function dr(n,s){return!!s.effected[n]}var lk=({isMovingForward:n,destination:s,draggables:r,combine:o,afterCritical:c})=>{if(!s.isCombineEnabled)return null;const u=o.draggableId,b=r[u].descriptor.index;return dr(u,c)?n?b:b-1:n?b+1:b},sk=({isMovingForward:n,isInHomeList:s,insideDestination:r,location:o})=>{if(!r.length)return null;const c=o.index,u=n?c+1:c-1,m=r[0].descriptor.index,b=r[r.length-1].descriptor.index,h=s?b:b+1;return u<m||u>h?null:u},ik=({isMovingForward:n,isInHomeList:s,draggable:r,draggables:o,destination:c,insideDestination:u,previousImpact:m,viewport:b,afterCritical:h})=>{const g=m.at;if(g||he(),g.type==="REORDER"){const v=sk({isMovingForward:n,isInHomeList:s,location:g.destination,insideDestination:u});return v==null?null:tc({draggable:r,insideDestination:u,destination:c,viewport:b,last:m.displaced,displacedBy:m.displacedBy,index:v})}const p=lk({isMovingForward:n,destination:c,displaced:m.displaced,draggables:o,combine:g.combine,afterCritical:h});return p==null?null:tc({draggable:r,insideDestination:u,destination:c,viewport:b,last:m.displaced,displacedBy:m.displacedBy,index:p})},ok=({displaced:n,afterCritical:s,combineWith:r,displacedBy:o})=>{const c=!!(n.visible[r]||n.invisible[r]);return dr(r,s)?c?Zt:Yl(o.point):c?o.point:Zt},ck=({afterCritical:n,impact:s,draggables:r})=>{const o=cc(s);o||he();const c=o.draggableId,u=r[c].page.borderBox.center,m=ok({displaced:s.displaced,afterCritical:n,combineWith:c,displacedBy:s.displacedBy});return en(u,m)};const ep=(n,s)=>s.margin[n.start]+s.borderBox[n.size]/2,dk=(n,s)=>s.margin[n.end]+s.borderBox[n.size]/2,wf=(n,s,r)=>s[n.crossAxisStart]+r.margin[n.crossAxisStart]+r.borderBox[n.crossAxisSize]/2,_h=({axis:n,moveRelativeTo:s,isMoving:r})=>Gr(n.line,s.marginBox[n.end]+ep(n,r),wf(n,s.marginBox,r)),zh=({axis:n,moveRelativeTo:s,isMoving:r})=>Gr(n.line,s.marginBox[n.start]-dk(n,r),wf(n,s.marginBox,r)),uk=({axis:n,moveInto:s,isMoving:r})=>Gr(n.line,s.contentBox[n.start]+ep(n,r),wf(n,s.contentBox,r));var fk=({impact:n,draggable:s,draggables:r,droppable:o,afterCritical:c})=>{const u=Fl(o.descriptor.id,r),m=s.page,b=o.axis;if(!u.length)return uk({axis:b,moveInto:o.page,isMoving:m});const{displaced:h,displacedBy:g}=n,p=h.all[0];if(p){const x=r[p];if(dr(p,c))return zh({axis:b,moveRelativeTo:x.page,isMoving:m});const N=Zo(x.page,g.point);return zh({axis:b,moveRelativeTo:N,isMoving:m})}const v=u[u.length-1];if(v.descriptor.id===s.descriptor.id)return m.borderBox.center;if(dr(v.descriptor.id,c)){const x=Zo(v.page,Yl(c.displacedBy.point));return _h({axis:b,moveRelativeTo:x,isMoving:m})}return _h({axis:b,moveRelativeTo:v.page,isMoving:m})},Uu=(n,s)=>{const r=n.frame;return r?en(s,r.scroll.diff.displacement):s};const mk=({impact:n,draggable:s,droppable:r,draggables:o,afterCritical:c})=>{const u=s.page.borderBox.center,m=n.at;return!r||!m?u:m.type==="REORDER"?fk({impact:n,draggable:s,draggables:o,droppable:r,afterCritical:c}):ck({impact:n,draggables:o,afterCritical:c})};var uc=n=>{const s=mk(n),r=n.droppable;return r?Uu(r,s):s},tp=(n,s)=>{const r=Cn(s,n.scroll.initial),o=Yl(r);return{frame:Jn({top:s.y,bottom:s.y+n.frame.height,left:s.x,right:s.x+n.frame.width}),scroll:{initial:n.scroll.initial,max:n.scroll.max,current:s,diff:{value:r,displacement:o}}}};function Ih(n,s){return n.map(r=>s[r])}function gk(n,s){for(let r=0;r<s.length;r++){const o=s[r].visible[n];if(o)return o}return null}var hk=({impact:n,viewport:s,destination:r,draggables:o,maxScrollChange:c})=>{const u=tp(s,en(s.scroll.current,c)),m=r.frame?pf(r,en(r.frame.scroll.current,c)):r,b=n.displaced,h=mi({afterDragging:Ih(b.all,o),destination:r,displacedBy:n.displacedBy,viewport:u.frame,last:b,forceShouldAnimate:!1}),g=mi({afterDragging:Ih(b.all,o),destination:m,displacedBy:n.displacedBy,viewport:s.frame,last:b,forceShouldAnimate:!1}),p={},v={},x=[b,h,g];return b.all.forEach(D=>{const A=gk(D,x);if(A){v[D]=A;return}p[D]=!0}),{...n,displaced:{all:b.all,invisible:p,visible:v}}},bk=(n,s)=>en(n.scroll.diff.displacement,s),Nf=({pageBorderBoxCenter:n,draggable:s,viewport:r})=>{const o=bk(r,n),c=Cn(o,s.page.borderBox.center);return en(s.client.borderBox.center,c)},np=({draggable:n,destination:s,newPageBorderBoxCenter:r,viewport:o,withDroppableDisplacement:c,onlyOnMainAxis:u=!1})=>{const m=Cn(r,n.page.borderBox.center),h={target:pi(n.page.borderBox,m),destination:s,withDroppableDisplacement:c,viewport:o};return u?tk(h):Jb(h)},pk=({isMovingForward:n,draggable:s,destination:r,draggables:o,previousImpact:c,viewport:u,previousPageBorderBoxCenter:m,previousClientSelection:b,afterCritical:h})=>{if(!r.isEnabled)return null;const g=Fl(r.descriptor.id,o),p=Vl(s,r),v=VN({isMovingForward:n,draggable:s,destination:r,insideDestination:g,previousImpact:c})||ik({isMovingForward:n,isInHomeList:p,draggable:s,draggables:o,destination:r,insideDestination:g,previousImpact:c,viewport:u,afterCritical:h});if(!v)return null;const x=uc({impact:v,draggable:s,droppable:r,draggables:o,afterCritical:h});if(np({draggable:s,destination:r,newPageBorderBoxCenter:x,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Nf({pageBorderBoxCenter:x,draggable:s,viewport:u}),impact:v,scrollJumpRequest:null};const D=Cn(x,m),A=hk({impact:v,viewport:u,destination:r,draggables:o,maxScrollChange:D});return{clientSelection:b,impact:A,scrollJumpRequest:D}};const cn=n=>{const s=n.subject.active;return s||he(),s};var xk=({isMovingForward:n,pageBorderBoxCenter:s,source:r,droppables:o,viewport:c})=>{const u=r.subject.active;if(!u)return null;const m=r.axis,b=$n(u[m.start],u[m.end]),h=oc(o).filter(p=>p!==r).filter(p=>p.isEnabled).filter(p=>!!p.subject.active).filter(p=>Wb(c.frame)(cn(p))).filter(p=>{const v=cn(p);return n?u[m.crossAxisEnd]<v[m.crossAxisEnd]:v[m.crossAxisStart]<u[m.crossAxisStart]}).filter(p=>{const v=cn(p),x=$n(v[m.start],v[m.end]);return b(v[m.start])||b(v[m.end])||x(u[m.start])||x(u[m.end])}).sort((p,v)=>{const x=cn(p)[m.crossAxisStart],N=cn(v)[m.crossAxisStart];return n?x-N:N-x}).filter((p,v,x)=>cn(p)[m.crossAxisStart]===cn(x[0])[m.crossAxisStart]);if(!h.length)return null;if(h.length===1)return h[0];const g=h.filter(p=>$n(cn(p)[m.start],cn(p)[m.end])(s[m.line]));return g.length===1?g[0]:g.length>1?g.sort((p,v)=>cn(p)[m.start]-cn(v)[m.start])[0]:h.sort((p,v)=>{const x=Lh(s,Ph(cn(p))),N=Lh(s,Ph(cn(v)));return x!==N?x-N:cn(p)[m.start]-cn(v)[m.start]})[0]};const Hh=(n,s)=>{const r=n.page.borderBox.center;return dr(n.descriptor.id,s)?Cn(r,s.displacedBy.point):r},yk=(n,s)=>{const r=n.page.borderBox;return dr(n.descriptor.id,s)?pi(r,Yl(s.displacedBy.point)):r};var vk=({pageBorderBoxCenter:n,viewport:s,destination:r,insideDestination:o,afterCritical:c})=>o.filter(m=>Jb({target:yk(m,c),destination:r,viewport:s.frame,withDroppableDisplacement:!0})).sort((m,b)=>{const h=ui(n,Uu(r,Hh(m,c))),g=ui(n,Uu(r,Hh(b,c)));return h<g?-1:g<h?1:m.descriptor.index-b.descriptor.index})[0]||null,xi=Xt(function(s,r){const o=r[s.line];return{value:o,point:Gr(s.line,o)}});const wk=(n,s,r)=>{const o=n.axis;if(n.descriptor.mode==="virtual")return Gr(o.line,s[o.line]);const c=n.subject.page.contentBox[o.size],h=Fl(n.descriptor.id,r).reduce((g,p)=>g+p.client.marginBox[o.size],0)+s[o.line]-c;return h<=0?null:Gr(o.line,h)},ap=(n,s)=>({...n,scroll:{...n.scroll,max:s}}),rp=(n,s,r)=>{const o=n.frame;Vl(s,n)&&he(),n.subject.withPlaceholder&&he();const c=xi(n.axis,s.displaceBy).point,u=wk(n,c,r),m={placeholderSize:c,increasedBy:u,oldFrameMaxScroll:n.frame?n.frame.scroll.max:null};if(!o){const p=Ul({page:n.subject.page,withPlaceholder:m,axis:n.axis,frame:n.frame});return{...n,subject:p}}const b=u?en(o.scroll.max,u):o.scroll.max,h=ap(o,b),g=Ul({page:n.subject.page,withPlaceholder:m,axis:n.axis,frame:h});return{...n,subject:g,frame:h}},Nk=n=>{const s=n.subject.withPlaceholder;s||he();const r=n.frame;if(!r){const m=Ul({page:n.subject.page,axis:n.axis,frame:null,withPlaceholder:null});return{...n,subject:m}}const o=s.oldFrameMaxScroll;o||he();const c=ap(r,o),u=Ul({page:n.subject.page,axis:n.axis,frame:c,withPlaceholder:null});return{...n,subject:u,frame:c}};var kk=({previousPageBorderBoxCenter:n,moveRelativeTo:s,insideDestination:r,draggable:o,draggables:c,destination:u,viewport:m,afterCritical:b})=>{if(!s){if(r.length)return null;const v={displaced:fi,displacedBy:Zb,at:{type:"REORDER",destination:{droppableId:u.descriptor.id,index:0}}},x=uc({impact:v,draggable:o,droppable:u,draggables:c,afterCritical:b}),N=Vl(o,u)?u:rp(u,o,c);return np({draggable:o,destination:N,newPageBorderBoxCenter:x,viewport:m.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?v:null}const h=n[u.axis.line]<=s.page.borderBox.center[u.axis.line],g=(()=>{const v=s.descriptor.index;return s.descriptor.id===o.descriptor.id||h?v:v+1})(),p=xi(u.axis,o.displaceBy);return tc({draggable:o,insideDestination:r,destination:u,viewport:m,displacedBy:p,last:fi,index:g})},jk=({isMovingForward:n,previousPageBorderBoxCenter:s,draggable:r,isOver:o,draggables:c,droppables:u,viewport:m,afterCritical:b})=>{const h=xk({isMovingForward:n,pageBorderBoxCenter:s,source:o,droppables:u,viewport:m});if(!h)return null;const g=Fl(h.descriptor.id,c),p=vk({pageBorderBoxCenter:s,viewport:m,destination:h,insideDestination:g,afterCritical:b}),v=kk({previousPageBorderBoxCenter:s,destination:h,draggable:r,draggables:c,moveRelativeTo:p,insideDestination:g,viewport:m,afterCritical:b});if(!v)return null;const x=uc({impact:v,draggable:r,droppable:h,draggables:c,afterCritical:b});return{clientSelection:Nf({pageBorderBoxCenter:x,draggable:r,viewport:m}),impact:v,scrollJumpRequest:null}},An=n=>{const s=n.at;return s?s.type==="REORDER"?s.destination.droppableId:s.combine.droppableId:null};const Sk=(n,s)=>{const r=An(n);return r?s[r]:null};var Dk=({state:n,type:s})=>{const r=Sk(n.impact,n.dimensions.droppables),o=!!r,c=n.dimensions.droppables[n.critical.droppable.id],u=r||c,m=u.axis.direction,b=m==="vertical"&&(s==="MOVE_UP"||s==="MOVE_DOWN")||m==="horizontal"&&(s==="MOVE_LEFT"||s==="MOVE_RIGHT");if(b&&!o)return null;const h=s==="MOVE_DOWN"||s==="MOVE_RIGHT",g=n.dimensions.draggables[n.critical.draggable.id],p=n.current.page.borderBoxCenter,{draggables:v,droppables:x}=n.dimensions;return b?pk({isMovingForward:h,previousPageBorderBoxCenter:p,draggable:g,destination:u,draggables:v,viewport:n.viewport,previousClientSelection:n.current.client.selection,previousImpact:n.impact,afterCritical:n.afterCritical}):jk({isMovingForward:h,previousPageBorderBoxCenter:p,draggable:g,isOver:u,draggables:v,droppables:x,viewport:n.viewport,afterCritical:n.afterCritical})};function qr(n){return n.phase==="DRAGGING"||n.phase==="COLLECTING"}function lp(n){const s=$n(n.top,n.bottom),r=$n(n.left,n.right);return function(c){return s(c.y)&&r(c.x)}}function Ck(n,s){return n.left<s.right&&n.right>s.left&&n.top<s.bottom&&n.bottom>s.top}function Ak({pageBorderBox:n,draggable:s,candidates:r}){const o=s.page.borderBox.center,c=r.map(u=>{const m=u.axis,b=Gr(u.axis.line,n.center[m.line],u.page.borderBox.center[m.crossAxisLine]);return{id:u.descriptor.id,distance:ui(o,b)}}).sort((u,m)=>m.distance-u.distance);return c[0]?c[0].id:null}function Tk({pageBorderBox:n,draggable:s,droppables:r}){const o=oc(r).filter(c=>{if(!c.isEnabled)return!1;const u=c.subject.active;if(!u||!Ck(n,u))return!1;if(lp(u)(n.center))return!0;const m=c.axis,b=u.center[m.crossAxisLine],h=n[m.crossAxisStart],g=n[m.crossAxisEnd],p=$n(u[m.crossAxisStart],u[m.crossAxisEnd]),v=p(h),x=p(g);return!v&&!x?!0:v?h<b:g>b});return o.length?o.length===1?o[0].descriptor.id:Ak({pageBorderBox:n,draggable:s,candidates:o}):null}const sp=(n,s)=>Jn(pi(n,s));var Mk=(n,s)=>{const r=n.frame;return r?sp(s,r.scroll.diff.value):s};function ip({displaced:n,id:s}){return!!(n.visible[s]||n.invisible[s])}function Ek({draggable:n,closest:s,inHomeList:r}){return s?r&&s.descriptor.index>n.descriptor.index?s.descriptor.index-1:s.descriptor.index:null}var Ok=({pageBorderBoxWithDroppableScroll:n,draggable:s,destination:r,insideDestination:o,last:c,viewport:u,afterCritical:m})=>{const b=r.axis,h=xi(r.axis,s.displaceBy),g=h.value,p=n[b.start],v=n[b.end],N=dc(s,o).find(A=>{const j=A.descriptor.id,O=A.page.borderBox.center[b.line],T=dr(j,m),I=ip({displaced:c,id:j});return T?I?v<=O:p<O-g:I?v<=O+g:p<O})||null,D=Ek({draggable:s,closest:N,inHomeList:Vl(s,r)});return tc({draggable:s,insideDestination:o,destination:r,viewport:u,last:c,displacedBy:h,index:D})};const Rk=4;var Lk=({draggable:n,pageBorderBoxWithDroppableScroll:s,previousImpact:r,destination:o,insideDestination:c,afterCritical:u})=>{if(!o.isCombineEnabled)return null;const m=o.axis,b=xi(o.axis,n.displaceBy),h=b.value,g=s[m.start],p=s[m.end],x=dc(n,c).find(D=>{const A=D.descriptor.id,j=D.page.borderBox,T=j[m.size]/Rk,I=dr(A,u),R=ip({displaced:r.displaced,id:A});return I?R?p>j[m.start]+T&&p<j[m.end]-T:g>j[m.start]-h+T&&g<j[m.end]-h-T:R?p>j[m.start]+h+T&&p<j[m.end]+h-T:g>j[m.start]+T&&g<j[m.end]-T});return x?{displacedBy:b,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:o.descriptor.id}}}:null},op=({pageOffset:n,draggable:s,draggables:r,droppables:o,previousImpact:c,viewport:u,afterCritical:m})=>{const b=sp(s.page.borderBox,n),h=Tk({pageBorderBox:b,draggable:s,droppables:o});if(!h)return QN;const g=o[h],p=Fl(g.descriptor.id,r),v=Mk(g,b);return Lk({pageBorderBoxWithDroppableScroll:v,draggable:s,previousImpact:c,destination:g,insideDestination:p,afterCritical:m})||Ok({pageBorderBoxWithDroppableScroll:v,draggable:s,destination:g,insideDestination:p,last:c.displaced,viewport:u,afterCritical:m})},kf=(n,s)=>({...n,[s.descriptor.id]:s});const Pk=({previousImpact:n,impact:s,droppables:r})=>{const o=An(n),c=An(s);if(!o||o===c)return r;const u=r[o];if(!u.subject.withPlaceholder)return r;const m=Nk(u);return kf(r,m)};var Bk=({draggable:n,draggables:s,droppables:r,previousImpact:o,impact:c})=>{const u=Pk({previousImpact:o,impact:c,droppables:r}),m=An(c);if(!m)return u;const b=r[m];if(Vl(n,b)||b.subject.withPlaceholder)return u;const h=rp(b,n,s);return kf(u,h)},ii=({state:n,clientSelection:s,dimensions:r,viewport:o,impact:c,scrollJumpRequest:u})=>{const m=o||n.viewport,b=r||n.dimensions,h=s||n.current.client.selection,g=Cn(h,n.initial.client.selection),p={offset:g,selection:h,borderBoxCenter:en(n.initial.client.borderBoxCenter,g)},v={selection:en(p.selection,m.scroll.current),borderBoxCenter:en(p.borderBoxCenter,m.scroll.current),offset:en(p.offset,m.scroll.diff.value)},x={client:p,page:v};if(n.phase==="COLLECTING")return{...n,dimensions:b,viewport:m,current:x};const N=b.draggables[n.critical.draggable.id],D=c||op({pageOffset:v.offset,draggable:N,draggables:b.draggables,droppables:b.droppables,previousImpact:n.impact,viewport:m,afterCritical:n.afterCritical}),A=Bk({draggable:N,impact:D,previousImpact:n.impact,draggables:b.draggables,droppables:b.droppables});return{...n,current:x,dimensions:{draggables:b.draggables,droppables:A},impact:D,viewport:m,scrollJumpRequest:u||null,forceShouldAnimate:u?!1:null}};function _k(n,s){return n.map(r=>s[r])}var cp=({impact:n,viewport:s,draggables:r,destination:o,forceShouldAnimate:c})=>{const u=n.displaced,m=_k(u.all,r),b=mi({afterDragging:m,destination:o,displacedBy:n.displacedBy,viewport:s.frame,forceShouldAnimate:c,last:u});return{...n,displaced:b}},dp=({impact:n,draggable:s,droppable:r,draggables:o,viewport:c,afterCritical:u})=>{const m=uc({impact:n,draggable:s,draggables:o,droppable:r,afterCritical:u});return Nf({pageBorderBoxCenter:m,draggable:s,viewport:c})},up=({state:n,dimensions:s,viewport:r})=>{n.movementMode!=="SNAP"&&he();const o=n.impact,c=r||n.viewport,u=s||n.dimensions,{draggables:m,droppables:b}=u,h=m[n.critical.draggable.id],g=An(o);g||he();const p=b[g],v=cp({impact:o,viewport:c,destination:p,draggables:m}),x=dp({impact:v,draggable:h,droppable:p,draggables:m,viewport:c,afterCritical:n.afterCritical});return ii({impact:v,clientSelection:x,state:n,dimensions:u,viewport:c})},zk=n=>({index:n.index,droppableId:n.droppableId}),fp=({draggable:n,home:s,draggables:r,viewport:o})=>{const c=xi(s.axis,n.displaceBy),u=Fl(s.descriptor.id,r),m=u.indexOf(n);m===-1&&he();const b=u.slice(m+1),h=b.reduce((x,N)=>(x[N.descriptor.id]=!0,x),{}),g={inVirtualList:s.descriptor.mode==="virtual",displacedBy:c,effected:h};return{impact:{displaced:mi({afterDragging:b,destination:s,displacedBy:c,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:c,at:{type:"REORDER",destination:zk(n.descriptor)}},afterCritical:g}},Ik=(n,s)=>({draggables:n.draggables,droppables:kf(n.droppables,s)}),Hk=({draggable:n,offset:s,initialWindowScroll:r})=>{const o=Zo(n.client,s),c=Wo(o,r);return{...n,placeholder:{...n.placeholder,client:o},client:o,page:c}},qk=n=>{const s=n.frame;return s||he(),s},Uk=({additions:n,updatedDroppables:s,viewport:r})=>{const o=r.scroll.diff.value;return n.map(c=>{const u=c.descriptor.droppableId,m=s[u],h=qk(m).scroll.diff.value,g=en(o,h);return Hk({draggable:c,offset:g,initialWindowScroll:r.scroll.initial})})},Gk=({state:n,published:s})=>{const r=s.modified.map(O=>{const T=n.dimensions.droppables[O.droppableId];return pf(T,O.scroll)}),o={...n.dimensions.droppables,...Qb(r)},c=Xb(Uk({additions:s.additions,updatedDroppables:o,viewport:n.viewport})),u={...n.dimensions.draggables,...c};s.removals.forEach(O=>{delete u[O]});const m={droppables:o,draggables:u},b=An(n.impact),h=b?m.droppables[b]:null,g=m.draggables[n.critical.draggable.id],p=m.droppables[n.critical.droppable.id],{impact:v,afterCritical:x}=fp({draggable:g,home:p,draggables:u,viewport:n.viewport}),N=h&&h.isCombineEnabled?n.impact:v,D=op({pageOffset:n.current.page.offset,draggable:m.draggables[n.critical.draggable.id],draggables:m.draggables,droppables:m.droppables,previousImpact:N,viewport:n.viewport,afterCritical:x}),A={...n,phase:"DRAGGING",impact:D,onLiftImpact:v,dimensions:m,afterCritical:x,forceShouldAnimate:!1};return n.phase==="COLLECTING"?A:{...A,phase:"DROP_PENDING",reason:n.reason,isWaiting:!1}};const Gu=n=>n.movementMode==="SNAP",Tu=(n,s,r)=>{const o=Ik(n.dimensions,s);return!Gu(n)||r?ii({state:n,dimensions:o}):up({state:n,dimensions:o})};function Mu(n){return n.isDragging&&n.movementMode==="SNAP"?{...n,scrollJumpRequest:null}:n}const qh={phase:"IDLE",completed:null,shouldFlush:!1};var $k=(n=qh,s)=>{if(s.type==="FLUSH")return{...qh,shouldFlush:!0};if(s.type==="INITIAL_PUBLISH"){n.phase!=="IDLE"&&he();const{critical:r,clientSelection:o,viewport:c,dimensions:u,movementMode:m}=s.payload,b=u.draggables[r.draggable.id],h=u.droppables[r.droppable.id],g={selection:o,borderBoxCenter:b.client.borderBox.center,offset:Zt},p={client:g,page:{selection:en(g.selection,c.scroll.initial),borderBoxCenter:en(g.selection,c.scroll.initial),offset:en(g.selection,c.scroll.diff.value)}},v=oc(u.droppables).every(A=>!A.isFixedOnPage),{impact:x,afterCritical:N}=fp({draggable:b,home:h,draggables:u.draggables,viewport:c});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:m,dimensions:u,initial:p,current:p,isWindowScrollAllowed:v,impact:x,afterCritical:N,onLiftImpact:x,viewport:c,scrollJumpRequest:null,forceShouldAnimate:null}}if(s.type==="COLLECTION_STARTING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"?n:(n.phase!=="DRAGGING"&&he(),{...n,phase:"COLLECTING"});if(s.type==="PUBLISH_WHILE_DRAGGING")return n.phase==="COLLECTING"||n.phase==="DROP_PENDING"||he(),Gk({state:n,published:s.payload});if(s.type==="MOVE"){if(n.phase==="DROP_PENDING")return n;qr(n)||he();const{client:r}=s.payload;return or(r,n.current.client.selection)?n:ii({state:n,clientSelection:r,impact:Gu(n)?n.impact:null})}if(s.type==="UPDATE_DROPPABLE_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="COLLECTING")return Mu(n);qr(n)||he();const{id:r,newScroll:o}=s.payload,c=n.dimensions.droppables[r];if(!c)return n;const u=pf(c,o);return Tu(n,u,!1)}if(s.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(n.phase==="DROP_PENDING")return n;qr(n)||he();const{id:r,isEnabled:o}=s.payload,c=n.dimensions.droppables[r];c||he(),c.isEnabled===o&&he();const u={...c,isEnabled:o};return Tu(n,u,!0)}if(s.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(n.phase==="DROP_PENDING")return n;qr(n)||he();const{id:r,isCombineEnabled:o}=s.payload,c=n.dimensions.droppables[r];c||he(),c.isCombineEnabled===o&&he();const u={...c,isCombineEnabled:o};return Tu(n,u,!0)}if(s.type==="MOVE_BY_WINDOW_SCROLL"){if(n.phase==="DROP_PENDING"||n.phase==="DROP_ANIMATING")return n;qr(n)||he(),n.isWindowScrollAllowed||he();const r=s.payload.newScroll;if(or(n.viewport.scroll.current,r))return Mu(n);const o=tp(n.viewport,r);return Gu(n)?up({state:n,viewport:o}):ii({state:n,viewport:o})}if(s.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!qr(n))return n;const r=s.payload.maxScroll;if(or(r,n.viewport.scroll.max))return n;const o={...n.viewport,scroll:{...n.viewport.scroll,max:r}};return{...n,viewport:o}}if(s.type==="MOVE_UP"||s.type==="MOVE_DOWN"||s.type==="MOVE_LEFT"||s.type==="MOVE_RIGHT"){if(n.phase==="COLLECTING"||n.phase==="DROP_PENDING")return n;n.phase!=="DRAGGING"&&he();const r=Dk({state:n,type:s.type});return r?ii({state:n,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):n}if(s.type==="DROP_PENDING"){const r=s.payload.reason;return n.phase!=="COLLECTING"&&he(),{...n,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(s.type==="DROP_ANIMATE"){const{completed:r,dropDuration:o,newHomeClientOffset:c}=s.payload;return n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||he(),{phase:"DROP_ANIMATING",completed:r,dropDuration:o,newHomeClientOffset:c,dimensions:n.dimensions}}if(s.type==="DROP_COMPLETE"){const{completed:r}=s.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return n};function ft(n,s){return n instanceof Object&&"type"in n&&n.type===s}const Yk=n=>({type:"BEFORE_INITIAL_CAPTURE",payload:n}),Fk=n=>({type:"LIFT",payload:n}),Vk=n=>({type:"INITIAL_PUBLISH",payload:n}),Qk=n=>({type:"PUBLISH_WHILE_DRAGGING",payload:n}),Xk=()=>({type:"COLLECTION_STARTING",payload:null}),Zk=n=>({type:"UPDATE_DROPPABLE_SCROLL",payload:n}),Wk=n=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:n}),Kk=n=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:n}),mp=n=>({type:"MOVE",payload:n}),Jk=n=>({type:"MOVE_BY_WINDOW_SCROLL",payload:n}),e5=n=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:n}),t5=()=>({type:"MOVE_UP",payload:null}),n5=()=>({type:"MOVE_DOWN",payload:null}),a5=()=>({type:"MOVE_RIGHT",payload:null}),r5=()=>({type:"MOVE_LEFT",payload:null}),jf=()=>({type:"FLUSH",payload:null}),l5=n=>({type:"DROP_ANIMATE",payload:n}),Sf=n=>({type:"DROP_COMPLETE",payload:n}),gp=n=>({type:"DROP",payload:n}),s5=n=>({type:"DROP_PENDING",payload:n}),hp=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var i5=n=>({getState:s,dispatch:r})=>o=>c=>{if(!ft(c,"LIFT")){o(c);return}const{id:u,clientSelection:m,movementMode:b}=c.payload,h=s();h.phase==="DROP_ANIMATING"&&r(Sf({completed:h.completed})),s().phase!=="IDLE"&&he(),r(jf()),r(Yk({draggableId:u,movementMode:b}));const p={draggableId:u,scrollOptions:{shouldPublishImmediately:b==="SNAP"}},{critical:v,dimensions:x,viewport:N}=n.startPublishing(p);r(Vk({critical:v,dimensions:x,clientSelection:m,movementMode:b,viewport:N}))},o5=n=>()=>s=>r=>{ft(r,"INITIAL_PUBLISH")&&n.dragging(),ft(r,"DROP_ANIMATE")&&n.dropping(r.payload.completed.result.reason),(ft(r,"FLUSH")||ft(r,"DROP_COMPLETE"))&&n.resting(),s(r)};const Df={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},gi={opacity:{drop:0,combining:.7},scale:{drop:.75}},bp={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},_r=`${bp.outOfTheWay}s ${Df.outOfTheWay}`,oi={fluid:`opacity ${_r}`,snap:`transform ${_r}, opacity ${_r}`,drop:n=>{const s=`${n}s ${Df.drop}`;return`transform ${s}, opacity ${s}`},outOfTheWay:`transform ${_r}`,placeholder:`height ${_r}, width ${_r}, margin ${_r}`},Uh=n=>or(n,Zt)?void 0:`translate(${n.x}px, ${n.y}px)`,$u={moveTo:Uh,drop:(n,s)=>{const r=Uh(n);if(r)return s?`${r} scale(${gi.scale.drop})`:r}},{minDropTime:Yu,maxDropTime:pp}=bp,c5=pp-Yu,Gh=1500,d5=.6;var u5=({current:n,destination:s,reason:r})=>{const o=ui(n,s);if(o<=0)return Yu;if(o>=Gh)return pp;const c=o/Gh,u=Yu+c5*c,m=r==="CANCEL"?u*d5:u;return Number(m.toFixed(2))},f5=({impact:n,draggable:s,dimensions:r,viewport:o,afterCritical:c})=>{const{draggables:u,droppables:m}=r,b=An(n),h=b?m[b]:null,g=m[s.descriptor.droppableId],p=dp({impact:n,draggable:s,draggables:u,afterCritical:c,droppable:h||g,viewport:o});return Cn(p,s.client.borderBox.center)},m5=({draggables:n,reason:s,lastImpact:r,home:o,viewport:c,onLiftImpact:u})=>!r.at||s!=="DROP"?{impact:cp({draggables:n,impact:u,destination:o,viewport:c,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:fi},didDropInsideDroppable:!0};const g5=({getState:n,dispatch:s})=>r=>o=>{if(!ft(o,"DROP")){r(o);return}const c=n(),u=o.payload.reason;if(c.phase==="COLLECTING"){s(s5({reason:u}));return}if(c.phase==="IDLE")return;c.phase==="DROP_PENDING"&&c.isWaiting&&he(),c.phase==="DRAGGING"||c.phase==="DROP_PENDING"||he();const b=c.critical,h=c.dimensions,g=h.draggables[c.critical.draggable.id],{impact:p,didDropInsideDroppable:v}=m5({reason:u,lastImpact:c.impact,afterCritical:c.afterCritical,onLiftImpact:c.onLiftImpact,home:c.dimensions.droppables[c.critical.droppable.id],viewport:c.viewport,draggables:c.dimensions.draggables}),x=v?xf(p):null,N=v?cc(p):null,D={index:b.draggable.index,droppableId:b.droppable.id},A={draggableId:g.descriptor.id,type:g.descriptor.type,source:D,reason:u,mode:c.movementMode,destination:x,combine:N},j=f5({impact:p,draggable:g,dimensions:h,viewport:c.viewport,afterCritical:c.afterCritical}),O={critical:c.critical,afterCritical:c.afterCritical,result:A,impact:p};if(!(!or(c.current.client.offset,j)||!!A.combine)){s(Sf({completed:O}));return}const I=u5({current:c.current.client.offset,destination:j,reason:u});s(l5({newHomeClientOffset:j,dropDuration:I,completed:O}))};var xp=()=>({x:window.pageXOffset,y:window.pageYOffset});function h5(n){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:s=>{s.target!==window&&s.target!==window.document||n()}}}function b5({onWindowScroll:n}){function s(){n(xp())}const r=di(s),o=h5(r);let c=ir;function u(){return c!==ir}function m(){u()&&he(),c=Un(window,[o])}function b(){u()||he(),r.cancel(),c(),c=ir}return{start:m,stop:b,isActive:u}}const p5=n=>ft(n,"DROP_COMPLETE")||ft(n,"DROP_ANIMATE")||ft(n,"FLUSH"),x5=n=>{const s=b5({onWindowScroll:r=>{n.dispatch(Jk({newScroll:r}))}});return r=>o=>{!s.isActive()&&ft(o,"INITIAL_PUBLISH")&&s.start(),s.isActive()&&p5(o)&&s.stop(),r(o)}};var y5=n=>{let s=!1,r=!1;const o=setTimeout(()=>{r=!0}),c=u=>{s||r||(s=!0,n(u),clearTimeout(o))};return c.wasCalled=()=>s,c},v5=()=>{const n=[],s=c=>{const u=n.findIndex(b=>b.timerId===c);u===-1&&he();const[m]=n.splice(u,1);m.callback()};return{add:c=>{const u=setTimeout(()=>s(u)),m={timerId:u,callback:c};n.push(m)},flush:()=>{if(!n.length)return;const c=[...n];n.length=0,c.forEach(u=>{clearTimeout(u.timerId),u.callback()})}}};const w5=(n,s)=>n==null&&s==null?!0:n==null||s==null?!1:n.droppableId===s.droppableId&&n.index===s.index,N5=(n,s)=>n==null&&s==null?!0:n==null||s==null?!1:n.draggableId===s.draggableId&&n.droppableId===s.droppableId,k5=(n,s)=>{if(n===s)return!0;const r=n.draggable.id===s.draggable.id&&n.draggable.droppableId===s.draggable.droppableId&&n.draggable.type===s.draggable.type&&n.draggable.index===s.draggable.index,o=n.droppable.id===s.droppable.id&&n.droppable.type===s.droppable.type;return r&&o},ri=(n,s)=>{s()},Ho=(n,s)=>({draggableId:n.draggable.id,type:n.droppable.type,source:{droppableId:n.droppable.id,index:n.draggable.index},mode:s});function Eu(n,s,r,o){if(!n){r(o(s));return}const c=y5(r);n(s,{announce:c}),c.wasCalled()||r(o(s))}var j5=(n,s)=>{const r=v5();let o=null;const c=(v,x)=>{o&&he(),ri("onBeforeCapture",()=>{const N=n().onBeforeCapture;N&&N({draggableId:v,mode:x})})},u=(v,x)=>{o&&he(),ri("onBeforeDragStart",()=>{const N=n().onBeforeDragStart;N&&N(Ho(v,x))})},m=(v,x)=>{o&&he();const N=Ho(v,x);o={mode:x,lastCritical:v,lastLocation:N.source,lastCombine:null},r.add(()=>{ri("onDragStart",()=>Eu(n().onDragStart,N,s,$o.onDragStart))})},b=(v,x)=>{const N=xf(x),D=cc(x);o||he();const A=!k5(v,o.lastCritical);A&&(o.lastCritical=v);const j=!w5(o.lastLocation,N);j&&(o.lastLocation=N);const O=!N5(o.lastCombine,D);if(O&&(o.lastCombine=D),!A&&!j&&!O)return;const T={...Ho(v,o.mode),combine:D,destination:N};r.add(()=>{ri("onDragUpdate",()=>Eu(n().onDragUpdate,T,s,$o.onDragUpdate))})},h=()=>{o||he(),r.flush()},g=v=>{o||he(),o=null,ri("onDragEnd",()=>Eu(n().onDragEnd,v,s,$o.onDragEnd))};return{beforeCapture:c,beforeStart:u,start:m,update:b,flush:h,drop:g,abort:()=>{if(!o)return;const v={...Ho(o.lastCritical,o.mode),combine:null,destination:null,reason:"CANCEL"};g(v)}}},S5=(n,s)=>{const r=j5(n,s);return o=>c=>u=>{if(ft(u,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(u.payload.draggableId,u.payload.movementMode);return}if(ft(u,"INITIAL_PUBLISH")){const b=u.payload.critical;r.beforeStart(b,u.payload.movementMode),c(u),r.start(b,u.payload.movementMode);return}if(ft(u,"DROP_COMPLETE")){const b=u.payload.completed.result;r.flush(),c(u),r.drop(b);return}if(c(u),ft(u,"FLUSH")){r.abort();return}const m=o.getState();m.phase==="DRAGGING"&&r.update(m.critical,m.impact)}};const D5=n=>s=>r=>{if(!ft(r,"DROP_ANIMATION_FINISHED")){s(r);return}const o=n.getState();o.phase!=="DROP_ANIMATING"&&he(),n.dispatch(Sf({completed:o.completed}))},C5=n=>{let s=null,r=null;function o(){r&&(cancelAnimationFrame(r),r=null),s&&(s(),s=null)}return c=>u=>{if((ft(u,"FLUSH")||ft(u,"DROP_COMPLETE")||ft(u,"DROP_ANIMATION_FINISHED"))&&o(),c(u),!ft(u,"DROP_ANIMATE"))return;const m={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){n.getState().phase==="DROP_ANIMATING"&&n.dispatch(hp())}};r=requestAnimationFrame(()=>{r=null,s=Un(window,[m])})}};var A5=n=>()=>s=>r=>{(ft(r,"DROP_COMPLETE")||ft(r,"FLUSH")||ft(r,"DROP_ANIMATE"))&&n.stopPublishing(),s(r)},T5=n=>{let s=!1;return()=>r=>o=>{if(ft(o,"INITIAL_PUBLISH")){s=!0,n.tryRecordFocus(o.payload.critical.draggable.id),r(o),n.tryRestoreFocusRecorded();return}if(r(o),!!s){if(ft(o,"FLUSH")){s=!1,n.tryRestoreFocusRecorded();return}if(ft(o,"DROP_COMPLETE")){s=!1;const c=o.payload.completed.result;c.combine&&n.tryShiftRecord(c.draggableId,c.combine.draggableId),n.tryRestoreFocusRecorded()}}}};const M5=n=>ft(n,"DROP_COMPLETE")||ft(n,"DROP_ANIMATE")||ft(n,"FLUSH");var E5=n=>s=>r=>o=>{if(M5(o)){n.stop(),r(o);return}if(ft(o,"INITIAL_PUBLISH")){r(o);const c=s.getState();c.phase!=="DRAGGING"&&he(),n.start(c);return}r(o),n.scroll(s.getState())};const O5=n=>s=>r=>{if(s(r),!ft(r,"PUBLISH_WHILE_DRAGGING"))return;const o=n.getState();o.phase==="DROP_PENDING"&&(o.isWaiting||n.dispatch(gp({reason:o.reason})))},R5=Lb;var L5=({dimensionMarshal:n,focusMarshal:s,styleMarshal:r,getResponders:o,announce:c,autoScroller:u})=>Rb($k,R5(Rw(o5(r),A5(n),i5(n),g5,D5,C5,O5,E5(u),x5,T5(s),S5(o,c))));const Ou=()=>({additions:{},removals:{},modified:{}});function P5({registry:n,callbacks:s}){let r=Ou(),o=null;const c=()=>{o||(s.collectionStarting(),o=requestAnimationFrame(()=>{o=null;const{additions:h,removals:g,modified:p}=r,v=Object.keys(h).map(D=>n.draggable.getById(D).getDimension(Zt)).sort((D,A)=>D.descriptor.index-A.descriptor.index),x=Object.keys(p).map(D=>{const j=n.droppable.getById(D).callbacks.getScrollWhileDragging();return{droppableId:D,scroll:j}}),N={additions:v,removals:Object.keys(g),modified:x};r=Ou(),s.publish(N)}))};return{add:h=>{const g=h.descriptor.id;r.additions[g]=h,r.modified[h.descriptor.droppableId]=!0,r.removals[g]&&delete r.removals[g],c()},remove:h=>{const g=h.descriptor;r.removals[g.id]=!0,r.modified[g.droppableId]=!0,r.additions[g.id]&&delete r.additions[g.id],c()},stop:()=>{o&&(cancelAnimationFrame(o),o=null,r=Ou())}}}var yp=({scrollHeight:n,scrollWidth:s,height:r,width:o})=>{const c=Cn({x:s,y:n},{x:o,y:r});return{x:Math.max(0,c.x),y:Math.max(0,c.y)}},vp=()=>{const n=document.documentElement;return n||he(),n},wp=()=>{const n=vp();return yp({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,width:n.clientWidth,height:n.clientHeight})},B5=()=>{const n=xp(),s=wp(),r=n.y,o=n.x,c=vp(),u=c.clientWidth,m=c.clientHeight,b=o+u,h=r+m;return{frame:Jn({top:r,left:o,right:b,bottom:h}),scroll:{initial:n,current:n,max:s,diff:{value:Zt,displacement:Zt}}}},_5=({critical:n,scrollOptions:s,registry:r})=>{const o=B5(),c=o.scroll.current,u=n.droppable,m=r.droppable.getAllByType(u.type).map(p=>p.callbacks.getDimensionAndWatchScroll(c,s)),b=r.draggable.getAllByType(n.draggable.type).map(p=>p.getDimension(c));return{dimensions:{draggables:Xb(b),droppables:Qb(m)},critical:n,viewport:o}};function $h(n,s,r){return!(r.descriptor.id===s.id||r.descriptor.type!==s.type||n.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var z5=(n,s)=>{let r=null;const o=P5({callbacks:{publish:s.publishWhileDragging,collectionStarting:s.collectionStarting},registry:n}),c=(x,N)=>{n.droppable.exists(x)||he(),r&&s.updateDroppableIsEnabled({id:x,isEnabled:N})},u=(x,N)=>{r&&(n.droppable.exists(x)||he(),s.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:N}))},m=(x,N)=>{r&&(n.droppable.exists(x)||he(),s.updateDroppableScroll({id:x,newScroll:N}))},b=(x,N)=>{r&&n.droppable.getById(x).callbacks.scroll(N)},h=()=>{if(!r)return;o.stop();const x=r.critical.droppable;n.droppable.getAllByType(x.type).forEach(N=>N.callbacks.dragStopped()),r.unsubscribe(),r=null},g=x=>{r||he();const N=r.critical.draggable;x.type==="ADDITION"&&$h(n,N,x.value)&&o.add(x.value),x.type==="REMOVAL"&&$h(n,N,x.value)&&o.remove(x.value)};return{updateDroppableIsEnabled:c,updateDroppableIsCombineEnabled:u,scrollDroppable:b,updateDroppableScroll:m,startPublishing:x=>{r&&he();const N=n.draggable.getById(x.draggableId),D=n.droppable.getById(N.descriptor.droppableId),A={draggable:N.descriptor,droppable:D.descriptor},j=n.subscribe(g);return r={critical:A,unsubscribe:j},_5({critical:A,registry:n,scrollOptions:x.scrollOptions})},stopPublishing:h}},Np=(n,s)=>n.phase==="IDLE"?!0:n.phase!=="DROP_ANIMATING"||n.completed.result.draggableId===s?!1:n.completed.result.reason==="DROP",I5=n=>{window.scrollBy(n.x,n.y)};const H5=Xt(n=>oc(n).filter(s=>!(!s.isEnabled||!s.frame))),q5=(n,s)=>H5(s).find(o=>(o.frame||he(),lp(o.frame.pageMarginBox)(n)))||null;var U5=({center:n,destination:s,droppables:r})=>{if(s){const c=r[s];return c.frame?c:null}return q5(n,r)};const hi={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:n=>n**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var G5=(n,s,r=()=>hi)=>{const o=r(),c=n[s.size]*o.startFromPercentage,u=n[s.size]*o.maxScrollAtPercentage;return{startScrollingFrom:c,maxScrollValueAt:u}},kp=({startOfRange:n,endOfRange:s,current:r})=>{const o=s-n;return o===0?0:(r-n)/o},Cf=1,$5=(n,s,r=()=>hi)=>{const o=r();if(n>s.startScrollingFrom)return 0;if(n<=s.maxScrollValueAt)return o.maxPixelScroll;if(n===s.startScrollingFrom)return Cf;const u=1-kp({startOfRange:s.maxScrollValueAt,endOfRange:s.startScrollingFrom,current:n}),m=o.maxPixelScroll*o.ease(u);return Math.ceil(m)},Y5=(n,s,r)=>{const o=r(),c=o.durationDampening.accelerateAt,u=o.durationDampening.stopDampeningAt,m=s,b=u,g=Date.now()-m;if(g>=u)return n;if(g<c)return Cf;const p=kp({startOfRange:c,endOfRange:b,current:g}),v=n*o.ease(p);return Math.ceil(v)},Yh=({distanceToEdge:n,thresholds:s,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:c})=>{const u=$5(n,s,c);return u===0?0:o?Math.max(Y5(u,r,c),Cf):u},Fh=({container:n,distanceToEdges:s,dragStartTime:r,axis:o,shouldUseTimeDampening:c,getAutoScrollerOptions:u})=>{const m=G5(n,o,u);return s[o.end]<s[o.start]?Yh({distanceToEdge:s[o.end],thresholds:m,dragStartTime:r,shouldUseTimeDampening:c,getAutoScrollerOptions:u}):-1*Yh({distanceToEdge:s[o.start],thresholds:m,dragStartTime:r,shouldUseTimeDampening:c,getAutoScrollerOptions:u})},F5=({container:n,subject:s,proposedScroll:r})=>{const o=s.height>n.height,c=s.width>n.width;return!c&&!o?r:c&&o?null:{x:c?0:r.x,y:o?0:r.y}};const V5=Vb(n=>n===0?0:n);var jp=({dragStartTime:n,container:s,subject:r,center:o,shouldUseTimeDampening:c,getAutoScrollerOptions:u})=>{const m={top:o.y-s.top,right:s.right-o.x,bottom:s.bottom-o.y,left:o.x-s.left},b=Fh({container:s,distanceToEdges:m,dragStartTime:n,axis:yf,shouldUseTimeDampening:c,getAutoScrollerOptions:u}),h=Fh({container:s,distanceToEdges:m,dragStartTime:n,axis:Kb,shouldUseTimeDampening:c,getAutoScrollerOptions:u}),g=V5({x:h,y:b});if(or(g,Zt))return null;const p=F5({container:s,subject:r,proposedScroll:g});return p?or(p,Zt)?null:p:null};const Q5=Vb(n=>n===0?0:n>0?1:-1),Af=(()=>{const n=(s,r)=>s<0?s:s>r?s-r:0;return({current:s,max:r,change:o})=>{const c=en(s,o),u={x:n(c.x,r.x),y:n(c.y,r.y)};return or(u,Zt)?null:u}})(),Sp=({max:n,current:s,change:r})=>{const o={x:Math.max(s.x,n.x),y:Math.max(s.y,n.y)},c=Q5(r),u=Af({max:o,current:s,change:c});return!u||c.x!==0&&u.x===0||c.y!==0&&u.y===0},Tf=(n,s)=>Sp({current:n.scroll.current,max:n.scroll.max,change:s}),X5=(n,s)=>{if(!Tf(n,s))return null;const r=n.scroll.max,o=n.scroll.current;return Af({current:o,max:r,change:s})},Mf=(n,s)=>{const r=n.frame;return r?Sp({current:r.scroll.current,max:r.scroll.max,change:s}):!1},Z5=(n,s)=>{const r=n.frame;return!r||!Mf(n,s)?null:Af({current:r.scroll.current,max:r.scroll.max,change:s})};var W5=({viewport:n,subject:s,center:r,dragStartTime:o,shouldUseTimeDampening:c,getAutoScrollerOptions:u})=>{const m=jp({dragStartTime:o,container:n.frame,subject:s,center:r,shouldUseTimeDampening:c,getAutoScrollerOptions:u});return m&&Tf(n,m)?m:null},K5=({droppable:n,subject:s,center:r,dragStartTime:o,shouldUseTimeDampening:c,getAutoScrollerOptions:u})=>{const m=n.frame;if(!m)return null;const b=jp({dragStartTime:o,container:m.pageMarginBox,subject:s,center:r,shouldUseTimeDampening:c,getAutoScrollerOptions:u});return b&&Mf(n,b)?b:null},Vh=({state:n,dragStartTime:s,shouldUseTimeDampening:r,scrollWindow:o,scrollDroppable:c,getAutoScrollerOptions:u})=>{const m=n.current.page.borderBoxCenter,h=n.dimensions.draggables[n.critical.draggable.id].page.marginBox;if(n.isWindowScrollAllowed){const v=n.viewport,x=W5({dragStartTime:s,viewport:v,subject:h,center:m,shouldUseTimeDampening:r,getAutoScrollerOptions:u});if(x){o(x);return}}const g=U5({center:m,destination:An(n.impact),droppables:n.dimensions.droppables});if(!g)return;const p=K5({dragStartTime:s,droppable:g,subject:h,center:m,shouldUseTimeDampening:r,getAutoScrollerOptions:u});p&&c(g.descriptor.id,p)},J5=({scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:r=()=>hi})=>{const o=di(n),c=di(s);let u=null;const m=g=>{u||he();const{shouldUseTimeDampening:p,dragStartTime:v}=u;Vh({state:g,scrollWindow:o,scrollDroppable:c,dragStartTime:v,shouldUseTimeDampening:p,getAutoScrollerOptions:r})};return{start:g=>{u&&he();const p=Date.now();let v=!1;const x=()=>{v=!0};Vh({state:g,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x,getAutoScrollerOptions:r}),u={dragStartTime:p,shouldUseTimeDampening:v},v&&m(g)},stop:()=>{u&&(o.cancel(),c.cancel(),u=null)},scroll:m}},ej=({move:n,scrollDroppable:s,scrollWindow:r})=>{const o=(b,h)=>{const g=en(b.current.client.selection,h);n({client:g})},c=(b,h)=>{if(!Mf(b,h))return h;const g=Z5(b,h);if(!g)return s(b.descriptor.id,h),null;const p=Cn(h,g);return s(b.descriptor.id,p),Cn(h,p)},u=(b,h,g)=>{if(!b||!Tf(h,g))return g;const p=X5(h,g);if(!p)return r(g),null;const v=Cn(g,p);return r(v),Cn(g,v)};return b=>{const h=b.scrollJumpRequest;if(!h)return;const g=An(b.impact);g||he();const p=c(b.dimensions.droppables[g],h);if(!p)return;const v=b.viewport,x=u(b.isWindowScrollAllowed,v,p);x&&o(b,x)}},tj=({scrollDroppable:n,scrollWindow:s,move:r,getAutoScrollerOptions:o})=>{const c=J5({scrollWindow:s,scrollDroppable:n,getAutoScrollerOptions:o}),u=ej({move:r,scrollWindow:s,scrollDroppable:n});return{scroll:h=>{if(!(o().disabled||h.phase!=="DRAGGING")){if(h.movementMode==="FLUID"){c.scroll(h);return}h.scrollJumpRequest&&u(h)}},start:c.start,stop:c.stop}};const Gl="data-rfd",$l=(()=>{const n=`${Gl}-drag-handle`;return{base:n,draggableId:`${n}-draggable-id`,contextId:`${n}-context-id`}})(),Fu=(()=>{const n=`${Gl}-draggable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),nj=(()=>{const n=`${Gl}-droppable`;return{base:n,contextId:`${n}-context-id`,id:`${n}-id`}})(),Qh={contextId:`${Gl}-scroll-container-context-id`},aj=n=>s=>`[${s}="${n}"]`,li=(n,s)=>n.map(r=>{const o=r.styles[s];return o?`${r.selector} { ${o} }`:""}).join(" "),rj="pointer-events: none;";var lj=n=>{const s=aj(n),r=(()=>{const b=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:s($l.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:b,dragging:rj,dropAnimating:b}}})(),o=(()=>{const b=`
      transition: ${oi.outOfTheWay};
    `;return{selector:s(Fu.contextId),styles:{dragging:b,dropAnimating:b,userCancel:b}}})(),c={selector:s(nj.contextId),styles:{always:"overflow-anchor: none;"}},m=[o,r,c,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:li(m,"always"),resting:li(m,"resting"),dragging:li(m,"dragging"),dropAnimating:li(m,"dropAnimating"),userCancel:li(m,"userCancel")}};const Tn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect,Ru=()=>{const n=document.querySelector("head");return n||he(),n},Xh=n=>{const s=document.createElement("style");return n&&s.setAttribute("nonce",n),s.type="text/css",s};function sj(n,s){const r=rt(()=>lj(n),[n]),o=w.useRef(null),c=w.useRef(null),u=Pe(Xt(v=>{const x=c.current;x||he(),x.textContent=v}),[]),m=Pe(v=>{const x=o.current;x||he(),x.textContent=v},[]);Tn(()=>{!o.current&&!c.current||he();const v=Xh(s),x=Xh(s);return o.current=v,c.current=x,v.setAttribute(`${Gl}-always`,n),x.setAttribute(`${Gl}-dynamic`,n),Ru().appendChild(v),Ru().appendChild(x),m(r.always),u(r.resting),()=>{const N=D=>{const A=D.current;A||he(),Ru().removeChild(A),D.current=null};N(o),N(c)}},[s,m,u,r.always,r.resting,n]);const b=Pe(()=>u(r.dragging),[u,r.dragging]),h=Pe(v=>{if(v==="DROP"){u(r.dropAnimating);return}u(r.userCancel)},[u,r.dropAnimating,r.userCancel]),g=Pe(()=>{c.current&&u(r.resting)},[u,r.resting]);return rt(()=>({dragging:b,dropping:h,resting:g}),[b,h,g])}function Dp(n,s){return Array.from(n.querySelectorAll(s))}var Cp=n=>n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView:window;function fc(n){return n instanceof Cp(n).HTMLElement}function ij(n,s){const r=`[${$l.contextId}="${n}"]`,o=Dp(document,r);if(!o.length)return null;const c=o.find(u=>u.getAttribute($l.draggableId)===s);return!c||!fc(c)?null:c}function oj(n){const s=w.useRef({}),r=w.useRef(null),o=w.useRef(null),c=w.useRef(!1),u=Pe(function(x,N){const D={id:x,focus:N};return s.current[x]=D,function(){const j=s.current;j[x]!==D&&delete j[x]}},[]),m=Pe(function(x){const N=ij(n,x);N&&N!==document.activeElement&&N.focus()},[n]),b=Pe(function(x,N){r.current===x&&(r.current=N)},[]),h=Pe(function(){o.current||c.current&&(o.current=requestAnimationFrame(()=>{o.current=null;const x=r.current;x&&m(x)}))},[m]),g=Pe(function(x){r.current=null;const N=document.activeElement;N&&N.getAttribute($l.draggableId)===x&&(r.current=x)},[]);return Tn(()=>(c.current=!0,function(){c.current=!1;const x=o.current;x&&cancelAnimationFrame(x)}),[]),rt(()=>({register:u,tryRecordFocus:g,tryRestoreFocusRecorded:h,tryShiftRecord:b}),[u,g,h,b])}function cj(){const n={draggables:{},droppables:{}},s=[];function r(v){return s.push(v),function(){const N=s.indexOf(v);N!==-1&&s.splice(N,1)}}function o(v){s.length&&s.forEach(x=>x(v))}function c(v){return n.draggables[v]||null}function u(v){const x=c(v);return x||he(),x}const m={register:v=>{n.draggables[v.descriptor.id]=v,o({type:"ADDITION",value:v})},update:(v,x)=>{const N=n.draggables[x.descriptor.id];N&&N.uniqueId===v.uniqueId&&(delete n.draggables[x.descriptor.id],n.draggables[v.descriptor.id]=v)},unregister:v=>{const x=v.descriptor.id,N=c(x);N&&v.uniqueId===N.uniqueId&&(delete n.draggables[x],n.droppables[v.descriptor.droppableId]&&o({type:"REMOVAL",value:v}))},getById:u,findById:c,exists:v=>!!c(v),getAllByType:v=>Object.values(n.draggables).filter(x=>x.descriptor.type===v)};function b(v){return n.droppables[v]||null}function h(v){const x=b(v);return x||he(),x}const g={register:v=>{n.droppables[v.descriptor.id]=v},unregister:v=>{const x=b(v.descriptor.id);x&&v.uniqueId===x.uniqueId&&delete n.droppables[v.descriptor.id]},getById:h,findById:b,exists:v=>!!b(v),getAllByType:v=>Object.values(n.droppables).filter(x=>x.descriptor.type===v)};function p(){n.draggables={},n.droppables={},s.length=0}return{draggable:m,droppable:g,subscribe:r,clean:p}}function dj(){const n=rt(cj,[]);return w.useEffect(()=>function(){n.clean()},[n]),n}var Ef=Xe.createContext(null),nc=()=>{const n=document.body;return n||he(),n};const uj={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},fj=n=>`rfd-announcement-${n}`;function mj(n){const s=rt(()=>fj(n),[n]),r=w.useRef(null);return w.useEffect(function(){const u=document.createElement("div");return r.current=u,u.id=s,u.setAttribute("aria-live","assertive"),u.setAttribute("aria-atomic","true"),Ko(u.style,uj),nc().appendChild(u),function(){setTimeout(function(){const h=nc();h.contains(u)&&h.removeChild(u),u===r.current&&(r.current=null)})}},[s]),Pe(c=>{const u=r.current;if(u){u.textContent=c;return}},[])}const gj={separator:"::"};function Of(n,s=gj){const r=Xe.useId();return rt(()=>`${n}${s.separator}${r}`,[s.separator,n,r])}function hj({contextId:n,uniqueId:s}){return`rfd-hidden-text-${n}-${s}`}function bj({contextId:n,text:s}){const r=Of("hidden-text",{separator:"-"}),o=rt(()=>hj({contextId:n,uniqueId:r}),[r,n]);return w.useEffect(function(){const u=document.createElement("div");return u.id=o,u.textContent=s,u.style.display="none",nc().appendChild(u),function(){const b=nc();b.contains(u)&&b.removeChild(u)}},[o,s]),o}var mc=Xe.createContext(null);function Ap(n){const s=w.useRef(n);return w.useEffect(()=>{s.current=n}),s}function pj(){let n=null;function s(){return!!n}function r(m){return m===n}function o(m){n&&he();const b={abandon:m};return n=b,b}function c(){n||he(),n=null}function u(){n&&(n.abandon(),c())}return{isClaimed:s,isActive:r,claim:o,release:c,tryAbandon:u}}function bi(n){return n.phase==="IDLE"||n.phase==="DROP_ANIMATING"?!1:n.isDragging}const xj=9,yj=13,Rf=27,Tp=32,vj=33,wj=34,Nj=35,kj=36,jj=37,Sj=38,Dj=39,Cj=40,Aj={[yj]:!0,[xj]:!0};var Mp=n=>{Aj[n.keyCode]&&n.preventDefault()};const gc=(()=>{const n="visibilitychange";return typeof document>"u"?n:[n,`ms${n}`,`webkit${n}`,`moz${n}`,`o${n}`].find(o=>`on${o}`in document)||n})(),Ep=0,Zh=5;function Tj(n,s){return Math.abs(s.x-n.x)>=Zh||Math.abs(s.y-n.y)>=Zh}const Wh={type:"IDLE"};function Mj({cancel:n,completed:s,getPhase:r,setPhase:o}){return[{eventName:"mousemove",fn:c=>{const{button:u,clientX:m,clientY:b}=c;if(u!==Ep)return;const h={x:m,y:b},g=r();if(g.type==="DRAGGING"){c.preventDefault(),g.actions.move(h);return}g.type!=="PENDING"&&he();const p=g.point;if(!Tj(p,h))return;c.preventDefault();const v=g.actions.fluidLift(h);o({type:"DRAGGING",actions:v})}},{eventName:"mouseup",fn:c=>{const u=r();if(u.type!=="DRAGGING"){n();return}c.preventDefault(),u.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"mousedown",fn:c=>{r().type==="DRAGGING"&&c.preventDefault(),n()}},{eventName:"keydown",fn:c=>{if(r().type==="PENDING"){n();return}if(c.keyCode===Rf){c.preventDefault(),n();return}Mp(c)}},{eventName:"resize",fn:n},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&n()}},{eventName:"webkitmouseforcedown",fn:c=>{const u=r();if(u.type==="IDLE"&&he(),u.actions.shouldRespectForcePress()){n();return}c.preventDefault()}},{eventName:gc,fn:n}]}function Ej(n){const s=w.useRef(Wh),r=w.useRef(ir),o=rt(()=>({eventName:"mousedown",fn:function(v){if(v.defaultPrevented||v.button!==Ep||v.ctrlKey||v.metaKey||v.shiftKey||v.altKey)return;const x=n.findClosestDraggableId(v);if(!x)return;const N=n.tryGetLock(x,m,{sourceEvent:v});if(!N)return;v.preventDefault();const D={x:v.clientX,y:v.clientY};r.current(),g(N,D)}}),[n]),c=rt(()=>({eventName:"webkitmouseforcewillbegin",fn:p=>{if(p.defaultPrevented)return;const v=n.findClosestDraggableId(p);if(!v)return;const x=n.findOptionsForDraggable(v);x&&(x.shouldRespectForcePress||n.canGetLock(v)&&p.preventDefault())}}),[n]),u=Pe(function(){const v={passive:!1,capture:!0};r.current=Un(window,[c,o],v)},[c,o]),m=Pe(()=>{s.current.type!=="IDLE"&&(s.current=Wh,r.current(),u())},[u]),b=Pe(()=>{const p=s.current;m(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[m]),h=Pe(function(){const v={capture:!0,passive:!1},x=Mj({cancel:b,completed:m,getPhase:()=>s.current,setPhase:N=>{s.current=N}});r.current=Un(window,x,v)},[b,m]),g=Pe(function(v,x){s.current.type!=="IDLE"&&he(),s.current={type:"PENDING",point:x,actions:v},h()},[h]);Tn(function(){return u(),function(){r.current()}},[u])}function Oj(){}const Rj={[wj]:!0,[vj]:!0,[kj]:!0,[Nj]:!0};function Lj(n,s){function r(){s(),n.cancel()}function o(){s(),n.drop()}return[{eventName:"keydown",fn:c=>{if(c.keyCode===Rf){c.preventDefault(),r();return}if(c.keyCode===Tp){c.preventDefault(),o();return}if(c.keyCode===Cj){c.preventDefault(),n.moveDown();return}if(c.keyCode===Sj){c.preventDefault(),n.moveUp();return}if(c.keyCode===Dj){c.preventDefault(),n.moveRight();return}if(c.keyCode===jj){c.preventDefault(),n.moveLeft();return}if(Rj[c.keyCode]){c.preventDefault();return}Mp(c)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:gc,fn:r}]}function Pj(n){const s=w.useRef(Oj),r=rt(()=>({eventName:"keydown",fn:function(u){if(u.defaultPrevented||u.keyCode!==Tp)return;const m=n.findClosestDraggableId(u);if(!m)return;const b=n.tryGetLock(m,p,{sourceEvent:u});if(!b)return;u.preventDefault();let h=!0;const g=b.snapLift();s.current();function p(){h||he(),h=!1,s.current(),o()}s.current=Un(window,Lj(g,p),{capture:!0,passive:!1})}}),[n]),o=Pe(function(){const u={passive:!1,capture:!0};s.current=Un(window,[r],u)},[r]);Tn(function(){return o(),function(){s.current()}},[o])}const Lu={type:"IDLE"},Bj=120,_j=.15;function zj({cancel:n,getPhase:s}){return[{eventName:"orientationchange",fn:n},{eventName:"resize",fn:n},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(s().type!=="DRAGGING"){n();return}r.keyCode===Rf&&r.preventDefault(),n()}},{eventName:gc,fn:n}]}function Ij({cancel:n,completed:s,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:o=>{const c=r();if(c.type!=="DRAGGING"){n();return}c.hasMoved=!0;const{clientX:u,clientY:m}=o.touches[0],b={x:u,y:m};o.preventDefault(),c.actions.move(b)}},{eventName:"touchend",fn:o=>{const c=r();if(c.type!=="DRAGGING"){n();return}o.preventDefault(),c.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"touchcancel",fn:o=>{if(r().type!=="DRAGGING"){n();return}o.preventDefault(),n()}},{eventName:"touchforcechange",fn:o=>{const c=r();c.type==="IDLE"&&he();const u=o.touches[0];if(!u||!(u.force>=_j))return;const b=c.actions.shouldRespectForcePress();if(c.type==="PENDING"){b&&n();return}if(b){if(c.hasMoved){o.preventDefault();return}n();return}o.preventDefault()}},{eventName:gc,fn:n}]}function Hj(n){const s=w.useRef(Lu),r=w.useRef(ir),o=Pe(function(){return s.current},[]),c=Pe(function(N){s.current=N},[]),u=rt(()=>({eventName:"touchstart",fn:function(N){if(N.defaultPrevented)return;const D=n.findClosestDraggableId(N);if(!D)return;const A=n.tryGetLock(D,b,{sourceEvent:N});if(!A)return;const j=N.touches[0],{clientX:O,clientY:T}=j,I={x:O,y:T};r.current(),v(A,I)}}),[n]),m=Pe(function(){const N={capture:!0,passive:!1};r.current=Un(window,[u],N)},[u]),b=Pe(()=>{const x=s.current;x.type!=="IDLE"&&(x.type==="PENDING"&&clearTimeout(x.longPressTimerId),c(Lu),r.current(),m())},[m,c]),h=Pe(()=>{const x=s.current;b(),x.type==="DRAGGING"&&x.actions.cancel({shouldBlockNextClick:!0}),x.type==="PENDING"&&x.actions.abort()},[b]),g=Pe(function(){const N={capture:!0,passive:!1},D={cancel:h,completed:b,getPhase:o},A=Un(window,Ij(D),N),j=Un(window,zj(D),N);r.current=function(){A(),j()}},[h,o,b]),p=Pe(function(){const N=o();N.type!=="PENDING"&&he();const D=N.actions.fluidLift(N.point);c({type:"DRAGGING",actions:D,hasMoved:!1})},[o,c]),v=Pe(function(N,D){o().type!=="IDLE"&&he();const A=setTimeout(p,Bj);c({type:"PENDING",point:D,actions:N,longPressTimerId:A}),g()},[g,o,c,p]);Tn(function(){return m(),function(){r.current();const D=o();D.type==="PENDING"&&(clearTimeout(D.longPressTimerId),c(Lu))}},[o,m,c]),Tn(function(){return Un(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const qj=["input","button","textarea","select","option","optgroup","video","audio"];function Op(n,s){if(s==null)return!1;if(qj.includes(s.tagName.toLowerCase()))return!0;const o=s.getAttribute("contenteditable");return o==="true"||o===""?!0:s===n?!1:Op(n,s.parentElement)}function Uj(n,s){const r=s.target;return fc(r)?Op(n,r):!1}var Gj=n=>Jn(n.getBoundingClientRect()).center;function $j(n){return n instanceof Cp(n).Element}const Yj=(()=>{const n="matches";return typeof document>"u"?n:[n,"msMatchesSelector","webkitMatchesSelector"].find(o=>o in Element.prototype)||n})();function Rp(n,s){return n==null?null:n[Yj](s)?n:Rp(n.parentElement,s)}function Fj(n,s){return n.closest?n.closest(s):Rp(n,s)}function Vj(n){return`[${$l.contextId}="${n}"]`}function Qj(n,s){const r=s.target;if(!$j(r))return null;const o=Vj(n),c=Fj(r,o);return!c||!fc(c)?null:c}function Xj(n,s){const r=Qj(n,s);return r?r.getAttribute($l.draggableId):null}function Zj(n,s){const r=`[${Fu.contextId}="${n}"]`,c=Dp(document,r).find(u=>u.getAttribute(Fu.id)===s);return!c||!fc(c)?null:c}function Wj(n){n.preventDefault()}function qo({expected:n,phase:s,isLockActive:r,shouldWarn:o}){return!(!r()||n!==s)}function Lp({lockAPI:n,store:s,registry:r,draggableId:o}){if(n.isClaimed())return!1;const c=r.draggable.findById(o);return!(!c||!c.options.isEnabled||!Np(s.getState(),o))}function Kj({lockAPI:n,contextId:s,store:r,registry:o,draggableId:c,forceSensorStop:u,sourceEvent:m}){if(!Lp({lockAPI:n,store:r,registry:o,draggableId:c}))return null;const h=o.draggable.getById(c),g=Zj(s,h.descriptor.id);if(!g||m&&!h.options.canDragInteractiveElements&&Uj(g,m))return null;const p=n.claim(u||ir);let v="PRE_DRAG";function x(){return h.options.shouldRespectForcePress}function N(){return n.isActive(p)}function D(_,$){qo({expected:_,phase:v,isLockActive:N,shouldWarn:!0})&&r.dispatch($())}const A=D.bind(null,"DRAGGING");function j(_){function $(){n.release(),v="COMPLETED"}v!=="PRE_DRAG"&&($(),he()),r.dispatch(Fk(_.liftActionArgs)),v="DRAGGING";function se(q,ie={shouldBlockNextClick:!1}){if(_.cleanup(),ie.shouldBlockNextClick){const ue=Un(window,[{eventName:"click",fn:Wj,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ue)}$(),r.dispatch(gp({reason:q}))}return{isActive:()=>qo({expected:"DRAGGING",phase:v,isLockActive:N,shouldWarn:!1}),shouldRespectForcePress:x,drop:q=>se("DROP",q),cancel:q=>se("CANCEL",q),..._.actions}}function O(_){const $=di(q=>{A(()=>mp({client:q}))});return{...j({liftActionArgs:{id:c,clientSelection:_,movementMode:"FLUID"},cleanup:()=>$.cancel(),actions:{move:$}}),move:$}}function T(){const _={moveUp:()=>A(t5),moveRight:()=>A(a5),moveDown:()=>A(n5),moveLeft:()=>A(r5)};return j({liftActionArgs:{id:c,clientSelection:Gj(g),movementMode:"SNAP"},cleanup:ir,actions:_})}function I(){qo({expected:"PRE_DRAG",phase:v,isLockActive:N,shouldWarn:!0})&&n.release()}return{isActive:()=>qo({expected:"PRE_DRAG",phase:v,isLockActive:N,shouldWarn:!1}),shouldRespectForcePress:x,fluidLift:O,snapLift:T,abort:I}}const Jj=[Ej,Pj,Hj];function eS({contextId:n,store:s,registry:r,customSensors:o,enableDefaultSensors:c}){const u=[...c?Jj:[],...o||[]],m=w.useState(()=>pj())[0],b=Pe(function(j,O){bi(j)&&!bi(O)&&m.tryAbandon()},[m]);Tn(function(){let j=s.getState();return s.subscribe(()=>{const T=s.getState();b(j,T),j=T})},[m,s,b]),Tn(()=>m.tryAbandon,[m.tryAbandon]);const h=Pe(A=>Lp({lockAPI:m,registry:r,store:s,draggableId:A}),[m,r,s]),g=Pe((A,j,O)=>Kj({lockAPI:m,registry:r,contextId:n,store:s,draggableId:A,forceSensorStop:j||null,sourceEvent:O&&O.sourceEvent?O.sourceEvent:null}),[n,m,r,s]),p=Pe(A=>Xj(n,A),[n]),v=Pe(A=>{const j=r.draggable.findById(A);return j?j.options:null},[r.draggable]),x=Pe(function(){m.isClaimed()&&(m.tryAbandon(),s.getState().phase!=="IDLE"&&s.dispatch(jf()))},[m,s]),N=Pe(()=>m.isClaimed(),[m]),D=rt(()=>({canGetLock:h,tryGetLock:g,findClosestDraggableId:p,findOptionsForDraggable:v,tryReleaseLock:x,isLockClaimed:N}),[h,g,p,v,x,N]);for(let A=0;A<u.length;A++)u[A](D)}const tS=n=>({onBeforeCapture:s=>{const r=()=>{n.onBeforeCapture&&n.onBeforeCapture(s)};ff.flushSync(r)},onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,onDragUpdate:n.onDragUpdate}),nS=n=>({...hi,...n.autoScrollerOptions,durationDampening:{...hi.durationDampening,...n.autoScrollerOptions}});function si(n){return n.current||he(),n.current}function aS(n){const{contextId:s,setCallbacks:r,sensors:o,nonce:c,dragHandleUsageInstructions:u}=n,m=w.useRef(null),b=Ap(n),h=Pe(()=>tS(b.current),[b]),g=Pe(()=>nS(b.current),[b]),p=mj(s),v=bj({contextId:s,text:u}),x=sj(s,c),N=Pe(ue=>{si(m).dispatch(ue)},[]),D=rt(()=>kh({publishWhileDragging:Qk,updateDroppableScroll:Zk,updateDroppableIsEnabled:Wk,updateDroppableIsCombineEnabled:Kk,collectionStarting:Xk},N),[N]),A=dj(),j=rt(()=>z5(A,D),[A,D]),O=rt(()=>tj({scrollWindow:I5,scrollDroppable:j.scrollDroppable,getAutoScrollerOptions:g,...kh({move:mp},N)}),[j.scrollDroppable,N,g]),T=oj(s),I=rt(()=>L5({announce:p,autoScroller:O,dimensionMarshal:j,focusMarshal:T,getResponders:h,styleMarshal:x}),[p,O,j,T,h,x]);m.current=I;const R=Pe(()=>{const ue=si(m);ue.getState().phase!=="IDLE"&&ue.dispatch(jf())},[]),_=Pe(()=>{const ue=si(m).getState();return ue.phase==="DROP_ANIMATING"?!0:ue.phase==="IDLE"?!1:ue.isDragging},[]),$=rt(()=>({isDragging:_,tryAbort:R}),[_,R]);r($);const se=Pe(ue=>Np(si(m).getState(),ue),[]),q=Pe(()=>qr(si(m).getState()),[]),ie=rt(()=>({marshal:j,focus:T,contextId:s,canLift:se,isMovementAllowed:q,dragHandleUsageInstructionsId:v,registry:A}),[s,j,v,T,se,q,A]);return eS({contextId:s,store:I,registry:A,customSensors:o||null,enableDefaultSensors:n.enableDefaultSensors!==!1}),w.useEffect(()=>R,[R]),Xe.createElement(mc.Provider,{value:ie},Xe.createElement(AN,{context:Ef,store:I},n.children))}function rS(){return Xe.useId()}function lS(n){const s=rS(),r=n.dragHandleUsageInstructions||$o.dragHandleUsageInstructions;return Xe.createElement(PN,null,o=>Xe.createElement(aS,{nonce:n.nonce,contextId:s,setCallbacks:o,dragHandleUsageInstructions:r,enableDefaultSensors:n.enableDefaultSensors,sensors:n.sensors,onBeforeCapture:n.onBeforeCapture,onBeforeDragStart:n.onBeforeDragStart,onDragStart:n.onDragStart,onDragUpdate:n.onDragUpdate,onDragEnd:n.onDragEnd,autoScrollerOptions:n.autoScrollerOptions},n.children))}const Kh={dragging:5e3,dropAnimating:4500},sS=(n,s)=>s?oi.drop(s.duration):n?oi.snap:oi.fluid,iS=(n,s)=>{if(n)return s?gi.opacity.drop:gi.opacity.combining},oS=n=>n.forceShouldAnimate!=null?n.forceShouldAnimate:n.mode==="SNAP";function cS(n){const r=n.dimension.client,{offset:o,combineWith:c,dropping:u}=n,m=!!c,b=oS(n),h=!!u,g=h?$u.drop(o,m):$u.moveTo(o);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:sS(b,u),transform:g,opacity:iS(m,h),zIndex:h?Kh.dropAnimating:Kh.dragging,pointerEvents:"none"}}function dS(n){return{transform:$u.moveTo(n.offset),transition:n.shouldAnimateDisplacement?void 0:"none"}}function uS(n){return n.type==="DRAGGING"?cS(n):dS(n)}function fS(n,s,r=Zt){const o=window.getComputedStyle(s),c=s.getBoundingClientRect(),u=qb(c,o),m=Wo(u,r),b={client:u,tagName:s.tagName.toLowerCase(),display:o.display},h={x:u.marginBox.width,y:u.marginBox.height};return{descriptor:n,placeholder:b,displaceBy:h,client:u,page:m}}function mS(n){const s=Of("draggable"),{descriptor:r,registry:o,getDraggableRef:c,canDragInteractiveElements:u,shouldRespectForcePress:m,isEnabled:b}=n,h=rt(()=>({canDragInteractiveElements:u,shouldRespectForcePress:m,isEnabled:b}),[u,b,m]),g=Pe(N=>{const D=c();return D||he(),fS(r,D,N)},[r,c]),p=rt(()=>({uniqueId:s,descriptor:r,options:h,getDimension:g}),[r,g,h,s]),v=w.useRef(p),x=w.useRef(!0);Tn(()=>(o.draggable.register(v.current),()=>o.draggable.unregister(v.current)),[o.draggable]),Tn(()=>{if(x.current){x.current=!1;return}const N=v.current;v.current=p,o.draggable.update(p,N)},[p,o.draggable])}var Lf=Xe.createContext(null);function ac(n){const s=w.useContext(n);return s||he(),s}function gS(n){n.preventDefault()}const hS=n=>{const s=w.useRef(null),r=Pe(($=null)=>{s.current=$},[]),o=Pe(()=>s.current,[]),{contextId:c,dragHandleUsageInstructionsId:u,registry:m}=ac(mc),{type:b,droppableId:h}=ac(Lf),g=rt(()=>({id:n.draggableId,index:n.index,type:b,droppableId:h}),[n.draggableId,n.index,b,h]),{children:p,draggableId:v,isEnabled:x,shouldRespectForcePress:N,canDragInteractiveElements:D,isClone:A,mapped:j,dropAnimationFinished:O}=n;if(!A){const $=rt(()=>({descriptor:g,registry:m,getDraggableRef:o,canDragInteractiveElements:D,shouldRespectForcePress:N,isEnabled:x}),[g,m,o,D,N,x]);mS($)}const T=rt(()=>x?{tabIndex:0,role:"button","aria-describedby":u,"data-rfd-drag-handle-draggable-id":v,"data-rfd-drag-handle-context-id":c,draggable:!1,onDragStart:gS}:null,[c,u,v,x]),I=Pe($=>{j.type==="DRAGGING"&&j.dropping&&$.propertyName==="transform"&&ff.flushSync(O)},[O,j]),R=rt(()=>{const $=uS(j),se=j.type==="DRAGGING"&&j.dropping?I:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":c,"data-rfd-draggable-id":v,style:$,onTransitionEnd:se},dragHandleProps:T}},[c,T,v,j,I,r]),_=rt(()=>({draggableId:g.id,type:g.type,source:{index:g.index,droppableId:g.droppableId}}),[g.droppableId,g.id,g.index,g.type]);return Xe.createElement(Xe.Fragment,null,p(R,j.snapshot,_))};var Pp=(n,s)=>n===s,Bp=n=>{const{combine:s,destination:r}=n;return r?r.droppableId:s?s.droppableId:null};const bS=n=>n.combine?n.combine.draggableId:null,pS=n=>n.at&&n.at.type==="COMBINE"?n.at.combine.draggableId:null;function xS(){const n=Xt((c,u)=>({x:c,y:u})),s=Xt((c,u,m=null,b=null,h=null)=>({isDragging:!0,isClone:u,isDropAnimating:!!h,dropAnimation:h,mode:c,draggingOver:m,combineWith:b,combineTargetFor:null})),r=Xt((c,u,m,b,h=null,g=null,p=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:h,combineWith:g,mode:u,offset:c,dimension:m,forceShouldAnimate:p,snapshot:s(u,b,h,g,null)}}));return(c,u)=>{if(bi(c)){if(c.critical.draggable.id!==u.draggableId)return null;const m=c.current.client.offset,b=c.dimensions.draggables[u.draggableId],h=An(c.impact),g=pS(c.impact),p=c.forceShouldAnimate;return r(n(m.x,m.y),c.movementMode,b,u.isClone,h,g,p)}if(c.phase==="DROP_ANIMATING"){const m=c.completed;if(m.result.draggableId!==u.draggableId)return null;const b=u.isClone,h=c.dimensions.draggables[u.draggableId],g=m.result,p=g.mode,v=Bp(g),x=bS(g),D={duration:c.dropDuration,curve:Df.drop,moveTo:c.newHomeClientOffset,opacity:x?gi.opacity.drop:null,scale:x?gi.scale.drop:null};return{mapped:{type:"DRAGGING",offset:c.newHomeClientOffset,dimension:h,dropping:D,draggingOver:v,combineWith:x,mode:p,forceShouldAnimate:null,snapshot:s(p,b,v,x,D)}}}return null}}function _p(n=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:n,combineWith:null}}const yS={mapped:{type:"SECONDARY",offset:Zt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:_p(null)}};function vS(){const n=Xt((m,b)=>({x:m,y:b})),s=Xt(_p),r=Xt((m,b=null,h)=>({mapped:{type:"SECONDARY",offset:m,combineTargetFor:b,shouldAnimateDisplacement:h,snapshot:s(b)}})),o=m=>m?r(Zt,m,!0):null,c=(m,b,h,g)=>{const p=h.displaced.visible[m],v=!!(g.inVirtualList&&g.effected[m]),x=cc(h),N=x&&x.draggableId===m?b:null;if(!p){if(!v)return o(N);if(h.displaced.invisible[m])return null;const j=Yl(g.displacedBy.point),O=n(j.x,j.y);return r(O,N,!0)}if(v)return o(N);const D=h.displacedBy.point,A=n(D.x,D.y);return r(A,N,p.shouldAnimate)};return(m,b)=>{if(bi(m))return m.critical.draggable.id===b.draggableId?null:c(b.draggableId,m.critical.draggable.id,m.impact,m.afterCritical);if(m.phase==="DROP_ANIMATING"){const h=m.completed;return h.result.draggableId===b.draggableId?null:c(b.draggableId,h.result.draggableId,h.impact,h.afterCritical)}return null}}const wS=()=>{const n=xS(),s=vS();return(o,c)=>n(o,c)||s(o,c)||yS},NS={dropAnimationFinished:hp},kS=Hb(wS,NS,null,{context:Ef,areStatePropsEqual:Pp})(hS);function zp(n){return ac(Lf).isUsingCloneFor===n.draggableId&&!n.isClone?null:Xe.createElement(kS,n)}function jS(n){const s=typeof n.isDragDisabled=="boolean"?!n.isDragDisabled:!0,r=!!n.disableInteractiveElementBlocking,o=!!n.shouldRespectForcePress;return Xe.createElement(zp,Ko({},n,{isClone:!1,isEnabled:s,canDragInteractiveElements:r,shouldRespectForcePress:o}))}const Ip=n=>s=>n===s,SS=Ip("scroll"),DS=Ip("auto"),Jh=(n,s)=>s(n.overflowX)||s(n.overflowY),CS=n=>{const s=window.getComputedStyle(n),r={overflowX:s.overflowX,overflowY:s.overflowY};return Jh(r,SS)||Jh(r,DS)},AS=()=>!1,Hp=n=>n==null?null:n===document.body?AS()?n:null:n===document.documentElement?null:CS(n)?n:Hp(n.parentElement);var Vu=n=>({x:n.scrollLeft,y:n.scrollTop});const qp=n=>n?window.getComputedStyle(n).position==="fixed"?!0:qp(n.parentElement):!1;var TS=n=>{const s=Hp(n),r=qp(n);return{closestScrollable:s,isFixedOnPage:r}},MS=({descriptor:n,isEnabled:s,isCombineEnabled:r,isFixedOnPage:o,direction:c,client:u,page:m,closest:b})=>{const h=(()=>{if(!b)return null;const{scrollSize:x,client:N}=b,D=yp({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:N.paddingBox.height,width:N.paddingBox.width});return{pageMarginBox:b.page.marginBox,frameClient:N,scrollSize:x,shouldClipSubject:b.shouldClipSubject,scroll:{initial:b.scroll,current:b.scroll,max:D,diff:{value:Zt,displacement:Zt}}}})(),g=c==="vertical"?yf:Kb,p=Ul({page:m,withPlaceholder:null,axis:g,frame:h});return{descriptor:n,isCombineEnabled:r,isFixedOnPage:o,axis:g,isEnabled:s,client:u,page:m,frame:h,subject:p}};const ES=(n,s)=>{const r=Ub(n);if(!s||n!==s)return r;const o=r.paddingBox.top-s.scrollTop,c=r.paddingBox.left-s.scrollLeft,u=o+s.scrollHeight,m=c+s.scrollWidth,h=hf({top:o,right:m,bottom:u,left:c},r.border);return bf({borderBox:h,margin:r.margin,border:r.border,padding:r.padding})};var OS=({ref:n,descriptor:s,env:r,windowScroll:o,direction:c,isDropDisabled:u,isCombineEnabled:m,shouldClipSubject:b})=>{const h=r.closestScrollable,g=ES(n,h),p=Wo(g,o),v=(()=>{if(!h)return null;const N=Ub(h),D={scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth};return{client:N,page:Wo(N,o),scroll:Vu(h),scrollSize:D,shouldClipSubject:b}})();return MS({descriptor:s,isEnabled:!u,isCombineEnabled:m,isFixedOnPage:r.isFixedOnPage,direction:c,client:g,page:p,closest:v})};const RS={passive:!1},LS={passive:!0};var eb=n=>n.shouldPublishImmediately?RS:LS;const Uo=n=>n&&n.env.closestScrollable||null;function PS(n){const s=w.useRef(null),r=ac(mc),o=Of("droppable"),{registry:c,marshal:u}=r,m=Ap(n),b=rt(()=>({id:n.droppableId,type:n.type,mode:n.mode}),[n.droppableId,n.mode,n.type]),h=w.useRef(b),g=rt(()=>Xt((R,_)=>{s.current||he();const $={x:R,y:_};u.updateDroppableScroll(b.id,$)}),[b.id,u]),p=Pe(()=>{const R=s.current;return!R||!R.env.closestScrollable?Zt:Vu(R.env.closestScrollable)},[]),v=Pe(()=>{const R=p();g(R.x,R.y)},[p,g]),x=rt(()=>di(v),[v]),N=Pe(()=>{const R=s.current,_=Uo(R);if(R&&_||he(),R.scrollOptions.shouldPublishImmediately){v();return}x()},[x,v]),D=Pe((R,_)=>{s.current&&he();const $=m.current,se=$.getDroppableRef();se||he();const q=TS(se),ie={ref:se,descriptor:b,env:q,scrollOptions:_};s.current=ie;const ue=OS({ref:se,descriptor:b,env:q,windowScroll:R,direction:$.direction,isDropDisabled:$.isDropDisabled,isCombineEnabled:$.isCombineEnabled,shouldClipSubject:!$.ignoreContainerClipping}),K=q.closestScrollable;return K&&(K.setAttribute(Qh.contextId,r.contextId),K.addEventListener("scroll",N,eb(ie.scrollOptions))),ue},[r.contextId,b,N,m]),A=Pe(()=>{const R=s.current,_=Uo(R);return R&&_||he(),Vu(_)},[]),j=Pe(()=>{const R=s.current;R||he();const _=Uo(R);s.current=null,_&&(x.cancel(),_.removeAttribute(Qh.contextId),_.removeEventListener("scroll",N,eb(R.scrollOptions)))},[N,x]),O=Pe(R=>{const _=s.current;_||he();const $=Uo(_);$||he(),$.scrollTop+=R.y,$.scrollLeft+=R.x},[]),T=rt(()=>({getDimensionAndWatchScroll:D,getScrollWhileDragging:A,dragStopped:j,scroll:O}),[j,D,A,O]),I=rt(()=>({uniqueId:o,descriptor:b,callbacks:T}),[T,b,o]);Tn(()=>(h.current=I.descriptor,c.droppable.register(I),()=>{s.current&&j(),c.droppable.unregister(I)}),[T,b,j,I,u,c.droppable]),Tn(()=>{s.current&&u.updateDroppableIsEnabled(h.current.id,!n.isDropDisabled)},[n.isDropDisabled,u]),Tn(()=>{s.current&&u.updateDroppableIsCombineEnabled(h.current.id,n.isCombineEnabled)},[n.isCombineEnabled,u])}function Pu(){}const tb={width:0,height:0,margin:UN},BS=({isAnimatingOpenOnMount:n,placeholder:s,animate:r})=>n||r==="close"?tb:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin},_S=({isAnimatingOpenOnMount:n,placeholder:s,animate:r})=>{const o=BS({isAnimatingOpenOnMount:n,placeholder:s,animate:r});return{display:s.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?oi.placeholder:null}},zS=n=>{const s=w.useRef(null),r=Pe(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),{animate:o,onTransitionEnd:c,onClose:u,contextId:m}=n,[b,h]=w.useState(n.animate==="open");w.useEffect(()=>b?o!=="open"?(r(),h(!1),Pu):s.current?Pu:(s.current=setTimeout(()=>{s.current=null,h(!1)}),r):Pu,[o,b,r]);const g=Pe(v=>{v.propertyName==="height"&&(c(),o==="close"&&u())},[o,u,c]),p=_S({isAnimatingOpenOnMount:b,animate:n.animate,placeholder:n.placeholder});return Xe.createElement(n.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":m,onTransitionEnd:g,ref:n.innerRef})};var IS=Xe.memo(zS);class HS extends Xe.PureComponent{constructor(...s){super(...s),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(s,r){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)}}const qS=n=>{const s=w.useContext(mc);s||he();const{contextId:r,isMovementAllowed:o}=s,c=w.useRef(null),u=w.useRef(null),{children:m,droppableId:b,type:h,mode:g,direction:p,ignoreContainerClipping:v,isDropDisabled:x,isCombineEnabled:N,snapshot:D,useClone:A,updateViewportMaxScroll:j,getContainerForClone:O}=n,T=Pe(()=>c.current,[]),I=Pe((K=null)=>{c.current=K},[]);Pe(()=>u.current,[]);const R=Pe((K=null)=>{u.current=K},[]),_=Pe(()=>{o()&&j({maxScroll:wp()})},[o,j]);PS({droppableId:b,type:h,mode:g,direction:p,isDropDisabled:x,isCombineEnabled:N,ignoreContainerClipping:v,getDroppableRef:T});const $=rt(()=>Xe.createElement(HS,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},({onClose:K,data:me,animate:Me})=>Xe.createElement(IS,{placeholder:me,onClose:K,innerRef:R,animate:Me,contextId:r,onTransitionEnd:_})),[r,_,n.placeholder,n.shouldAnimatePlaceholder,R]),se=rt(()=>({innerRef:I,placeholder:$,droppableProps:{"data-rfd-droppable-id":b,"data-rfd-droppable-context-id":r}}),[r,b,$,I]),q=A?A.dragging.draggableId:null,ie=rt(()=>({droppableId:b,type:h,isUsingCloneFor:q}),[b,q,h]);function ue(){if(!A)return null;const{dragging:K,render:me}=A,Me=Xe.createElement(zp,{draggableId:K.draggableId,index:K.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Z,Ae)=>me(Z,Ae,K));return Tw.createPortal(Me,O())}return Xe.createElement(Lf.Provider,{value:ie},m(se,D),ue())};function US(){return document.body||he(),document.body}const nb={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:US},Up=n=>{let s={...n},r;for(r in nb)n[r]===void 0&&(s={...s,[r]:nb[r]});return s},Bu=(n,s)=>n===s.droppable.type,ab=(n,s)=>s.draggables[n.draggable.id],GS=()=>{const n={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},s={...n,shouldAnimatePlaceholder:!1},r=Xt(u=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}})),o=Xt((u,m,b,h,g,p)=>{const v=g.descriptor.id;if(g.descriptor.droppableId===u){const D=p?{render:p,dragging:r(g.descriptor)}:null,A={isDraggingOver:b,draggingOverWith:b?v:null,draggingFromThisWith:v,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!1,snapshot:A,useClone:D}}if(!m)return s;if(!h)return n;const N={isDraggingOver:b,draggingOverWith:v,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:g.placeholder,shouldAnimatePlaceholder:!0,snapshot:N,useClone:null}});return(u,m)=>{const b=Up(m),h=b.droppableId,g=b.type,p=!b.isDropDisabled,v=b.renderClone;if(bi(u)){const x=u.critical;if(!Bu(g,x))return s;const N=ab(x,u.dimensions),D=An(u.impact)===h;return o(h,p,D,D,N,v)}if(u.phase==="DROP_ANIMATING"){const x=u.completed;if(!Bu(g,x.critical))return s;const N=ab(x.critical,u.dimensions);return o(h,p,Bp(x.result)===h,An(x.impact)===h,N,v)}if(u.phase==="IDLE"&&u.completed&&!u.shouldFlush){const x=u.completed;if(!Bu(g,x.critical))return s;const N=An(x.impact)===h,D=!!(x.impact.at&&x.impact.at.type==="COMBINE"),A=x.critical.droppable.id===h;return N?D?n:s:A?n:s}return s}},$S={updateViewportMaxScroll:e5},YS=Hb(GS,$S,(n,s,r)=>({...Up(r),...n,...s}),{context:Ef,areStatePropsEqual:Pp})(qS),FS=({isOpen:n,onClose:s,onSave:r,existingUser:o})=>{const{users:c,currentUser:u}=Dt(),[m,b]=w.useState(""),[h,g]=w.useState(""),[p,v]=w.useState(["DASHBOARD"]),[x,N]=w.useState("");w.useEffect(()=>{n&&(o?(b(o.username),v(o.permissions),g("")):(b(""),g(""),v(["DASHBOARD"])),N(""))},[o,n]);const D=(O,T)=>{O==="DASHBOARD"&&!T||v(I=>T?[...new Set([...I,O])]:I.filter(R=>R!==O))},A=(O,T)=>{v(I=>{const R=I.filter(_=>!O.includes(_));return T?[...new Set([...R,...O])]:R})},j=O=>{if(O.preventDefault(),!m.trim()){N("Username is required.");return}if(!o&&!h){N("Password is required for new users.");return}if(c.some(I=>I.username.toLowerCase()===m.toLowerCase()&&I.id!==(o==null?void 0:o.id))){N("This username is already taken.");return}const T={id:(o==null?void 0:o.id)||`user${Date.now()}`,username:m,permissions:p,...h&&{password:h}};r(T)};return l.jsx(ut,{isOpen:n,onClose:s,title:o?`Edit User: ${o.username}`:"Add New User",closeOnBackdropClick:!1,children:l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[x&&l.jsx("p",{className:"text-red-500 text-sm",children:x}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),l.jsx("input",{type:"text",value:m,onChange:O=>b(O.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0,disabled:(o==null?void 0:o.id)===(u==null?void 0:u.id)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),l.jsx("input",{type:"password",value:h,onChange:O=>g(O.target.value),placeholder:o?"Leave blank to keep unchanged":"Required",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Permissions"}),l.jsx("div",{className:"mt-2 space-y-3 border border-gray-200 dark:border-dark-border p-3 rounded-lg max-h-60 overflow-y-auto",children:Object.entries(Sw).map(([O,T])=>{const I=T.every(R=>p.includes(R));return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{id:`group-${O}`,type:"checkbox",checked:I,onChange:R=>A(T,R.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:`group-${O}`,className:"ml-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:O})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6",children:T.map(R=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:`perm-${R}`,type:"checkbox",checked:p.includes(R),onChange:_=>D(R,_.target.checked),disabled:R==="DASHBOARD",className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue disabled:opacity-50"}),l.jsx("label",{htmlFor:`perm-${R}`,className:"ml-2 text-sm text-gray-600 dark:text-gray-300 capitalize",children:R.toLowerCase().replace(/_/g," ")})]},R))})]},O)})})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2.5 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2.5 rounded-lg hover:bg-brand-blue-dark font-semibold",children:"Save User"})]})]})})},VS=()=>{const{users:n,activityLogs:s,setUsers:r,currentUser:o,appSettings:c,setAppSettings:u,patients:m,restorePatient:b,setAreSettingsDirty:h,restoreBackup:g,refreshData:p,logActivity:v}=Dt(),[x,N]=w.useState(!1),[D,A]=w.useState(null),[j,O]=w.useState(c),{showNotification:T}=Yr(),[I,R]=w.useState("userManagement"),[_,$]=w.useState(c),se=w.useMemo(()=>JSON.stringify(j)!==JSON.stringify(_),[j,_]);w.useEffect(()=>{h(se)},[se,h]);const q=w.useMemo(()=>m.filter(oe=>oe.isDeleted).sort((oe,xe)=>new Date(xe.deletedAt).getTime()-new Date(oe.deletedAt).getTime()),[m]),ie=(oe,xe)=>{if(!xe)return"Unknown";const _e=s.find($e=>$e.type==="delete"&&$e.entity==="patient"&&$e.description&&$e.description.includes(`ID: ${oe}`)&&Math.abs(new Date($e.date).getTime()-new Date(xe).getTime())<300*1e3);if(_e&&_e.userId){const $e=n.find(qe=>qe.id===_e.userId);return $e?$e.username:"Unknown"}return"Unknown"},ue=oe=>{const xe=n.some(_e=>_e.id===oe.id);r(_e=>xe?_e.map($e=>$e.id===oe.id?oe:$e):[..._e,oe]),T(`User '${oe.username}' ${xe?"updated":"added"}.`),xe?v("edit","user",`Updated user permissions for ${oe.username}.`):v("create","user",`Created new user: ${oe.username}.`),N(!1),A(null)},K=()=>{A(null),N(!0)},me=oe=>{A(oe),N(!0)},Me=oe=>{if(oe===(o==null?void 0:o.id)){T("Error: You cannot remove your own account.","error");return}if(window.confirm("Are you sure you want to remove this user? This action cannot be undone.")){const xe=n.find(_e=>_e.id===oe);r(_e=>_e.filter($e=>$e.id!==oe)),T(`User '${xe==null?void 0:xe.username}' removed.`,"info"),v("delete","user",`Removed user: ${xe==null?void 0:xe.username}.`)}},Z=oe=>{const{name:xe,value:_e,type:$e}=oe.target,qe=xe.split(".");if(qe.length===2){const[Ye,ae]=qe,be=$e==="checkbox"?oe.target.checked:_e;O(Se=>({...Se,[Ye]:{...Se[Ye],[ae]:be}}))}else O(Ye=>({...Ye,[xe]:$e==="checkbox"?oe.target.checked:_e}))},Ae=oe=>{var _e;const xe=(_e=oe.target.files)==null?void 0:_e[0];if(xe){if(xe.size>1024*1024){T("File is too large. Please select an image under 1MB.","error");return}const $e=new FileReader;$e.onloadend=()=>{O(qe=>({...qe,appLogo:$e.result}))},$e.readAsDataURL(xe)}},E=()=>{u(j),$(j),T("Settings saved successfully!"),v("edit","user","Updated application settings.")},W=()=>{Aw(j)||T("Could not open print preview. Please disable pop-up blockers.","error")},ce=o==null?void 0:o.permissions.includes("manage_users"),pe=o==null?void 0:o.permissions.includes("edit_settings"),F=[{id:"userManagement",label:"User Management",icon:db,permission:ce},{id:"general",label:"General",icon:tv,permission:pe},{id:"navigation",label:"Navigation",icon:gv,permission:pe},{id:"print",label:"Print Settings",icon:Ur,permission:pe},{id:"slip",label:"Slip Settings",icon:Xu,permission:pe},{id:"backup",label:"Backup & Restore",icon:yv,permission:ce},{id:"archived",label:"Archived Patients",icon:Gn,permission:!0},{id:"appSettings",label:"App Settings",icon:ub,permission:!0},{id:"revHistory",label:"App Rev. History",icon:cb,permission:!0}].filter(oe=>oe.permission),B=[{version:"v1.3.0",date:"2024-07-22",changes:["Improved queue reset: In-app confirmation modal, no browser confirm, and full queue table clearing.","Reset Queue button moved and styled to match stats card; now inside QueueStats component.","Payment allocation: Auto-allocate received payments to oldest pending treatments, handle advance payments, and log all actions.","All received payments now count toward today's income (daybook).","Activity log improvements: All actions and payments are logged with correct user.","Accounting filter (Day/Month/Year/All) restored and styled.","Bug fix: Only one transaction entry for payment+advance, with clear description.","Bug fix: UI alignment and spacing for filter and reset buttons.","Bug fix: No duplicate confirmation popups for queue reset.","Bug fix: Queue auto-resets on date change, even if app was closed at midnight.","Bug fix: Username in ledger/activity log always shows correct user."]},{version:"v1.2.0",date:"2024-07-22",changes:["Added database-level backup and restore","Implemented data integrity check and repair","Optimized patient/treatment lookups for performance","Added Stats tab to Accounting page","Bugfix: Queue and stats reset at midnight","Bugfix: Archived patients shown with line-through in accounting"]},{version:"v1.1.0",date:"2024-07-15",changes:["Added activity log with real-time updates","Improved error handling for all API calls","Bugfix: Appointment time parsing and display"]},{version:"v1.0.0",date:"2024-07-01",changes:["Initial release: Patient management, queue, appointments, accounting, settings"]}],X=({title:oe,children:xe})=>l.jsxs("div",{className:"bg-white dark:bg-dark-card p-6 rounded-lg shadow-md border border-gray-200 dark:border-dark-border transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-dark-text dark:text-dark-text-primary",children:oe}),l.jsx("div",{className:"space-y-6",children:xe})]}),te=({tab:oe})=>l.jsxs("button",{onClick:()=>R(oe.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out hover:shadow-lg hover:-translate-y-px ${I===oe.id?"bg-brand-blue text-white shadow":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[l.jsx(oe.icon,{className:"h-5 w-5"}),oe.label]}),Te=()=>{const[oe,xe]=w.useState(()=>j.navOrder||ql.map(qe=>qe.view)),_e=w.useMemo(()=>new Map(ql.map(qe=>[qe.view,qe])),[]),$e=qe=>{if(!qe.destination)return;const Ye=qe.source.index,ae=qe.destination.index;if(Ye===ae)return;const be=Array.from(oe),[Se]=be.splice(Ye,1);be.splice(ae,0,Se),xe(be),O(lt=>({...lt,navOrder:be}))};return l.jsxs(X,{title:"Customize Sidebar Navigation",children:[l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-4",children:"Drag and drop items to reorder them in the sidebar. Click Save Changes to apply for all users."}),l.jsx(lS,{onDragEnd:$e,children:l.jsx(YS,{droppableId:"sidebar-nav-order",renderClone:(qe,Ye,ae)=>{const be=oe[ae.source.index],Se=_e.get(be);return Se?l.jsxs("li",{ref:qe.innerRef,...qe.draggableProps,...qe.dragHandleProps,className:"flex items-center gap-3 p-3 rounded-lg border border-brand-blue bg-white dark:bg-dark-card z-50 shadow-2xl scale-105 opacity-95 ring-2 ring-brand-blue select-none",style:qe.draggableProps.style,children:[l.jsx(Se.icon,{className:"h-5 w-5"}),l.jsx("span",{className:"font-medium",children:Se.label}),l.jsx("span",{className:"ml-auto cursor-grab text-gray-400",children:"☰"})]}):null},children:(qe,Ye)=>l.jsxs("ul",{className:"space-y-2",ref:qe.innerRef,...qe.droppableProps,children:[oe.map((ae,be)=>{const Se=_e.get(ae);return Se?l.jsx(jS,{draggableId:ae,index:be,children:(lt,ge)=>l.jsxs("li",{ref:lt.innerRef,...lt.draggableProps,...lt.dragHandleProps,className:`flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-dark-border transition-shadow select-none bg-white dark:bg-dark-card
                                                        ${ge.isDragging?"z-50 shadow-2xl scale-105 opacity-90 border-brand-blue ring-2 ring-brand-blue":"bg-gray-50 dark:bg-gray-800/50"}
                                                    `,style:lt.draggableProps.style,children:[l.jsx(Se.icon,{className:"h-5 w-5"}),l.jsx("span",{className:"font-medium",children:Se.label}),l.jsx("span",{className:"ml-auto cursor-grab text-gray-400",children:"☰"})]})},ae):null}),qe.placeholder]})})})]})},we=()=>{const[oe,xe]=w.useState({}),[_e,$e]=w.useState([]),[qe,Ye]=w.useState(!1),[ae,be]=w.useState(!1),[Se,lt]=w.useState(!1),[ge,tt]=w.useState(!1),tn=async()=>{lt(!0);try{const Y=await fetch("/api.php?entity=backup");if(!Y.ok)throw new Error("Backup failed");const Ee=await Y.blob(),Be=window.URL.createObjectURL(Ee),We=document.createElement("a");We.href=Be,We.download=`dental_clinic_backup_${new Date().toISOString().replace(/[:.]/g,"-")}.sql`,document.body.appendChild(We),We.click(),We.remove(),window.URL.revokeObjectURL(Be),T("Backup downloaded successfully.","success")}catch(Y){T(Y.message||"Backup failed","error")}finally{lt(!1)}},ne=async Y=>{var Be;const Ee=(Be=Y.target.files)==null?void 0:Be[0];if(Ee){tt(!0);try{const We=new FormData;if(We.append("sqlfile",Ee),!(await fetch("/api.php?entity=restore",{method:"POST",body:We})).ok)throw new Error("Restore failed");T("Database restored successfully. Please reload the app.","success")}catch(We){T(We.message||"Restore failed","error")}finally{tt(!1)}}},le=async()=>{Ye(!0);try{const Y=await fetch("/api.php?entity=integrity_check"),Ee=await Y.json();if(!Y.ok)throw new Error(Ee.error||"Integrity check failed");$e(Ee.missing.map(Be=>Be.table)),T("Integrity check completed.","success")}catch(Y){T(Y.message||"Integrity check failed","error")}finally{Ye(!1)}},ve=async()=>{be(!0);try{const Y=await fetch("/api.php?entity=repair_schema",{method:"POST"}),Ee=await Y.json();if(!Y.ok)throw new Error(Ee.error||"Repair failed");T("Database schema repaired successfully.","success"),$e([])}catch(Y){T(Y.message||"Repair failed","error")}finally{be(!1)}};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs(X,{title:"Backup Data",children:[l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-4",children:"Download a full SQL backup of your clinic's database. Keep it in a safe place."}),l.jsx("button",{onClick:tn,disabled:Se,className:"w-full flex items-center justify-center gap-2 bg-brand-blue text-white p-3 rounded-lg hover:bg-brand-blue-dark font-semibold text-base disabled:bg-gray-400 disabled:cursor-not-allowed",children:Se?"Backing up...":l.jsxs(l.Fragment,{children:[l.jsx(xv,{className:"h-6 w-6"}),"Backup Database"]})})]}),l.jsxs(X,{title:"Restore Data",children:[l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-4",children:["Restore your clinic's database from a backup file. ",l.jsx("strong",{className:"text-red-500",children:"Warning: This will overwrite all existing data."})]}),l.jsx("input",{type:"file",accept:".sql",onChange:ne,disabled:ge,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-brand-blue dark:file:bg-blue-500/20 dark:file:text-blue-300 hover:file:bg-blue-100 dark:hover:file:bg-blue-500/30"}),ge&&l.jsx("p",{className:"text-sm text-blue-500 mt-2",children:"Restoring database..."})]}),l.jsxs(X,{title:"Data Integrity Check",children:[l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-4",children:"Verify that all necessary database tables are present. Repair if missing."}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:le,disabled:qe,className:"flex-1 bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:qe?"Checking...":"Check Status"}),l.jsx("button",{onClick:ve,disabled:ae,className:"flex-1 bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:ae?"Repairing...":"Repair Structure"})]}),_e.length>0&&l.jsx("ul",{className:"text-sm space-y-2 mt-4",children:_e.map(Y=>l.jsxs("li",{className:"flex justify-between p-2 bg-red-50 dark:bg-red-900/30 rounded-md",children:[l.jsx("span",{children:Y}),l.jsx("span",{className:"font-semibold text-red-500",children:"Missing"})]},Y))}),_e.length===0&&!qe&&l.jsx("p",{className:"text-green-600 text-sm mt-4",children:"All required tables are present."})]})]})};return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:"Settings"}),pe&&l.jsx("button",{onClick:E,disabled:!se,className:"bg-brand-blue text-white px-6 py-2 rounded-lg hover:bg-brand-blue-dark shadow-md transition-all font-semibold disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed disabled:shadow-none disabled:transform-none",children:"Save Changes"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[l.jsx("nav",{className:"flex-shrink-0 md:w-56 space-y-2",children:F.map(oe=>l.jsx(te,{tab:oe},oe.id))}),l.jsxs("div",{className:"flex-grow",children:[I==="appSettings"&&l.jsx(X,{title:"App Settings",children:l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg border border-gray-200 dark:border-gray-600 mb-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-dark-text dark:text-dark-text-primary",children:"Auto Reset Queue on New Day"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"If enabled, the queue will automatically reset at midnight or on next login after a date change."})]}),l.jsx("button",{type:"button",onClick:()=>O(oe=>({...oe,autoResetQueue:!oe.autoResetQueue})),className:`${j.autoResetQueue?"bg-brand-blue":"bg-gray-200 dark:bg-gray-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-blue focus:ring-offset-2`,children:l.jsx("span",{"aria-hidden":"true",className:`${j.autoResetQueue?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]})}),I==="userManagement"&&ce&&l.jsxs(X,{title:"User Management",children:[l.jsx("button",{onClick:K,className:"w-full bg-brand-blue/10 text-brand-blue dark:bg-brand-blue/20 dark:text-blue-300 px-3 py-2 rounded-lg hover:bg-brand-blue/20 text-sm font-semibold",children:"Add New User"}),l.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:n.map(oe=>l.jsxs("li",{className:"py-3 flex justify-between items-center transition-all duration-200 ease-in-out hover:shadow-md hover:-translate-y-px hover:bg-gray-50 dark:hover:bg-dark-card px-2 -mx-2 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-dark-text dark:text-dark-text-primary",children:oe.username}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 max-w-xs truncate",title:oe.permissions.join(", "),children:[oe.permissions.length," permissions"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>me(oe),disabled:oe.id===(o==null?void 0:o.id)&&oe.username==="admin",className:"p-2 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",title:"Edit user",children:l.jsx(Sa,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>Me(oe.id),className:"p-2 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20 disabled:text-gray-400 disabled:cursor-not-allowed disabled:hover:bg-transparent",disabled:oe.id===(o==null?void 0:o.id),title:oe.id===(o==null?void 0:o.id)?"Cannot remove yourself":"Remove user",children:l.jsx(Gn,{className:"h-5 w-5"})})]})]},oe.id))})]}),I==="general"&&pe&&l.jsxs(X,{title:"General Settings",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"appName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Clinic Name"}),l.jsx("input",{type:"text",id:"appName",name:"appName",value:j.appName,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"clinicAddress",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Address"}),l.jsx("textarea",{id:"clinicAddress",name:"clinicAddress",value:j.clinicAddress,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"clinicContact",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contact Number"}),l.jsx("input",{type:"text",id:"clinicContact",name:"clinicContact",value:j.clinicContact,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"appLogo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Clinic Logo"}),l.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[j.appLogo&&l.jsx("img",{src:j.appLogo,alt:"Current Logo",className:"h-16 w-16 rounded-md object-cover"}),l.jsx("input",{type:"file",id:"appLogo",name:"appLogo",accept:"image/png, image/jpeg, image/svg+xml",onChange:Ae,className:"text-sm text-gray-500 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-brand-blue dark:file:bg-blue-500/20 dark:file:text-blue-300 hover:file:bg-blue-100 dark:hover:file:bg-blue-500/30"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Clinic Hours"}),l.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"clinicStartTime",className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Opening Time"}),l.jsx("input",{type:"time",id:"clinicStartTime",name:"clinicStartTime",value:j.clinicStartTime,onChange:Z,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"clinicEndTime",className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Closing Time"}),l.jsx("input",{type:"time",id:"clinicEndTime",name:"clinicEndTime",value:j.clinicEndTime,onChange:Z,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Appearance"}),l.jsxs("div",{className:"mt-2 flex items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg border border-gray-200 dark:border-gray-600",children:[l.jsx("span",{className:"font-medium text-dark-text dark:text-dark-text-primary",children:"Night Mode"}),l.jsx("button",{type:"button",onClick:()=>O(oe=>({...oe,nightMode:!oe.nightMode})),className:`${j.nightMode?"bg-brand-blue":"bg-gray-200 dark:bg-gray-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-blue focus:ring-offset-2`,children:l.jsx("span",{"aria-hidden":"true",className:`${j.nightMode?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]})]})]}),I==="navigation"&&pe&&l.jsx(Te,{}),I==="print"&&pe&&l.jsxs(X,{title:"Print & Report Customization",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"headerLayout",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Header Layout"}),l.jsxs("select",{id:"headerLayout",name:"printSettings.headerLayout",value:j.printSettings.headerLayout,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"center-aligned",children:"Center Aligned"}),l.jsx("option",{value:"left-right-aligned",children:"Left/Right Aligned"})]})]}),l.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-dark-border",children:[l.jsx("h4",{className:"font-semibold text-dark-text dark:text-dark-text-primary mb-2",children:"Toggle Header Details"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"showLogo",name:"printSettings.showLogo",type:"checkbox",checked:j.printSettings.showLogo,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"showLogo",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Clinic Logo"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"showAddress",name:"printSettings.showAddress",type:"checkbox",checked:j.printSettings.showAddress,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"showAddress",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Clinic Address"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"showContact",name:"printSettings.showContact",type:"checkbox",checked:j.printSettings.showContact,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"showContact",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Clinic Contact"})]})]})]}),l.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-dark-border",children:[l.jsx("h4",{className:"font-semibold text-dark-text dark:text-dark-text-primary mb-2",children:"Toggle Report Content"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"showPatientAge",name:"printSettings.showPatientAge",type:"checkbox",checked:j.printSettings.showPatientAge,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"showPatientAge",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Patient's Age & DOB"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"showPatientContactOnReport",name:"printSettings.showPatientContactOnReport",type:"checkbox",checked:j.printSettings.showPatientContactOnReport,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"showPatientContactOnReport",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Patient's Contact Info"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"showTreatmentIdOnReport",name:"printSettings.showTreatmentIdOnReport",type:"checkbox",checked:j.printSettings.showTreatmentIdOnReport,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"showTreatmentIdOnReport",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Treatment Record ID"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"footerText",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Custom Footer Text"}),l.jsx("input",{type:"text",id:"footerText",name:"printSettings.footerText",value:j.printSettings.footerText,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fontSize",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Font Size"}),l.jsxs("select",{id:"fontSize",name:"printSettings.fontSize",value:j.printSettings.fontSize,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"small",children:"Small"}),l.jsx("option",{value:"medium",children:"Medium"}),l.jsx("option",{value:"large",children:"Large"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pageSize",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Size"}),l.jsxs("select",{id:"pageSize",name:"printSettings.pageSize",value:j.printSettings.pageSize,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"A4",children:"A4"}),l.jsx("option",{value:"letter",children:"Letter"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pageMargin",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Page Margins"}),l.jsx("input",{type:"text",id:"pageMargin",name:"printSettings.pageMargin",value:j.printSettings.pageMargin,placeholder:"e.g. 2cm or 1in",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-dark-border",children:l.jsxs("button",{type:"button",onClick:W,className:"w-full flex items-center justify-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 font-semibold",children:[l.jsx(Ur,{className:"h-5 w-5"}),"Preview Sample Report"]})})]}),I==="slip"&&pe&&l.jsxs(X,{title:"Queue Slip Customization",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"slipShowLogo",name:"slipSettings.showLogo",type:"checkbox",checked:j.slipSettings.showLogo,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"slipShowLogo",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Clinic Logo on Slip"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"slipShowName",name:"slipSettings.showClinicName",type:"checkbox",checked:j.slipSettings.showClinicName,onChange:Z,className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:"slipShowName",className:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show Clinic Name on Slip"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"slipTitle",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slip Title"}),l.jsx("input",{type:"text",id:"slipTitle",name:"slipSettings.title",value:j.slipSettings.title,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"slipFooter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slip Footer Text"}),l.jsx("input",{type:"text",id:"slipFooter",name:"slipSettings.footerText",value:j.slipSettings.footerText,onChange:Z,className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"})]})]}),I==="backup"&&ce&&l.jsx(we,{}),I==="archived"&&l.jsx(X,{title:"Archived Patients",children:l.jsx("div",{className:"overflow-x-auto max-h-[60vh]",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-dark-border",children:"Patient ID"}),l.jsx("th",{className:"p-3 font-semibold text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-dark-border",children:"Name"}),l.jsx("th",{className:"p-3 font-semibold text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-dark-border",children:"Archived On"}),l.jsx("th",{className:"p-3 font-semibold text-gray-600 dark:text-gray-300 border-b border-gray-200 dark:border-dark-border text-center",children:"Action"})]})}),l.jsx("tbody",{children:q.length>0?q.map(oe=>l.jsxs("tr",{className:"transition-all duration-200 ease-in-out hover:shadow-md hover:-translate-y-px hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[l.jsx("td",{className:"p-3 text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-dark-border font-mono",children:oe.id}),l.jsx("td",{className:"p-3 text-dark-text dark:text-dark-text-primary border-b border-gray-200 dark:border-dark-border font-medium",children:oe.name}),l.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400 border-b border-gray-200 dark:border-dark-border",children:oe.deletedAt?ye(new Date(oe.deletedAt),"dd MMM, yyyy"):"N/A"}),l.jsx("td",{className:"p-3 text-center border-b border-gray-200 dark:border-dark-border",children:ie(oe.id,oe.deletedAt)}),l.jsx("td",{className:"p-3 text-center border-b border-gray-200 dark:border-dark-border",children:l.jsx("button",{onClick:()=>b(oe.id),className:"text-sm bg-green-500 text-white px-3 py-1.5 rounded-md hover:bg-green-600 font-semibold",children:"Restore"})})]},oe.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No archived patients found."})})})]})})}),I==="revHistory"&&l.jsx(X,{title:"App Revision History",children:l.jsx("div",{className:"space-y-8",children:B.map(oe=>l.jsxs("div",{className:"border-l-4 border-brand-blue pl-4",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[l.jsx("span",{className:"text-lg font-bold text-brand-blue",children:oe.version}),l.jsx("span",{className:"text-gray-500 text-sm",children:oe.date})]}),l.jsx("ul",{className:"list-disc ml-6 text-gray-700 dark:text-gray-300",children:oe.changes.map((xe,_e)=>l.jsx("li",{children:xe},_e))})]},oe.version))})})]})]}),x&&l.jsx(FS,{isOpen:x,onClose:()=>N(!1),onSave:ue,existingUser:D})]})},QS=Xe.memo(VS),XS=({isOpen:n,onClose:s,onSave:r,existingDoctor:o})=>{const c=()=>({start:"09:00",end:"17:00",isOff:!1}),u=()=>({name:"",specialty:"",gender:"",contactNumbers:[""],timings:{monday:c(),tuesday:c(),wednesday:c(),thursday:c(),friday:c(),saturday:{start:"10:00",end:"14:00",isOff:!1},sunday:{start:"09:00",end:"17:00",isOff:!0}}}),m=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],b={start:"",end:"",isOff:!0},h=j=>{const O={start:"09:00",end:"17:00",isOff:!1};return{monday:j&&j.monday?{...O,...j.monday}:{...O},tuesday:j&&j.tuesday?{...O,...j.tuesday}:{...O},wednesday:j&&j.wednesday?{...O,...j.wednesday}:{...O},thursday:j&&j.thursday?{...O,...j.thursday}:{...O},friday:j&&j.friday?{...O,...j.friday}:{...O},saturday:j&&j.saturday?{...O,...j.saturday}:{...O},sunday:j&&j.sunday?{...O,...j.sunday}:{...O}}},[g,p]=w.useState(o?{...o,contactNumbers:Array.isArray(o.contactNumbers)?o.contactNumbers.map(j=>j!=null&&j.startsWith("+92")?j.slice(3):j):[""],timings:h(o.timings)}:{...u(),status:"active"});Xe.useEffect(()=>{n&&p(o?{...o,contactNumbers:Array.isArray(o.contactNumbers)?o.contactNumbers.map(j=>j!=null&&j.startsWith("+92")?j.slice(3):j):[""],timings:h(o.timings)}:{...u(),status:"active"})},[n,o]);const v=j=>{j.preventDefault();const O={...g,contactNumbers:g.contactNumbers.map(T=>T.startsWith("+92")?T:"+92"+T).filter(T=>T.trim()!=="")};r(O)},x=(j,O,T)=>{p(I=>({...I,timings:{...I.timings,[j]:{...I.timings[j],[O]:T}}}))},N=(j,O)=>{const T=[...g.contactNumbers];T[j]=O,p(I=>({...I,contactNumbers:T}))},D=()=>{p(j=>({...j,contactNumbers:[...j.contactNumbers,""]}))},A=j=>{const O=g.contactNumbers.filter((T,I)=>I!==j);p(T=>({...T,contactNumbers:O}))};return l.jsx(ut,{isOpen:n,onClose:s,title:o?"Edit Doctor":"Add New Doctor",closeOnBackdropClick:!1,children:l.jsxs("form",{onSubmit:v,className:"space-y-4 max-h-[80vh] overflow-y-auto px-2 sm:px-0",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 gap-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),l.jsx("input",{type:"text",value:g.name,onChange:j=>p(O=>({...O,name:j.target.value})),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Specialty"}),l.jsx("input",{type:"text",value:g.specialty,onChange:j=>p(O=>({...O,specialty:j.target.value})),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Gender"}),l.jsxs("select",{value:g.gender,onChange:j=>p(O=>({...O,gender:j.target.value})),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"",children:"Select Gender..."}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contact Numbers"}),l.jsx("div",{className:"space-y-2",children:g.contactNumbers.map((j,O)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ic,{value:j.startsWith("+92")?j.slice(3):j,onChange:T=>N(O,T),required:!0,label:void 0}),l.jsx("button",{type:"button",onClick:()=>A(O),className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-500/20 rounded-full",children:l.jsx(Gn,{className:"h-5 w-5"})})]},O))}),l.jsxs("button",{type:"button",onClick:D,className:"mt-2 text-sm text-brand-blue hover:underline flex items-center gap-1",children:[l.jsx(ib,{className:"h-4 w-4"})," Add another number"]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-dark-text dark:text-dark-text-primary mb-2",children:"Weekly Schedule"}),l.jsx("div",{className:"space-y-3",children:m.map(j=>{const O=g.timings[j]||b;return l.jsxs("div",{className:"grid grid-cols-4 items-center gap-3 p-2 bg-gray-50 dark:bg-gray-800/50 rounded-md",children:[l.jsx("label",{className:"capitalize font-medium text-gray-700 dark:text-gray-300 col-span-1",children:j.charAt(0).toUpperCase()+j.slice(1)}),l.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-2",children:[l.jsx("input",{type:"time",value:O.start,onChange:T=>x(j,"start",T.target.value),disabled:O.isOff,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 disabled:bg-gray-200 dark:disabled:bg-gray-700"}),l.jsx("input",{type:"time",value:O.end,onChange:T=>x(j,"end",T.target.value),disabled:O.isOff,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 disabled:bg-gray-200 dark:disabled:bg-gray-700"})]}),l.jsxs("div",{className:"flex items-center gap-2 justify-self-end",children:[l.jsx("input",{type:"checkbox",id:`isOff-${j}`,checked:O.isOff,onChange:T=>x(j,"isOff",T.target.checked),className:"h-4 w-4 rounded border-gray-300 text-brand-blue focus:ring-brand-blue"}),l.jsx("label",{htmlFor:`isOff-${j}`,className:"text-sm text-gray-600 dark:text-gray-400",children:"Day Off"})]})]},j)})})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2 sticky bottom-0 bg-white dark:bg-dark-card z-10 pb-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark",children:"Save Doctor"})]})]})})},ZS=()=>{const{doctors:n,addDoctor:s,editDoctor:r,requestDeleteDoctor:o,toggleDoctorStatus:c,currentUser:u,treatments:m}=Dt(),[b,h]=w.useState(!1),[g,p]=w.useState(null),v=u==null?void 0:u.permissions.includes("delete_doctor"),x=async j=>{"id"in j&&j.id?await r(j):await s(j),h(!1),p(null)},N=()=>{p(null),h(!0)},D=j=>{p(j),h(!0)},A=j=>m.some(O=>O.doctorId===j);return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:["Manage Doctors (",n.length,")"]}),l.jsx("button",{onClick:N,className:"bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark",children:"Add New Doctor"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(j=>l.jsxs("div",{className:`bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border flex flex-col transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1 ${j.status==="disabled"?"opacity-60":""}`,children:[l.jsxs("div",{className:"p-4 flex-grow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-dark-text dark:text-dark-text-primary",children:j.name}),l.jsx("p",{className:"text-brand-blue font-medium",children:j.specialty})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j.status==="active"?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:j.status==="active"?"Active":"Disabled"})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:j.gender}),l.jsx("div",{className:"mt-2 text-sm space-y-1",children:j.contactNumbers.filter(Boolean).map((O,T)=>l.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:sc(O)},T))}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-dark-border",children:[l.jsx("h4",{className:"font-semibold text-sm mb-2 text-gray-700 dark:text-gray-300",children:"Working Hours"}),(()=>{const O=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return l.jsx("ul",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:O.map(T=>{const I=j.timings[T]||{start:"",end:"",isOff:!0};return l.jsxs("li",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"capitalize",children:T}),I.isOff||!I.start||!I.end?l.jsx("span",{className:"font-semibold text-red-500",children:"Off"}):l.jsxs("span",{className:"font-mono font-medium text-dark-text dark:text-dark-text-primary",children:[ye(ln(I.start,"HH:mm",new Date),"p")," - ",ye(ln(I.end,"HH:mm",new Date),"p")]})]},T)})})})()]})]}),l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg border-t border-gray-200 dark:border-dark-border flex gap-2",children:[l.jsx("button",{onClick:()=>D(j),className:"flex-1 text-sm bg-yellow-500 text-white px-3 py-1.5 rounded-md hover:bg-yellow-600",children:"Edit"}),l.jsx("button",{onClick:()=>c(j.id),className:"flex-1 text-sm bg-gray-500 text-white px-3 py-1.5 rounded-md hover:bg-gray-600",children:j.status==="active"?"Disable":"Enable"}),v&&l.jsx("button",{onClick:()=>o(j.id),disabled:A(j.id),title:A(j.id)?"Cannot delete: Doctor has treatment records.":"Delete Doctor",className:"flex-1 text-sm bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed",children:"Delete"})]})]},j.id))}),(b||g)&&l.jsx(XS,{isOpen:b,onClose:()=>{h(!1),p(null)},onSave:x,existingDoctor:g})]})},WS=Xe.memo(ZS),KS=({isOpen:n,onClose:s,onSave:r,existingProcedure:o})=>{const c=()=>({name:"",description:"",cost:0}),[u,m]=w.useState(o||{...c(),status:"active"});w.useEffect(()=>{n&&m(o||{...c(),status:"active"})},[o,n]);const b=h=>{if(h.preventDefault(),o)r({...u,id:o.id});else{const{id:g,...p}=u;r(p)}};return l.jsx(ut,{isOpen:n,onClose:s,title:o?"Edit Procedure":"Add New Procedure",closeOnBackdropClick:!1,children:l.jsxs("form",{onSubmit:b,className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Procedure Name",value:u.name,onChange:h=>m(g=>({...g,name:h.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsx("textarea",{placeholder:"Description",value:u.description,onChange:h=>m(g=>({...g,description:h.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:3}),l.jsx("input",{type:"number",step:"1",min:"0",placeholder:"Cost (PKR)",value:u.cost,onChange:h=>m(g=>({...g,cost:parseFloat(h.target.value)||0})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsxs("div",{className:"flex gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark",children:"Save Procedure"})]})]})})},JS=()=>{const{procedures:n,addProcedure:s,editProcedure:r,requestDeleteProcedure:o,toggleProcedureStatus:c,treatments:u,currentUser:m}=Dt(),[b,h]=w.useState(!1),[g,p]=w.useState(null),[v,x]=w.useState(""),[N,D]=w.useState({key:"name",direction:"ascending"}),A=m==null?void 0:m.permissions.includes("delete_procedure"),j=async q=>{"id"in q&&q.id&&!isNaN(Number(q.id))?await r(q):await s(q),h(!1),p(null)},O=q=>{p(q),h(!0)},T=()=>{p(null),h(!0)},I=w.useMemo(()=>{let q=[...n];return N!==null&&q.sort((ie,ue)=>{const K=ie[N.key],me=ue[N.key];return typeof K=="string"&&typeof me=="string"?N.direction==="ascending"?K.localeCompare(me):me.localeCompare(K):K<me?N.direction==="ascending"?-1:1:K>me?N.direction==="ascending"?1:-1:0}),q},[n,N]),R=w.useMemo(()=>I.filter(q=>q.name.toLowerCase().includes(v.toLowerCase())||q.description.toLowerCase().includes(v.toLowerCase())),[I,v]),_=q=>{let ie="ascending";N&&N.key===q&&N.direction==="ascending"&&(ie="descending"),D({key:q,direction:ie})},$=q=>!N||N.key!==q?l.jsx(ci,{className:"h-4 w-4 inline ml-1 text-gray-400"}):N.direction==="ascending"?l.jsx(ci,{className:"h-4 w-4 inline ml-1"}):l.jsx(Zu,{className:"h-4 w-4 inline ml-1"}),se=q=>u.some(ie=>ie.procedures.some(ue=>ue.procedureId===q));return l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-3xl font-bold text-dark-text dark:text-dark-text-primary",children:"Service & Procedure List"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("input",{type:"text",placeholder:"Search procedures...",value:v,onChange:q=>x(q.target.value),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"}),l.jsx("button",{onClick:T,className:"bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark",children:"Add Procedure"})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-card shadow-md rounded-lg border border-gray-200 dark:border-dark-border overflow-x-auto transition-all duration-200 ease-in-out hover:shadow-xl hover:-translate-y-1",children:l.jsxs("table",{className:"w-full text-left min-w-[640px]",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:l.jsxs("tr",{children:[l.jsxs("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:()=>_("name"),children:["Procedure Name ",$("name")]}),l.jsx("th",{className:"p-4",children:"Description"}),l.jsxs("th",{className:"p-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 text-right",onClick:()=>_("cost"),children:["Cost (PKR) ",$("cost")]}),l.jsx("th",{className:"p-4 text-center",children:"Status"}),l.jsx("th",{className:"p-4 text-center",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-border",children:R.length>0?R.map(q=>l.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-800/50 ${q.status==="disabled"?"opacity-60 bg-gray-50 dark:bg-gray-800/30":""}`,children:[l.jsx("td",{className:"p-4 font-medium text-dark-text dark:text-dark-text-primary",children:q.name}),l.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400 max-w-md truncate",title:q.description,children:q.description}),l.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400 font-mono text-right",children:Number(q.cost).toFixed(2)}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${q.status==="active"?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:q.status==="active"?"Active":"Disabled"})}),l.jsxs("td",{className:"p-4 text-center",children:[l.jsx("button",{onClick:()=>O(q),className:"p-2 text-gray-500 hover:text-brand-blue rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",title:"Edit Procedure",children:l.jsx(Sa,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>c(q.id),className:"p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",title:q.status==="active"?"Disable":"Enable",children:q.status==="active"?"⚪":"🟢"}),A&&l.jsx("button",{onClick:()=>o(q.id),disabled:se(q.id),title:se(q.id)?"Cannot delete: Procedure is used in treatment records.":"Delete Procedure",className:"p-2 text-gray-500 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-500/20 disabled:text-gray-400 disabled:cursor-not-allowed disabled:hover:bg-transparent",children:l.jsx(Gn,{className:"h-5 w-5"})})]})]},q.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center p-8 text-gray-500 dark:text-gray-400",children:"No procedures found."})})})]})}),(b||g)&&l.jsx(KS,{isOpen:b,onClose:()=>{h(!1),p(null)},onSave:j,existingProcedure:g})]})},e3=Xe.memo(JS),t3=()=>{const[n,s]=w.useState(new Date);return w.useEffect(()=>{const r=setInterval(()=>s(new Date),1e3);return()=>clearInterval(r)},[]),l.jsxs("div",{className:"text-right min-w-[110px]",children:[l.jsx("p",{className:"font-mono text-base sm:text-lg font-semibold text-dark-text dark:text-dark-text-primary tracking-wider leading-tight",children:ye(n,"h:mm:ss a")}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-bold leading-tight",children:ye(n,"EEEE, d MMMM, yyyy")})]})},n3=({refreshData:n})=>{const{appSettings:s,setIsMobileSidebarOpen:r,isLoading:o}=Dt(),[c,u]=w.useState(!0),[m,b]=w.useState(0);return w.useEffect(()=>{let h=!1;const g=()=>{h||(window.requestAnimationFrame(()=>{const p=window.scrollY;p<10?u(!0):p>m?u(!1):p<m&&u(!0),b(p),h=!1}),h=!0)};return window.addEventListener("scroll",g,{passive:!0}),()=>window.removeEventListener("scroll",g)},[m]),l.jsx("div",{className:`bg-white dark:bg-dark-card shadow-sm sticky top-0 z-10 border-b border-gray-200 dark:border-dark-border transition-transform duration-300 ${c?"translate-y-0":"-translate-y-full"} overflow-hidden`,style:{willChange:"transform"},children:l.jsxs("div",{className:"flex items-center min-h-20 h-20 px-2 sm:px-4 md:px-8 w-full overflow-hidden",children:[l.jsx("div",{className:"flex-shrink-0 flex items-center justify-start h-full lg:hidden",children:l.jsx("button",{onClick:()=>r(!0),className:"p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Open sidebar",children:l.jsx(ob,{className:"h-6 w-6"})})}),l.jsx("div",{className:"flex-1 min-w-0 flex items-center justify-center h-full",children:l.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-brand-blue to-teal-500 truncate",children:s.appName})}),l.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 sm:gap-4 h-full",children:[l.jsx(t3,{}),l.jsxs("button",{onClick:n,className:`group p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-brand-blue dark:hover:text-blue-400 transition-colors relative ${o?"opacity-60 cursor-not-allowed":""}`,"aria-label":"Refresh data",title:"Refresh Data",disabled:o,children:[l.jsx(mv,{className:`h-6 w-6 sm:h-7 sm:w-7 transition-transform duration-300 ease-in-out group-hover:rotate-180 ${o?"animate-spin":""}`}),o&&l.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"})})]})]})]})})},a3=({isOpen:n,onClose:s,onConfirm:r,title:o,children:c,confirmButtonText:u="Confirm"})=>n?l.jsxs(ut,{isOpen:n,onClose:s,title:"",closeOnBackdropClick:!1,children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-500/20",children:l.jsx(iv,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),l.jsxs("div",{className:"mt-3 text-center sm:mt-5",children:[l.jsx("h3",{className:"text-xl font-semibold leading-6 text-dark-text dark:text-dark-text-primary",id:"modal-title",children:o}),l.jsx("div",{className:"mt-2",children:l.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:c})})]})]}),l.jsxs("div",{className:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3",children:[l.jsx("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600 sm:col-start-2",onClick:r,children:u}),l.jsx("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-gray-700 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 sm:col-start-1 sm:mt-0",onClick:s,children:"Cancel"})]})]}):null,zr=Xe.memo(a3),sr=({icon:n,label:s,onClick:r,colorClasses:o})=>l.jsxs("button",{onClick:c=>{c.preventDefault(),r()},className:`flex flex-col items-center gap-1 text-gray-600 dark:text-gray-300 transition-all duration-200 p-2 rounded-lg transform hover:scale-105 flex-shrink-0 ${o}`,children:[l.jsx(n,{className:"h-7 w-7"}),l.jsx("span",{className:"text-xs font-semibold",children:s})]}),r3=({isSidebarCollapsed:n,onAddPatient:s,onAddAppointment:r,onAddExpense:o,onGenerateSlip:c,onAddTreatment:u,onPrintReport:m,onRecordPayment:b,isFullScreen:h,toggleFullScreen:g})=>{const{currentUser:p}=Dt(),v=x=>p==null?void 0:p.permissions.includes(x);return l.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-40 transition-all duration-300 ${n?"lg:left-20":"lg:left-64"}`,children:l.jsx("div",{className:"bg-white/80 dark:bg-dark-card/80 backdrop-blur-sm border-t border-gray-200 dark:border-dark-border shadow-[0_-10px_15px_-3px_rgb(0_0_0_/_0.05)]",children:l.jsxs("div",{className:"max-w-5xl mx-auto flex justify-start md:justify-around items-center gap-x-6 h-20 px-4 overflow-x-auto scrollbar-hide",children:[v("PATIENTS")&&l.jsx(sr,{icon:av,label:"Add Patient",onClick:()=>s(),colorClasses:"hover:bg-blue-100 dark:hover:bg-blue-500/20 hover:text-blue-600 dark:hover:text-blue-300"}),v("APPOINTMENTS")&&l.jsx(sr,{icon:Yo,label:"Add Appointment",onClick:r,colorClasses:"hover:bg-indigo-100 dark:hover:bg-indigo-500/20 hover:text-indigo-600 dark:hover:text-indigo-300"}),v("PATIENTS")&&l.jsx(sr,{icon:rv,label:"Add Treatment",onClick:u,colorClasses:"hover:bg-green-100 dark:hover:bg-green-500/20 hover:text-green-600 dark:hover:text-green-300"}),v("ACCOUNTING")&&l.jsx(sr,{icon:Fo,label:"Receive Payment",onClick:b,colorClasses:"hover:bg-purple-100 dark:hover:bg-purple-500/20 hover:text-purple-600 dark:hover:text-purple-300"}),v("ACCOUNTING")&&l.jsx(sr,{icon:Fo,label:"Add Expense",onClick:o,colorClasses:"hover:bg-red-100 dark:hover:bg-red-500/20 hover:text-red-600 dark:hover:text-red-300"}),v("QUEUE")&&l.jsx(sr,{icon:Xu,label:"Generate Slip",onClick:c,colorClasses:"hover:bg-purple-100 dark:hover:bg-purple-500/20 hover:text-purple-600 dark:hover:text-purple-300"}),v("PATIENTS")&&l.jsx(sr,{icon:Ur,label:"Print Report",onClick:m,colorClasses:"hover:bg-teal-100 dark:hover:bg-teal-500/20 hover:text-teal-600 dark:hover:text-teal-300"}),l.jsx("div",{className:"hidden lg:flex",children:l.jsx(sr,{icon:h?sv:lv,label:h?"Exit":"Fullscreen",onClick:g,colorClasses:"hover:bg-gray-200 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-gray-200"})})]})})})},l3=({isOpen:n,onClose:s})=>{const{activePatients:r,addPatientToQueueAndShowSlip:o,addWalkInAndShowSlip:c}=Dt(),[u,m]=w.useState("existing"),[b,h]=w.useState(""),[g,p]=w.useState(!1),v=w.useRef(null),[x,N]=w.useState({name:"",phone:"",reason:"",gender:"",email:"",address:"",dob:"",medicalHistory:""}),[D,A]=w.useState(-1),j=w.useRef([]);w.useEffect(()=>{n||(h(""),p(!1),m("existing"),A(-1),N({name:"",phone:"",reason:"",gender:"",email:"",address:"",dob:"",medicalHistory:""}))},[n]),w.useEffect(()=>{const R=_=>{v.current&&!v.current.contains(_.target)&&p(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const O=w.useMemo(()=>{if(b.trim()==="")return[];const R=b.toLowerCase(),_=r.filter($=>$.name.toLowerCase().includes(R)||$.phone.includes(R)||$.id.includes(R));return A(-1),_},[r,b]);w.useEffect(()=>{j.current=j.current.slice(0,O.length)},[O]),w.useEffect(()=>{const R=_=>{!g||O.length===0||(_.key==="ArrowDown"?(_.preventDefault(),A($=>($+1)%O.length)):_.key==="ArrowUp"?(_.preventDefault(),A($=>($-1+O.length)%O.length)):_.key==="Enter"&&(_.preventDefault(),D>=0&&D<O.length&&T(O[D])))};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[g,D,O]),w.useEffect(()=>{var R;D>=0&&j.current[D]&&((R=j.current[D])==null||R.scrollIntoView({block:"nearest"}))},[D]);const T=R=>{o(R),s()},I=R=>{R.preventDefault(),c(x),s()};return l.jsx(ut,{isOpen:n,onClose:s,title:"Generate Queue Slip",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex p-1 space-x-1 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[l.jsx("button",{onClick:()=>m("existing"),className:`w-full px-3 py-1.5 text-sm font-medium leading-5 rounded-lg ${u==="existing"?"bg-white dark:bg-dark-card shadow text-brand-blue":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"Existing Patient"}),l.jsx("button",{onClick:()=>m("new"),className:`w-full px-3 py-1.5 text-sm font-medium leading-5 rounded-lg ${u==="new"?"bg-white dark:bg-dark-card shadow text-brand-blue":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-800"}`,children:"New Patient"})]}),u==="existing"&&l.jsxs("div",{className:"relative",ref:v,children:[l.jsx("label",{htmlFor:"slip-patient-search",className:"sr-only",children:"Search for existing patient"}),l.jsx("input",{id:"slip-patient-search",type:"text",placeholder:"Search patient by name, phone, or ID...",value:b,onChange:R=>h(R.target.value),onFocus:()=>p(!0),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",autoComplete:"off"}),g&&b&&l.jsx("div",{className:"absolute top-full left-0 right-0 z-20 bg-white dark:bg-dark-card border border-gray-300 dark:border-dark-border mt-1 rounded-md shadow-lg max-h-60 overflow-y-auto",children:O.length>0?l.jsx("ul",{role:"listbox",children:O.map((R,_)=>l.jsx("li",{role:"option","aria-selected":D===_,children:l.jsxs("button",{ref:$=>{j.current[_]=$},type:"button",onClick:()=>T(R),onMouseEnter:()=>A(_),className:`w-full text-left px-4 py-3 transition-colors duration-150 ${D===_?"bg-brand-blue text-white":"hover:bg-brand-blue/80 hover:text-white dark:hover:bg-brand-blue"}`,children:[l.jsx("span",{className:"font-medium block",children:R.name}),l.jsxs("div",{className:"flex justify-between text-sm opacity-90",children:[l.jsx("span",{children:R.phone}),l.jsx("span",{className:"font-mono",children:R.id})]})]})},R.id))}):l.jsx("p",{className:"p-4 text-sm text-center text-gray-500 dark:text-gray-400",children:"No matching patients found."})})]}),u==="new"&&l.jsxs("form",{onSubmit:I,className:"space-y-3 pt-2",children:[l.jsx("input",{type:"text",placeholder:"Full Name *",value:x.name,onChange:R=>N({...x,name:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsx("input",{type:"date",placeholder:"Date of Birth *",value:x.dob,onChange:R=>N({...x,dob:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none text-gray-500",required:!0}),l.jsx("input",{type:"tel",placeholder:"Phone Number *",value:x.phone,onChange:R=>N({...x,phone:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsx("input",{type:"email",placeholder:"Email Address",value:x.email,onChange:R=>N({...x,email:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"}),l.jsxs("select",{value:x.gender,onChange:R=>N({...x,gender:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"",children:"Select Gender..."}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"})]}),l.jsx("textarea",{placeholder:"Address",value:x.address,onChange:R=>N({...x,address:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2}),l.jsx("textarea",{placeholder:"Medical History (allergies, conditions, etc.)",value:x.medicalHistory,onChange:R=>N({...x,medicalHistory:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2}),l.jsx("textarea",{placeholder:"Reason for Visit *",value:x.reason,onChange:R=>N({...x,reason:R.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2,required:!0}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white p-3 rounded-lg hover:bg-brand-blue-dark font-semibold",children:"Add & Generate Slip"})]})]})})},rb=({isOpen:n,onClose:s,onSelect:r,patients:o,title:c,initialList:u=[]})=>{const[m,b]=w.useState(""),[h,g]=w.useState(-1),p=w.useRef(null),v=w.useRef([]),x=w.useMemo(()=>{if(!m)return[];const A=m.toLowerCase();return o.filter(j=>j.name.toLowerCase().includes(A)||j.phone.includes(A)||j.id.includes(A))},[m,o]),N=m?x:u;w.useEffect(()=>{v.current=v.current.slice(0,N.length)},[N]),w.useEffect(()=>{n||(b(""),g(-1))},[n]),w.useEffect(()=>{const A=j=>{!n||N.length===0||(j.key==="ArrowDown"?(j.preventDefault(),g(O=>(O+1)%N.length)):j.key==="ArrowUp"?(j.preventDefault(),g(O=>(O-1+N.length)%N.length)):j.key==="Enter"&&(j.preventDefault(),h>=0&&h<N.length&&D(N[h])))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[n,h,N]),w.useEffect(()=>{var A;h>=0&&v.current[h]&&((A=v.current[h])==null||A.scrollIntoView({behavior:"smooth",block:"nearest"}))},[h]);const D=A=>{b(""),g(-1),r(A)};return l.jsx(ut,{isOpen:n,onClose:s,title:c,children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",value:m,onChange:A=>{b(A.target.value),g(-1)},placeholder:"Search by name, phone, or ID...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue"}),l.jsxs("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:[!m&&u.length>0&&l.jsx("h4",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 px-1 pt-2",children:"Recent Patients"}),N.length>0?l.jsx("ul",{ref:p,children:N.map((A,j)=>l.jsx("li",{children:l.jsxs("button",{ref:O=>{v.current[j]=O},onClick:()=>D(A),onMouseEnter:()=>g(j),className:`w-full text-left p-3 my-1 rounded-lg transition-colors duration-150 ${h===j?"bg-brand-blue text-white":"bg-gray-50 dark:bg-gray-800/60 hover:bg-brand-blue/80 hover:text-white"}`,children:[l.jsx("p",{className:"font-semibold",children:A.name}),l.jsxs("p",{className:`text-sm ${h===j?"text-blue-200":"text-gray-500 dark:text-gray-400"}`,children:[A.phone," - ID: ",A.id]})]})},A.id))}):m?l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No patients found."}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Start typing to search for a patient."})]})]})})},s3=({isOpen:n,onClose:s,onSave:r,existingPatient:o,closeOnBackdropClick:c=!0})=>{var g;console.log("PatientFormModal existingPatient:",o,"isOpen:",n);const u={name:"",dob:"",phone:"",email:"",address:"",gender:"",medicalHistory:""},[m,b]=w.useState(o?{...o,phone:(g=o.phone)!=null&&g.startsWith("+92")?o.phone.slice(3):o.phone}:u);w.useEffect(()=>{var p;b(o?{...o,phone:(p=o.phone)!=null&&p.startsWith("+92")?o.phone.slice(3):o.phone}:u)},[o,n]);const h=p=>{p.preventDefault();const v=m.phone.startsWith("+92")?m.phone:"+92"+m.phone;r({...m,phone:v})};return l.jsx(ut,{isOpen:n,onClose:s,title:o?"Edit Patient":"Add New Patient",closeOnBackdropClick:c,children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx("input",{type:"text",placeholder:"Full Name",value:m.name,onChange:p=>b({...m,name:p.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsx("input",{type:"date",placeholder:"Date of Birth",value:m.dob,onChange:p=>b({...m,dob:p.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsx(ic,{value:typeof m.phone=="string"&&m.phone.startsWith("+92")?m.phone.slice(3):m.phone||"",onChange:p=>b({...m,phone:p}),required:!0,label:void 0}),l.jsx("input",{type:"email",placeholder:"Email Address",value:m.email,onChange:p=>b({...m,email:p.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none"}),l.jsxs("select",{value:m.gender,onChange:p=>b({...m,gender:p.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"",children:"Select Gender..."}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"})]}),l.jsx("textarea",{placeholder:"Address",value:m.address,onChange:p=>b({...m,address:p.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:2}),l.jsx("textarea",{placeholder:"Medical History",value:m.medicalHistory,onChange:p=>b({...m,medicalHistory:p.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",rows:3}),l.jsxs("div",{className:"flex gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark",children:"Save Patient"})]})]})})},i3=({isOpen:n,onClose:s,onSubmit:r,existingAppointment:o,defaultDate:c,initialPatient:u,closeOnBackdropClick:m=!0})=>{const{patients:b,appointments:h,addPatientFromMinimalForm:g,appSettings:p}=Dt(),{showNotification:v}=Yr(),x={patientId:"",date:c||ye(new Date,"yyyy-MM-dd"),time:"",reason:""},N={name:"",phone:"",email:"",gender:""},[D,A]=w.useState(x),[j,O]=w.useState(""),[T,I]=w.useState(!1),[R,_]=w.useState(N),[$,se]=w.useState(!1),q=w.useRef(null);w.useEffect(()=>{const E=W=>{q.current&&!q.current.contains(W.target)&&se(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const ie=w.useMemo(()=>{if(!D.date)return[];const E=new Set(h.filter(B=>B.date===D.date&&B.status==="Scheduled"&&B.id!==(o==null?void 0:o.id)).map(B=>B.time)),W=[],{clinicStartTime:ce,clinicEndTime:pe}=p;if(!ce||!pe)return[];let S=ln(ce,"HH:mm",new Date);const F=ln(pe,"HH:mm",new Date);for(;S<F;)W.push(ye(S,"HH:mm")),S.setMinutes(S.getMinutes()+30);return W.map(B=>({time:B,isBooked:E.has(B)}))},[D.date,h,o,p]),ue=w.useMemo(()=>{if(!j)return[];const E=j.toLowerCase();return b.filter(W=>W.name.toLowerCase().includes(E)||W.phone.includes(E))},[j,b]),K=()=>{A(x),O(""),I(!1),_(N)};w.useEffect(()=>{if(n)if(o){A({patientId:o.patientId,date:o.date,time:o.time,reason:o.reason});const E=b.find(W=>W.id===o.patientId);O((E==null?void 0:E.name)||"")}else u?(A(E=>({...E,patientId:u.id,date:c||ye(new Date,"yyyy-MM-dd")})),O(u.name)):A({...x,date:c||ye(new Date,"yyyy-MM-dd")});else K()},[o,c,n,b,u]),w.useEffect(()=>{if(n&&!o){const E=ie.find(ce=>!ce.isBooked);ie.some(ce=>ce.time===D.time&&!ce.isBooked)||A(ce=>({...ce,time:(E==null?void 0:E.time)||""}))}},[n,ie,D.date,o]),w.useEffect(()=>{n&&T&&R.phone.startsWith("+92")&&_(E=>({...E,phone:E.phone.slice(3)}))},[n,T]);const me=E=>{A(W=>({...W,patientId:E.id})),O(E.name),se(!1)},Me=()=>{I(!0),se(!1),A(E=>({...E,patientId:""}))},Z=async E=>{E.preventDefault();let W=D.patientId,ce;if(T){const pe=R.phone.startsWith("+92")?R.phone:"+92"+R.phone,S=await g({...R,phone:pe});if(!S)return;W=S.id,ce=S.name}if(!W||!D.date||!D.time||!D.reason){v("Please select a patient and fill out all appointment details.","error");return}r({...D,patientId:W,patientName:ce})},Ae=o?"Reschedule Appointment":"Add New Appointment";return l.jsx(ut,{isOpen:n,onClose:s,title:Ae,closeOnBackdropClick:m,children:l.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"patientId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Patient"}),T?l.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/20 rounded-lg mt-1",children:[l.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"New Patient Details"}),l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-2",children:[l.jsx("input",{type:"text",placeholder:"Full Name*",value:R.name,onChange:E=>_(W=>({...W,name:E.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0}),l.jsx(ic,{value:R.phone.startsWith("+92")?R.phone.slice(3):R.phone,onChange:E=>_(W=>({...W,phone:E})),required:!0,label:"Phone Number*"}),l.jsx("input",{type:"email",placeholder:"Email",value:R.email,onChange:E=>_(W=>({...W,email:E.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 col-span-2"}),l.jsx("div",{className:"col-span-2",children:l.jsxs("select",{value:R.gender,onChange:E=>_(W=>({...W,gender:E.target.value})),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",children:[l.jsx("option",{value:"",children:"Select Gender..."}),l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"Other",children:"Other"})]})})]}),l.jsx("button",{type:"button",onClick:()=>I(!1),className:"text-xs text-gray-600 dark:text-gray-400 hover:underline mt-2",children:"← Back to search"})]}):l.jsxs("div",{className:"relative mt-1",ref:q,children:[l.jsx("input",{type:"text",value:j,onChange:E=>O(E.target.value),onFocus:()=>se(!0),placeholder:"Search by name or phone...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!D.patientId,disabled:!!o||!!u,autoComplete:"off"}),$&&!o&&!u&&l.jsxs("div",{className:"absolute top-full left-0 right-0 z-20 bg-white dark:bg-dark-card border border-gray-300 dark:border-dark-border mt-1 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[l.jsx("button",{type:"button",onClick:Me,className:"w-full text-left px-4 py-2 font-bold text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-500/20",children:"+ Add New Patient"}),l.jsx("ul",{role:"listbox",children:ue.map(E=>l.jsx("li",{role:"option","aria-selected":D.patientId===E.id,children:l.jsxs("button",{type:"button",onClick:()=>me(E),className:"w-full text-left px-4 py-2 hover:bg-brand-blue hover:text-white dark:hover:bg-brand-blue dark:text-white",children:[l.jsx("span",{className:"font-medium block",children:E.name}),l.jsx("span",{className:"text-sm opacity-90 block",children:sc(E.phone)})]})},E.id))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),l.jsx("input",{type:"date",id:"date",name:"date",value:D.date,min:ye(new Date,"yyyy-MM-dd"),onChange:E=>A(W=>({...W,date:E.target.value})),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Time"}),l.jsx("select",{id:"time",name:"time",value:D.time,onChange:E=>A(W=>({...W,time:E.target.value})),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0,children:ie.length>0?ie.map(E=>l.jsxs("option",{value:E.time,disabled:E.isBooked,className:E.isBooked?"text-gray-400 bg-gray-100 dark:bg-gray-700":"text-black dark:text-white",children:[ye(new Date(`1970-01-01T${E.time}:00`),"p")," ",E.isBooked?"(Booked)":""]},E.time)):l.jsx("option",{value:"",disabled:!0,children:"No slots available"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Reason for Visit"}),l.jsx("input",{type:"text",id:"reason",name:"reason",placeholder:"e.g., Routine Check-up, Toothache",value:D.reason,onChange:E=>A(W=>({...W,reason:E.target.value})),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue focus:outline-none",required:!0})]}),l.jsxs("div",{className:"flex gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2.5 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:!D.time||!D.patientId&&!T,className:"w-full bg-brand-blue text-white px-4 py-2.5 rounded-lg hover:bg-brand-blue-dark font-semibold disabled:bg-gray-400 dark:disabled:bg-gray-600",children:o?"Save Changes":"Schedule Appointment"})]})]})})},o3=({isOpen:n,onClose:s,onSave:r,transactionType:o,existingTransaction:c})=>{const{showNotification:u}=Yr(),[m,b]=w.useState(""),[h,g]=w.useState(""),p=!!c,v=`${p?"Edit":"Add"} Manual ${o==="income"?"Income":"Expense"}`;w.useEffect(()=>{n&&(p?(b(c.description),g(String(c.amount))):(b(""),g("")))},[n,c,p]);const x=N=>{N.preventDefault();const D=parseFloat(h);if(!m.trim()||isNaN(D)||D<=0){u("Please enter a valid description and amount.","error");return}r({id:c==null?void 0:c.id,description:m,amount:D,type:o})};return l.jsx(ut,{isOpen:n,onClose:s,title:v,children:l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),l.jsx("input",{type:"text",id:"description",value:m,onChange:N=>b(N.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount (PKR)"}),l.jsx("input",{type:"number",id:"amount",value:h,onChange:N=>g(N.target.value),min:"0.01",step:"0.01",className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2.5 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2.5 rounded-lg hover:bg-brand-blue-dark font-semibold",children:p?"Save Changes":`Add ${o==="income"?"Income":"Expense"}`})]})]})})},c3=()=>l.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 backdrop-blur-sm z-[9999] flex justify-center items-center","aria-live":"assertive","aria-label":"Loading",children:l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"})}),d3=({isOpen:n,onClose:s,patient:r})=>{const{recordPatientPayment:o,refreshData:c,treatments:u,openDayBook:m,logActivity:b,currentUser:h}=Dt(),{showNotification:g}=Yr(),[p,v]=w.useState(""),[x,N]=w.useState(""),[D,A]=w.useState({}),[j,O]=w.useState({}),T=r&&u?u.filter($=>$.patientId===r.id&&$.finalAmount>$.paidAmount).sort(($,se)=>new Date($.date).getTime()-new Date(se.date).getTime()):[];w.useEffect(()=>{n&&(v(""),N(`Payment from ${(r==null?void 0:r.name)||""}`),A({}),O({}))},[n,r]),w.useEffect(()=>{if(!p||isNaN(Number(p))||Number(p)<=0||T.length===0){A({});return}let $=Number(p);const se={};for(const q of T){if(j[q.id]){se[q.id]=D[q.id]||0;continue}const ie=Number(q.finalAmount)-Number(q.paidAmount);$<=0?se[q.id]=0:$>=ie?(se[q.id]=ie,$-=ie):(se[q.id]=$,$=0)}A(se)},[p,T.map($=>$.id).join(","),n]);const I=($,se)=>{const q=Number(se);A(ie=>({...ie,[$]:isNaN(q)?0:q})),O(ie=>({...ie,[$]:!0}))},R=($,se)=>{const q=Number($.paidAmount)+(Number(se)||0);return q>=$.finalAmount?"Paid":q>0?"Partially Paid":"Unpaid"},_=async $=>{if($.preventDefault(),!r)return;if(!m){g("You must open the daybook to receive payments.","error");return}const se=Object.entries(D).filter(([ue,K])=>Number(K)>0).map(([ue,K])=>({treatmentId:ue,amount:Number(K)})),q=se.reduce((ue,K)=>ue+K.amount,0);T.reduce((ue,K)=>ue+(Number(K.finalAmount)-Number(K.paidAmount)),0);const ie=Number(p)-q;if(se.length===0&&(!p||Number(p)<=0)){g("Please allocate payment to at least one treatment or enter an advance.","error");return}try{const ue=await fetch("/api.php?entity=allocate_payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({allocations:se,patientId:r.id,description:x,amount:Number(p),dayBookDate:m==null?void 0:m.date,userId:h==null?void 0:h.id})}),K=await ue.json();if(!ue.ok)throw new Error(K.error||"Failed to allocate payment");await c();let me=`Received payment of PKR ${Number(p).toFixed(2)} for ${r.name}.`;se.length>0&&(me+=" Allocated: "+se.map(Me=>`Treatment #${Me.treatmentId}: PKR ${Me.amount.toFixed(2)}`).join(", ")),ie>0&&(me+=` Advance: PKR ${ie.toFixed(2)}`),await b("create","transaction",me),g("Payment received and allocated successfully.","success"),s()}catch(ue){g(ue.message||"Failed to allocate payment","error")}};return r?l.jsxs(ut,{isOpen:n,onClose:s,title:`Receive Payment for ${(r==null?void 0:r.name)||""}`,closeOnBackdropClick:!1,children:[!m&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-center font-semibold",children:"You must open the daybook to receive payments."}),l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"payment-amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount (PKR)"}),l.jsx("input",{type:"number",id:"payment-amount",value:p,onChange:$=>{v($.target.value),O({})},className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",min:"0.01",step:"0.01",required:!0,autoFocus:!0,disabled:!m})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"payment-description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description / Notes"}),l.jsx("input",{type:"text",id:"payment-description",value:x,onChange:$=>N($.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0,disabled:!m})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{type:"button",onClick:s,className:"w-full bg-gray-200 text-gray-700 p-2.5 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark font-semibold",disabled:!m,children:"Receive Payment"})]})]}),r&&T.length>0&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h4",{className:"font-semibold mb-2 text-dark-text dark:text-dark-text-primary",children:"Pending Treatments"}),l.jsxs("table",{className:"w-full text-sm mb-2",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 text-left",children:"Date"}),l.jsx("th",{className:"p-2 text-right",children:"Amount Due"}),l.jsx("th",{className:"p-2 text-center",children:"Allocate"}),l.jsx("th",{className:"p-2 text-center",children:"Status"})]})}),l.jsx("tbody",{children:T.map(($,se)=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2",children:new Date($.date).toLocaleDateString()}),l.jsxs("td",{className:"p-2 text-right",children:["PKR ",($.finalAmount-$.paidAmount).toFixed(2)]}),l.jsx("td",{className:"p-2 text-center",children:l.jsx("input",{type:"number",min:0,max:$.finalAmount-$.paidAmount,value:D[$.id]||"",onChange:q=>I($.id,q.target.value),className:"w-20 p-1 border border-gray-300 rounded-md text-right",disabled:!m})}),l.jsx("td",{className:"p-2 text-center",children:R($,D[$.id])})]},$.id))})]}),Number(p)>0&&Number(p)>T.reduce(($,se)=>$+(Number(se.finalAmount)-Number(se.paidAmount)),0)&&l.jsxs("div",{className:"mt-2 text-green-700 font-semibold text-center",children:["Advance: PKR ",(Number(p)-T.reduce(($,se)=>$+(Number(se.finalAmount)-Number(se.paidAmount)),0)).toFixed(2)]}),l.jsx("div",{className:"text-xs text-gray-500",children:"Allocate the received amount to pending treatments. Status will update automatically."})]}),r&&T.length===0&&Number(p)>0&&l.jsxs("div",{className:"mt-6 text-green-700 font-semibold text-center",children:["Advance: PKR ",Number(p).toFixed(2)]})]}):null},u3=({isOpen:n,onClose:s,onSelectPatient:r})=>{const{patients:o}=Dt(),[c,u]=w.useState(""),m=w.useRef(null);w.useEffect(()=>{n&&(setTimeout(()=>{var g;return(g=m.current)==null?void 0:g.focus()},100),u(""))},[n]);const b=w.useMemo(()=>{if(!c)return[];const g=c.toLowerCase();return o.filter(p=>p.name.toLowerCase().includes(g)||p.phone.includes(g)||p.id.toString().includes(g))},[c,o]),h=g=>{r(g)};return l.jsx(ut,{isOpen:n,onClose:s,title:"Receive Payment",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{ref:m,type:"text",value:c,onChange:g=>u(g.target.value),placeholder:"Search by name, phone, or ID...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 focus:ring-2 focus:ring-brand-blue"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:b.length>0?l.jsx("ul",{children:b.map(g=>l.jsx("li",{children:l.jsx("button",{onClick:()=>h(g),className:"w-full text-left p-3 my-1 rounded-lg transition-colors duration-150 bg-gray-50 dark:bg-gray-800/60 hover:bg-brand-blue/80 hover:text-white",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:g.name}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[g.phone," - ID: ",g.id]})]}),l.jsxs("div",{className:`font-semibold text-right ${(g.balance||0)>0?"text-red-500":"text-green-500"}`,children:[l.jsx("p",{children:"Balance"}),l.jsxs("p",{children:["PKR ",Number(g.balance||0).toFixed(2)]})]})]})})},g.id))}):c?l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No patients found."}):l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Start typing to search for a patient."})})]})})},Gp=w.createContext(void 0),Dt=()=>{const n=w.useContext(Gp);if(!n)throw new Error("useAppContext must be used within an AppProvider");return n},f3=({onSubmit:n,initialBalance:s})=>{const[r,o]=w.useState("");w.useEffect(()=>{o(String(s))},[s]);const c=u=>{u.preventDefault();const m=parseFloat(r)||0;n(m)};return l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You must start the day book before recording any financial transactions."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"global-opening-balance",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Opening Balance (PKR)"}),l.jsx("input",{id:"global-opening-balance",type:"number",step:"0.01",value:r,onChange:u=>o(u.target.value),className:"mt-1 w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",required:!0,autoFocus:!0})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark font-semibold",children:"Start Day"})]})},m3=()=>{const[n,s]=w.useState(null),[r,o]=w.useState("DASHBOARD"),[c,u]=w.useState(!1),[m,b]=w.useState(!1),[h,g]=w.useState(ph),[p,v]=w.useState([]),[x,N]=w.useState([]),[D,A]=w.useState([]),[j,O]=w.useState([]),[T,I]=w.useState([]),[R,_]=w.useState([]),[$,se]=w.useState([]),[q,ie]=w.useState([]),[ue,K]=w.useState([]),[me,Me]=w.useState({date:ye(new Date,"yyyy-MM-dd"),queue:[],lastAssignedNumber:0}),{showNotification:Z}=Yr(),[Ae,E]=w.useState(!1),[W,ce]=w.useState({show:!1,targetView:null}),[pe,S]=w.useState(!!document.fullscreenElement),[F,B]=w.useState(!1),[X,te]=w.useState(null),[Te,we]=w.useState(null),[oe,xe]=w.useState(!1),[_e,$e]=w.useState({}),[qe,Ye]=w.useState(!1),[ae,be]=w.useState(null),[Se,lt]=w.useState(null),[ge,tt]=w.useState({isOpen:!1,type:"expense"}),[tn,ne]=w.useState(null),[le,ve]=w.useState(!1),[Y,Ee]=w.useState(null),[Be,We]=w.useState(null),[it,un]=w.useState(null),[vt,Ql]=w.useState(null),[ur,Xl]=w.useState(null),[fr,Yn]=w.useState(null),[Mn,Ca]=w.useState(null),[mr,gr]=w.useState(!1),[fn,Aa]=w.useState(null),[hr,pn]=w.useState(!1),[hc,Fr]=w.useState(!1),[yi,br]=w.useState(!1),[Zl,Vr]=w.useState(!1),[vi,En]=w.useState(null),[zt,Ut]=w.useState(null),[Ot,Fn]=w.useState(null),Ta=w.useRef(!1),Wl=w.useMemo(()=>x.filter(C=>!C.isDeleted),[x]),wi=w.useMemo(()=>D.filter(C=>C.status==="active"),[D]),pr=w.useMemo(()=>j.filter(C=>C.status==="active"),[j]),Kl=!!ae||!!Se,ea=w.useMemo(()=>ae||Se&&x.find(C=>C.id===Se.patientId)||null,[ae,Se,x]),ta=w.useMemo(()=>[...$].sort((L,z)=>new Date(z.date).getTime()-new Date(L.date).getTime()).map(L=>L.patientId).filter((L,z,de)=>de.indexOf(L)===z).slice(0,10).map(L=>x.find(z=>z.id===L)).filter(L=>!!L),[$,x]),bt=w.useMemo(()=>q.find(C=>C.status==="open"),[q]),Ma=w.useMemo(()=>{const C=h.navOrder||ql.map(z=>z.view),L=new Map(ql.map(z=>[z.view,z]));return C.map(z=>L.get(z)).filter(z=>!!z)},[h.navOrder]);w.useEffect(()=>{document.title=h.appName,document.documentElement.classList.toggle("dark",h.nightMode)},[h]),w.useEffect(()=>{(async()=>{B(!0),te(null);try{const L=ye(new Date,"yyyy-MM-dd"),z=localStorage.getItem("lastQueueResetDate");if(h.autoResetQueue&&z!==L){Z("Queue is being reset for the new day...","info");try{await fetch("/api.php?entity=queue&reset=1",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`userId=${encodeURIComponent((n==null?void 0:n.id)||"")}`}),localStorage.setItem("lastQueueResetDate",L),Z("Queue has been reset for today.","success")}catch{Z("Failed to auto-reset queue for today.","error")}}const[de,fe,De,je,Re,ot,It,Rt,Ue,kt]=await Promise.all([ke.getPatients(),ke.getDoctors(),ke.getProcedures(),ke.getAppointments(),ke.getTransactions(),ke.getTreatments(),ke.getUsers(),ke.getDaybooks(),ke.getActivityLogs(),ke.getQueue()]);N(de.map(Ie=>({...Ie,balance:Number(Ie.balance)||0}))),A(fe.map(Ie=>({...Ie,contactNumbers:Array.isArray(Ie.contactNumbers)?Ie.contactNumbers:typeof Ie.contactNumbers=="string"?(()=>{try{const Qn=JSON.parse(Ie.contactNumbers);return Array.isArray(Qn)?Qn:[Ie.contactNumbers]}catch{return[Ie.contactNumbers]}})():Ie.contactNumbers?[Ie.contactNumbers]:[],timings:typeof Ie.timings=="string"?(()=>{try{return JSON.parse(Ie.timings)}catch{return{}}})():Ie.timings}))),O(De),I(je),_(Re.map(Ie=>({...Ie,amount:Number(Ie.amount)}))),se(ot.map(Ie=>({...Ie,procedures:Array.isArray(Ie.procedures)?Ie.procedures:typeof Ie.procedures=="string"?JSON.parse(Ie.procedures||"[]"):[]}))),v(It),ie(Rt),K(Ue.sort((Ie,Qn)=>new Date(Qn.date).getTime()-new Date(Ie.date).getTime())),Me({date:L,queue:kt.map(Ie=>({patient:de.find(Qn=>Qn.id===Ie.patientId)||{id:Ie.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:Ie.queueNumber,status:Ie.status})),lastAssignedNumber:kt.reduce((Ie,Qn)=>Math.max(Ie,Qn.queueNumber),0)})}catch(L){te(L.message||"Failed to load data")}finally{B(!1)}})()},[]),w.useEffect(()=>{let C=!0;const L=async()=>{try{const de=await ke.getActivityLogs();C&&K(de.sort((fe,De)=>new Date(De.date).getTime()-new Date(fe.date).getTime()))}catch{}};L();const z=setInterval(L,5e3);return()=>{C=!1,clearInterval(z)}},[]),w.useEffect(()=>{const C=new Date,L=new Date(C);L.setHours(24,0,0,0);const z=L.getTime()-C.getTime(),de=setTimeout(async()=>{try{await ke.resetQueue();const fe=await ke.getQueue();Me({date:ye(new Date,"yyyy-MM-dd"),queue:fe.map(De=>({patient:x.find(je=>je.id===De.patientId)||{id:De.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:De.queueNumber,status:De.status})),lastAssignedNumber:fe.reduce((De,je)=>Math.max(De,je.queueNumber),0)})}catch{}},z);return()=>clearTimeout(de)},[x]),w.useEffect(()=>{const C=()=>S(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",C),()=>document.removeEventListener("fullscreenchange",C)},[]),w.useEffect(()=>{bt&&fn&&(fn.type==="treatment"?Jr(fn.data.patientId,fn.data.formData,!0):fn.type==="manual_transaction"?as(fn.data,!0):fn.type==="patient_payment"&&nl(fn.data.patientId,fn.data.amount,fn.data.description,!0),Aa(null),gr(!1))},[bt,fn]);const Oe=w.useCallback(async(C,L,z)=>{const de={id:`log-${Date.now()}`,date:new Date().toISOString(),userId:n==null?void 0:n.id,type:C,entity:L,description:z};K(fe=>[de,...fe].sort((je,Re)=>new Date(Re.date).getTime()-new Date(je.date).getTime()));try{await ke.addActivityLog({userId:n==null?void 0:n.id,type:C,entity:L,description:z})}catch{}},[n,K]),Ni=w.useCallback(()=>{u(C=>!C)},[]),ki=w.useCallback(C=>{s(C),o("DASHBOARD")},[s]),ca=w.useCallback(()=>s(null),[s]),Ea=w.useCallback(C=>{if(r==="SETTINGS"&&Ae&&C!=="SETTINGS"){ce({show:!0,targetView:C});return}o(C),E(!1)},[r,Ae]),bc=()=>{W.targetView&&(E(!1),o(W.targetView)),ce({show:!1,targetView:null})},ji=()=>ce({show:!1,targetView:null}),Si=w.useCallback(()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(C=>{Z(`Error enabling full-screen: ${C.message}`,"error")})},[Z]),Jl=w.useCallback(async(C,L)=>{var je;const z=ye(new Date,"yyyy-MM-dd"),fe=(await ke.getQueue(z)).find(Re=>Re.patientId==C.id&&Re.date===z&&Re.status!=="Completed"&&Re.status!=="Cancelled");if(fe)return fe.queueNumber;const De=L==="Surgery 1"?"In Surgery 1":L==="Surgery 2"?"In Surgery 2":"Waiting";try{const Re=await ke.addQueueEntry({patientId:C.id,status:De,date:z});if(Re&&Re.existing)return Fn({patient:C,queueEntry:Re.existing}),Re.existing.queueNumber;const ot=await ke.getQueue(z);return Me({date:z,queue:ot.map(It=>({patient:x.find(Rt=>Rt.id==It.patientId)||{id:It.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:It.queueNumber,status:It.status})),lastAssignedNumber:ot.reduce((It,Rt)=>Math.max(It,Rt.queueNumber),0)}),Re.queueNumber||((je=ot[ot.length-1])==null?void 0:je.queueNumber)}catch(Re){throw Z(Re.message||"Failed to add to queue","error"),Re}},[x,Me]),Qr=w.useCallback(async C=>{const L=ye(new Date,"yyyy-MM-dd"),de=(await ke.getQueue(L)).find(fe=>fe.patientId==C.id&&fe.date===L&&fe.status!=="Completed"&&fe.status!=="Cancelled");if(de){Yn({patient:C,queueNumber:de.queueNumber}),pn(!0);return}try{const fe=await ke.addQueueEntry({patientId:C.id,status:"Waiting",date:L});if(fe&&fe.existing){Fn({patient:C,queueEntry:fe.existing});return}const je=(await ke.getQueue(L)).find(Re=>Re.patientId==C.id&&Re.date===L);Yn({patient:C,queueNumber:(je==null?void 0:je.queueNumber)||(fe.queueNumber??1)}),pn(!0)}catch(fe){Z(fe.message||"Failed to add to queue","error")}},[x,Me]),Xr=C=>{Ca(C)},xn=(C,L)=>{B(!0),ke.cancelAppointment(parseInt(C,10),L).then(()=>{var de,fe;I(De=>De.map(je=>je.id===C?{...je,status:"Cancelled",cancellationReason:L,cancellationDate:ye(new Date,"yyyy-MM-dd")}:je));const z=ye(new Date,"yyyy-MM-dd");((de=T.find(De=>De.id===C))==null?void 0:de.date)===z&&Me(De=>({...De,queue:De.queue.map(je=>{var Re;return je.patient.id===((Re=T.find(ot=>ot.id===C))==null?void 0:Re.patientId)?{...je,status:"Cancelled"}:je})})),Oe("delete","appointment",`Cancelled appointment for ${(fe=T.find(De=>De.id===C))==null?void 0:fe.patientName}. Reason: ${L}`)}).catch(z=>{Z(`Failed to cancel appointment: ${z.message}`,"error")}).finally(()=>B(!1))},Zr=w.useCallback(async(C,L)=>{const z=ye(new Date,"yyyy-MM-dd"),fe=(await ke.getQueue(z)).find(De=>De.patientId==C&&De.date===z&&De.status!=="Completed"&&De.status!=="Cancelled");if(fe){await ke.updateQueueEntry(fe.id,{...fe,status:"Cancelled"});const De=await ke.getQueue(z);Me({date:z,queue:De.map(Re=>({patient:x.find(ot=>ot.id==Re.patientId)||{id:Re.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:Re.queueNumber,status:Re.status})),lastAssignedNumber:De.reduce((Re,ot)=>Math.max(Re,ot.queueNumber),0)});const je=x.find(Re=>Re.id===C);je&&Oe("delete","appointment",`Cancelled walk-in visit for ${je.name}. Reason: ${L}`),Z("Patient visit has been cancelled.","info")}else{const De=T.find(je=>je.patientId===C&&je.date===z&&je.status==="Scheduled");De&&xn(De.id,L)}Ca(null)},[x,Me,Oe,Z,T,xn]),Di=w.useCallback(async(C,L)=>{const z=ye(new Date,"yyyy-MM-dd"),fe=(await ke.getQueue(z)).find(De=>De.patientId==C&&De.date===z&&De.status!=="Completed"&&De.status!=="Cancelled");if(fe){await ke.updateQueueEntry(fe.id,{...fe,status:L});const De=await ke.getQueue(z);Me({date:z,queue:De.map(je=>({patient:x.find(Re=>Re.id==je.patientId)||{id:je.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:je.queueNumber,status:je.status})),lastAssignedNumber:De.reduce((je,Re)=>Math.max(je,Re.queueNumber),0)})}},[x,Me]),yn=w.useCallback(async C=>{B(!0);try{const L=await ke.addPatient(C),z={...C,id:L.id,createdAt:new Date().toISOString(),balance:0};return N(de=>[...de,z]),Oe("create","patient",`Created patient record for ${z.name} (ID: ${z.id}).`),z}finally{B(!1)}},[]),Wr=w.useCallback(async C=>{B(!0);try{await ke.updatePatient(parseInt(C.id,10),C),N(L=>L.map(z=>z.id===C.id?C:z)),Oe("edit","patient",`Updated patient record for ${C.name} (ID: ${C.id}).`)}finally{B(!1)}},[]),es=C=>Ee(C),pc=async()=>{var C,L;if(Y){B(!0);try{await ke.deletePatient(parseInt(Y,10)),N(z=>z.map(de=>de.id===Y?{...de,isDeleted:!0,deletedAt:new Date().toISOString()}:de)),Z(`Patient ${((C=x.find(z=>z.id===Y))==null?void 0:C.name)||""} has been archived.`,"info"),Oe("delete","patient",`Archived patient record for ${((L=x.find(z=>z.id===Y))==null?void 0:L.name)||""} (ID: ${Y}).`)}finally{Ee(null),B(!1)}}},Ci=w.useCallback(async C=>{if(!C.name||!C.phone)return Z("Patient name and phone are required.","error"),null;if(x.some(L=>L.phone===C.phone))return Z("A patient with this phone number already exists.","error"),null;B(!0);try{const L=await yn({...C,dob:"",address:"",medicalHistory:""});return Z(`New patient "${L.name}" added successfully.`,"success"),L}finally{B(!1)}},[yn,Z,x]),sn=w.useCallback(async C=>{let z=x.find(fe=>fe.phone===C.phone);z||(z=await yn({...C}));const de=await Jl(z,C.surgery);return{patient:z,queueNumber:de}},[yn,Jl]),Ai=async C=>{const{patient:L,queueNumber:z}=await sn(C);Yn({patient:L,queueNumber:z})},Kr=w.useCallback(async C=>{var L;B(!0);try{const z=((L=x.find(De=>De.id===C.patientId))==null?void 0:L.name)||C.patientName||"Unknown",fe={id:(await ke.addAppointment({...C,patientName:z,status:"Scheduled"})).id,patientId:C.patientId,patientName:z,date:C.date,time:C.time,reason:C.reason,status:"Scheduled",createdAt:new Date().toISOString()};return I(De=>[...De,fe]),Z(`Appointment scheduled for ${z}.`,"success"),Oe("create","appointment",`Scheduled appointment for ${z} on ${ye(new Date(C.date),"dd MMM, yyyy")}.`),fe}catch(z){throw Z(`Failed to schedule appointment: ${z.message}`,"error"),z}finally{B(!1)}},[x,I,Z,Oe]),xr=(C,L,z)=>{B(!0),ke.updateAppointment(parseInt(C,10),{date:L,time:z}).then(()=>{var de,fe,De;I(je=>je.map(Re=>Re.id===C?{...Re,date:L,time:z,updatedAt:new Date().toISOString()}:Re)),Oe("edit","appointment",`Rescheduled appointment for ${((de=x.find(je=>{var Re;return je.id===((Re=T.find(ot=>ot.id===C))==null?void 0:Re.patientId)}))==null?void 0:de.name)||""} from ${ye(new Date(((fe=T.find(je=>je.id===C))==null?void 0:fe.date)||""),"dd MMM")} @ ${((De=T.find(je=>je.id===C))==null?void 0:De.time)||""} to ${ye(new Date(L),"dd MMM")} @ ${z}.`),Z("Appointment rescheduled.","success")}).catch(de=>{Z(`Failed to reschedule appointment: ${de.message}`,"error")}).finally(()=>B(!1))},Jr=w.useCallback(async(C,L,z=!1)=>{if(!bt&&!z){Aa({type:"treatment",data:{patientId:C,formData:L}}),gr(!0);return}const de=x.find(Rt=>Rt.id===C);if(!de)return;const fe=L.procedures.reduce((Rt,Ue)=>Rt+Ue.cost,0),je=L.procedures.reduce((Rt,Ue)=>Rt+Ue.discount,0)+L.overallDiscount,Re=fe-je,ot=L.paidAmount;let It;ot>=Re?It="Paid":ot>0?It="Partially Paid":It="Unpaid",B(!0);try{const Ue={id:(await ke.addTreatment({patientId:C,doctorId:L.doctorId,date:new Date().toISOString(),notes:L.notes,procedures:L.procedures,totalCost:fe,totalDiscount:je,finalAmount:Re,overallDiscount:L.overallDiscount,userId:n==null?void 0:n.id,paidAmount:ot,paymentStatus:It,dayBookDate:bt==null?void 0:bt.date,patientName:de.name})).id,patientId:C,doctorId:L.doctorId,date:new Date().toISOString(),notes:L.notes,procedures:L.procedures,totalCost:fe,totalDiscount:je,finalAmount:Re,overallDiscount:L.overallDiscount,userId:n==null?void 0:n.id,paidAmount:ot,paymentStatus:It};se(kt=>[...kt,Ue]),N(kt=>kt.map(Ie=>{if(Ie.id===C){const ds=(Ie.balance||0)+(Re-ot);return{...Ie,balance:ds}}return Ie})),I(kt=>kt.map(Ie=>Ie.patientId===C&&Ie.date===ye(new Date,"yyyy-MM-dd")?{...Ie,status:"Completed"}:Ie)),Me(kt=>({...kt,queue:kt.queue.map(Ie=>Ie.patient.id===C?{...Ie,status:"Completed"}:Ie)})),L.scheduleFollowUp&&L.followUpDate&&L.followUpTime&&await Kr({patientId:C,patientName:de.name,date:L.followUpDate,time:L.followUpTime,reason:L.followUpReason||"Follow-up visit"}),Z(`Treatment recorded for ${de.name}.`,"success"),Oe("create","transaction",`Created treatment record for ${de.name}.`),Ut({...Ue})}catch(Rt){Z(`Failed to record treatment: ${Rt.message}`,"error")}finally{B(!1)}},[bt,x,n,se,_,N,I,Me,Kr,Z,Oe]),yr=w.useCallback(async C=>{B(!0);try{await ke.updateTreatment(parseInt(C.id,10),C),se(z=>z.map(de=>de.id===C.id?C:de));const L=x.find(z=>z.id===C.patientId);Z(`Treatment for ${(L==null?void 0:L.name)||""} updated.`,"success"),Oe("edit","transaction",`Updated treatment record ${C.id} for ${L==null?void 0:L.name}.`)}catch(L){Z(`Failed to update treatment: ${L.message}`,"error")}finally{B(!1)}},[x,se,Z,Oe]),xc=C=>We(C),mn=async()=>{if(Be){B(!0);try{await ke.deleteTreatment(parseInt(Be,10)),se(L=>L.filter(z=>z.id!==Be));const C=x.find(L=>{var z;return L.id===((z=$.find(de=>de.id===Be))==null?void 0:z.patientId)});if(_(L=>L.map(z=>z.treatmentId===Be?{...z,status:"deleted",deletedAt:new Date().toISOString()}:z)),C){const L=$.find(de=>de.id===Be),z=((L==null?void 0:L.finalAmount)||0)-((L==null?void 0:L.paidAmount)||0);N(de=>de.map(fe=>fe.id===C.id?{...fe,balance:(fe.balance||0)-z}:fe))}Z("Treatment record removed.","info"),C&&Oe("delete","transaction",`Deleted treatment record ${Be} for ${C.name}.`)}catch(C){Z(`Failed to delete treatment: ${C.message}`,"error")}finally{We(null),B(!1)}}},el=C=>{const L=x.find(z=>z.id===C);L&&be(L)},Ti=w.useCallback(async C=>{B(!0);try{console.log("Adding procedure:",C);const L=await ke.addProcedure({...C,status:"active"});if(console.log("API response:",L),!L.id)throw new Error("No ID returned from API");const z={...C,id:L.id,status:"active"};O(de=>[...de,z]),Oe("create","procedure",`Added new procedure: ${z.name}.`),Z(`Procedure '${z.name}' added.`,"success")}catch(L){console.error("Failed to add procedure:",L),Z(`Failed to add procedure: ${L.message}`,"error")}finally{B(!1)}},[Oe]),ts=w.useCallback(async C=>{B(!0);try{await ke.updateProcedure(parseInt(C.id,10),C),O(L=>L.map(z=>z.id===C.id?C:z)),Oe("edit","procedure",`Updated procedure: ${C.name}.`),Z(`Procedure '${C.name}' updated.`,"success")}catch(L){Z(`Failed to update procedure: ${L.message}`,"error")}finally{B(!1)}},[Oe]),Oa=C=>Xl(C),Mi=async()=>{if(ur){B(!0);try{await ke.deleteProcedure(parseInt(ur,10)),O(L=>L.filter(z=>z.id!==ur));const C=j.find(L=>L.id===ur);C&&(Oe("delete","procedure",`Deleted procedure: ${C.name}.`),Z(`Procedure '${C.name}' deleted.`,"info"))}catch(C){Z(`Failed to delete procedure: ${C.message}`,"error")}finally{Xl(null),B(!1)}}},Ei=w.useCallback(async C=>{const L=j.find(z=>z.id===C);if(L){const z=L.status==="active"?"disabled":"active";B(!0);try{await ke.updateProcedure(parseInt(C,10),{...L,status:z}),O(de=>de.map(fe=>fe.id===C?{...fe,status:z}:fe)),Oe("edit","procedure",`${z==="active"?"Enabled":"Disabled"} procedure: ${L.name}.`),Z(`Procedure '${L.name}' is now ${z}.`)}catch(de){Z(`Failed to update procedure status: ${de.message}`,"error")}finally{B(!1)}}},[j,Oe]),Ra=w.useCallback(async C=>{B(!0);try{const L=await ke.addDoctor({...C,status:"active"}),z={...C,id:L.id,status:"active"};A(de=>[...de,z]),Oe("create","doctor",`Added new doctor: ${z.name}.`),Z(`Doctor '${z.name}' added.`,"success")}catch(L){Z(`Failed to add doctor: ${L.message}`,"error")}finally{B(!1)}},[Oe]),yc=w.useCallback(async C=>{B(!0);try{await ke.updateDoctor(parseInt(C.id,10),C),A(L=>L.map(z=>z.id===C.id?C:z)),Oe("edit","doctor",`Updated doctor details for ${C.name}.`),Z(`Doctor '${C.name}' updated.`,"success")}catch(L){Z(`Failed to update doctor: ${L.message}`,"error")}finally{B(!1)}},[Oe]),Oi=C=>Ql(C),Ri=async()=>{if(vt){B(!0);try{await ke.deleteDoctor(parseInt(vt,10)),A(L=>L.filter(z=>z.id!==vt));const C=D.find(L=>L.id===vt);C&&(Oe("delete","doctor",`Deleted doctor: ${C.name}.`),Z(`Doctor '${C.name}' deleted.`,"info"))}catch(C){Z(`Failed to delete doctor: ${C.message}`,"error")}finally{Ql(null),B(!1)}}},ns=w.useCallback(async C=>{const L=D.find(z=>z.id===C);if(L){const z=L.status==="active"?"disabled":"active";B(!0);try{await ke.updateDoctor(parseInt(C,10),{...L,status:z}),A(de=>de.map(fe=>fe.id===C?{...fe,status:z}:fe)),Oe("edit","doctor",`${z==="active"?"Enabled":"Disabled"} doctor: ${L.name}.`),Z(`Doctor '${L.name}' is now ${z}.`)}catch(de){Z(`Failed to update doctor status: ${de.message}`,"error")}finally{B(!1)}}},[D,Oe]),as=(C,L=!1)=>{if(!bt&&!L){Aa({type:"manual_transaction",data:C}),gr(!0);return}const z=C.type.charAt(0).toUpperCase()+C.type.slice(1);C.id?(B(!0),ke.updateTransaction(parseInt(C.id,10),{description:C.description,amount:C.amount,type:C.type}).then(async()=>{var fe,De;const de=await ke.getTransactions();_(de),Z(`${z} updated successfully.`,"success"),R.find(je=>je.id===C.id)&&Oe("edit","transaction",`Updated manual ${C.type}: "${((fe=R.find(je=>je.id===C.id))==null?void 0:fe.description)||""}" (PKR ${((De=R.find(je=>je.id===C.id))==null?void 0:De.amount)||0}) to "${C.description}" (PKR ${C.amount}).`)}).catch(de=>{Z(`Failed to update ${z}: ${de.message}`,"error")}).finally(()=>B(!1))):(B(!0),ke.addTransaction({description:C.description,amount:C.amount,type:C.type,dayBookDate:bt==null?void 0:bt.date,userId:n==null?void 0:n.id,createdAt:new Date().toISOString()}).then(async de=>{const fe=await ke.getTransactions();_(fe),Z(`${z} added successfully.`,"success"),Oe("create","transaction",`Created manual ${C.type}: "${C.description}" for PKR ${Number(C.amount||0).toFixed(2)}.`)}).catch(de=>{Z(`Failed to add ${z}: ${de.message}`,"error")}).finally(()=>B(!1))),tt({isOpen:!1,type:"expense"})},vc=C=>un(C),tl=async()=>{var C,L;if(it){B(!0);try{await ke.deleteTransaction(parseInt(it,10));const z=await ke.getTransactions();_(z),Z("Transaction record removed.","info"),Oe("delete","transaction",`Deleted transaction: ${((C=R.find(de=>de.id===it))==null?void 0:C.description)||""} (PKR ${((L=R.find(de=>de.id===it))==null?void 0:L.amount)||0}).`)}catch(z){Z(`Failed to delete transaction: ${z.message}`,"error")}finally{un(null),B(!1)}}},nl=(C,L,z,de=!1)=>{if(!bt&&!de){Aa({type:"patient_payment",data:{patientId:C,amount:L,description:z}}),gr(!0);return}const fe=x.find(De=>De.id===C);fe&&(B(!0),ke.addTransaction({description:z||`Payment from ${fe.name}`,amount:L,type:"income",dayBookDate:bt==null?void 0:bt.date,userId:n==null?void 0:n.id,createdAt:new Date().toISOString()}).then(async De=>{const je=await ke.getTransactions();_(je),N(Re=>Re.map(ot=>ot.id===C?{...ot,balance:(ot.balance||0)-L}:ot)),Z(`Payment of PKR ${Number(L||0).toFixed(2)} recorded for ${fe.name}.`,"success"),Oe("create","transaction",`Recorded payment of PKR ${Number(L||0).toFixed(2)} for ${fe.name}. Description: ${z}`)}).catch(De=>{Z(`Failed to record payment: ${De.message}`,"error")}).finally(()=>B(!1)))},al=C=>{if(bt){Z("A day book is already open.","error");return}const L=ye(new Date,"yyyy-MM-dd");if(q.some(z=>z.date===L)){Z("A day book for today has already been created and closed.","error");return}B(!0),ke.addDaybook({date:L,openingBalance:C,userId:n==null?void 0:n.id}).then(z=>{const de={date:L,status:"open",openingBalance:C};ie(fe=>[...fe,de]),Z("Day book started successfully.","success"),h.cashInHand!==C?Oe("info","daybook",`Opening balance adjusted from PKR ${Number(h.cashInHand||0).toFixed(2)} to PKR ${Number(C||0).toFixed(2)}.`):Oe("info","daybook",`Day book started with opening balance PKR ${Number(C||0).toFixed(2)}.`),h.cashInHand!==C&&Oe("info","daybook",`Opening balance adjusted from PKR ${Number(h.cashInHand||0).toFixed(2)} to PKR ${Number(C||0).toFixed(2)}.`)}).catch(z=>{Z(`Failed to start day book: ${z.message}`,"error")}).finally(()=>B(!1))},La=C=>{if(!bt){Z("No day book is currently open.","error");return}B(!0),ke.closeDaybook(bt.date,C.transferredAmount,C.notes).then(L=>{const z={...bt,status:"closed",closingBalance:L.closingBalance,settledAmount:L.settledAmount,notes:L.notes};ie(de=>de.map(fe=>fe.date===bt.date?z:fe)),g(de=>({...de,cashInHand:z.closingBalance||0})),Z("Day book closed and settled successfully.","success"),Oe("info","daybook",`Day book closed. Transferred PKR ${Number(C.transferredAmount||0).toFixed(2)}. Closing balance: PKR ${(z.closingBalance||0).toFixed(2)}.`),da()}).catch(L=>{Z(`Failed to close day book: ${L.message}`,"error")}).finally(()=>B(!1))},Pa=C=>{if(bt){Z("Another day book is already open. Please close it first.","error");return}const L=q.find(je=>je.date===C);if(!L||L.status!=="closed"){Z("This day book cannot be reopened.","error");return}const{closingBalance:z,settledAmount:de,...fe}=L,De={...fe};B(!0),ke.reopenDaybook(De.date).then(je=>{const Re={...fe,status:"open"};ie(Ue=>Ue.map(kt=>kt.date===Re.date?Re:kt));const ot=(L.closingBalance||0)+(L.settledAmount||0)-L.openingBalance,Rt=(h.cashInHand||0)-ot;g(Ue=>({...Ue,cashInHand:Rt})),Z(`Day book for ${ye(new Date(C),"dd MMM, yyyy")} has been reopened.`,"success"),Oe("info","daybook",`Day book for ${ye(new Date(C),"dd MMM, yyyy")} was reopened.`)}).catch(je=>{Z(`Failed to reopen day book: ${je.message}`,"error")}).finally(()=>B(!1))},rs=C=>{En(C),Vr(!0)},ls=()=>{if(!vi)return;const C=x.find(L=>L.id===vi);C?Cw(C,$,D,h):Z("Patient not found.","error"),Vr(!1),En(null)},Li=C=>{const L=$.find(fe=>fe.id===C);if(!L){Z("Treatment not found.","error");return}const z=x.find(fe=>fe.id===L.patientId);if(!z){Z("Patient not found.","error");return}const de=D.find(fe=>fe.id===L.doctorId);xh(L,z,de,h)},Ba=C=>{xe(!1),we(null),setTimeout(()=>{we(C??null),xe(!0)},0)},On=C=>{$e(C||{}),Ye(!0)},ss=C=>{lt(C)},_a=C=>{tt({isOpen:!0,type:C.type,transaction:C.transaction})},Vn=C=>{ne(C)},is=C=>{Fr(!1),el(C.id)},rl=C=>{br(!1),rs(C.id)},Pi=C=>{Vn(C),ve(!1)},da=w.useCallback(async()=>{B(!0),te(null);try{const[C,L,z,de,fe,De,je,Re,ot,It]=await Promise.all([ke.getPatients(),ke.getDoctors(),ke.getProcedures(),ke.getAppointments(),ke.getTransactions(),ke.getTreatments(),ke.getUsers(),ke.getDaybooks(),ke.getActivityLogs(),ke.getQueue()]);N(C.map(Ue=>({...Ue,balance:Number(Ue.balance)||0}))),A(L.map(Ue=>({...Ue,contactNumbers:Array.isArray(Ue.contactNumbers)?Ue.contactNumbers:typeof Ue.contactNumbers=="string"?(()=>{try{const kt=JSON.parse(Ue.contactNumbers);return Array.isArray(kt)?kt:[Ue.contactNumbers]}catch{return[Ue.contactNumbers]}})():Ue.contactNumbers?[Ue.contactNumbers]:[],timings:typeof Ue.timings=="string"?(()=>{try{return JSON.parse(Ue.timings)}catch{return{}}})():Ue.timings}))),O(z),I(de),_(fe.map(Ue=>({...Ue,amount:Number(Ue.amount)}))),se(De.map(Ue=>({...Ue,procedures:Array.isArray(Ue.procedures)?Ue.procedures:typeof Ue.procedures=="string"?JSON.parse(Ue.procedures||"[]"):[]}))),v(je),ie(Re),K(ot.sort((Ue,kt)=>new Date(kt.date).getTime()-new Date(Ue.date).getTime()));const Rt=ye(new Date,"yyyy-MM-dd");Me({date:Rt,queue:It.map(Ue=>({patient:C.find(kt=>kt.id===Ue.patientId)||{id:Ue.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:Ue.queueNumber,status:Ue.status})),lastAssignedNumber:It.reduce((Ue,kt)=>Math.max(Ue,kt.queueNumber),0)})}catch(C){te(C.message||"Failed to refresh data")}finally{B(!1)}},[]),ll=w.useMemo(()=>new Map(x.map(C=>[C.id,C])),[x]),Bi=w.useMemo(()=>new Map(D.map(C=>[C.id,C])),[D]),nn=w.useMemo(()=>new Map($.map(C=>[C.id,C])),[$]),ua=async()=>{B(!0);try{await fetch("/api.php?entity=queue&reset=1",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`userId=${encodeURIComponent((n==null?void 0:n.id)||"")}`}),localStorage.setItem("lastQueueResetDate",ye(new Date,"yyyy-MM-dd")),Z("Queue has been reset.","success");const C=await ke.getQueue();Me(L=>({...L,queue:C.map(z=>({patient:x.find(de=>de.id===z.patientId)||{id:z.patientId,name:"Unknown",phone:"",dob:"",email:"",address:"",gender:"",medicalHistory:"",createdAt:"",balance:0},queueNumber:z.queueNumber,status:z.status})),lastAssignedNumber:C.reduce((z,de)=>Math.max(z,de.queueNumber),0)}))}catch{Z("Failed to reset queue.","error")}finally{B(!1)}};w.useEffect(()=>{(async()=>{try{const L=await fetch("/api.php?entity=app_settings");if(!L.ok)throw new Error("Failed to fetch app settings");const z=await L.json();g({...ph,...z})}catch{Z("Failed to load app settings from server.","error")}})()},[]);const sl=async C=>{try{if(!(await fetch("/api.php?entity=app_settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok)throw new Error("Failed to save app settings");g(C),Z("App settings saved.","success")}catch{Z("Failed to save app settings.","error")}},vr=async C=>{const L=x.find(z=>z.id===C);if(L){B(!0);try{await ke.restorePatient(parseInt(C,10)),N(z=>z.map(de=>de.id===C?{...de,isDeleted:!1,deletedAt:void 0}:de)),Z(`Patient ${L.name} has been restored.`,"success"),Oe("info","patient",`Restored patient record for ${L.name} (ID: ${L.id}).`)}finally{B(!1)}}},wc=async C=>{const L=new FormData;L.append("sqlfile",C),B(!0);try{if(!(await fetch("/api.php?entity=restore",{method:"POST",body:L})).ok)throw new Error("Restore failed");Z("Database restored successfully. Please reload the app.","success")}catch(z){Z(z.message||"Restore failed","error")}finally{B(!1)}},os=async()=>{if(Ot){Ta.current=!0;try{await ke.updateQueueEntry(Ot.queueEntry.id,{...Ot.queueEntry,status:"Waiting"}),Z("Visit reactivated. Patient is now in the waiting queue.","success"),await da(),Fn(null)}catch(C){Z(C.message||"Failed to reactivate visit","error")}finally{Ta.current=!1}}},cs=()=>{Ot&&(Yn({patient:Ot.patient,queueNumber:Ot.queueEntry.queueNumber}),pn(!0),Fn(null))},wr=()=>{if(!Ot)return;const C=$.filter(L=>L.patientId==Ot.patient.id).sort((L,z)=>new Date(z.date).getTime()-new Date(L.date).getTime())[0];C?(lt(C),be(null),Fn(null)):Z("No treatment record found for this patient.","error")},il={currentUser:n,currentView:r,isSidebarCollapsed:c,isMobileSidebarOpen:m,patients:x,activePatients:Wl,doctors:D,activeDoctors:wi,procedures:j,activeProcedures:pr,appointments:T,transactions:R,treatments:$,dailyQueue:me,appSettings:h,users:p,isFullScreen:pe,recentlyTreatedPatients:ta,dayBooks:q,activityLogs:ue,openDayBook:bt,sortedNavItems:Ma,isLoading:F,handleLogin:async C=>s(C),handleLogout:()=>s(null),handleSetCurrentView:o,toggleCollapse:()=>u(C=>!C),setIsMobileSidebarOpen:b,toggleFullScreen:()=>{},setIsLoading:B,addPatient:yn,editPatient:Wr,requestDeletePatient:es,addPatientFromMinimalForm:Ci,addWalkInPatient:sn,addWalkInAndShowSlip:Ai,addAppointment:Kr,rescheduleAppointment:xr,cancelAppointment:xn,addTreatment:Jr,editTreatment:yr,requestDeleteTreatment:xc,startTreatmentProcess:el,addProcedure:Ti,editProcedure:ts,requestDeleteProcedure:Oa,toggleProcedureStatus:Ei,addDoctor:Ra,editDoctor:yc,requestDeleteDoctor:Oi,toggleDoctorStatus:ns,setUsers:v,setAppSettings:C=>{g(C),sl(C)},setAreSettingsDirty:E,saveManualTransaction:as,requestDeleteExpense:vc,recordPatientPayment:nl,addPatientToQueue:Jl,addPatientToQueueAndShowSlip:Qr,requestCancelVisitFromQueue:Xr,confirmCancelVisit:Zr,assignPatientToSurgery:Di,refreshData:da,logActivity:Oe,startDayBook:al,closeDayBook:La,reopenDayBook:Pa,handlePrintPatientReport:rs,handlePrintSingleTreatment:Li,openPatientModal:Ba,openAppointmentModal:On,openEditTreatmentModal:ss,openManualTransactionModal:_a,openPaymentModal:Vn,patientMap:ll,doctorMap:Bi,treatmentMap:nn,resetQueueManually:ua,restorePatient:vr,restoreBackup:wc};return l.jsx(Gp.Provider,{value:il,children:n?l.jsxs(l.Fragment,{children:[F&&l.jsx(c3,{}),X&&l.jsx("div",{className:"text-red-600 p-4",children:X}),l.jsxs("div",{className:"flex h-screen bg-light-bg dark:bg-dark-bg text-dark-text dark:text-dark-text-primary",children:[l.jsx(vv,{currentView:r,setCurrentView:Ea,isCollapsed:c,toggleCollapse:Ni,isMobileSidebarOpen:m,setIsMobileSidebarOpen:b,currentUser:n,onLogout:ca}),l.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden ${m?"block":"hidden"}`,onClick:()=>b(!1)}),l.jsxs("div",{className:"flex-1 flex flex-col h-screen",children:[l.jsx(n3,{refreshData:da}),l.jsxs("main",{className:"flex-1 pb-24 overflow-y-auto",children:[r==="DASHBOARD"&&l.jsx(rw,{}),r==="PATIENTS"&&l.jsx(cw,{},x.length),r==="APPOINTMENTS"&&l.jsx(uw,{}),r==="ACCOUNTING"&&l.jsx(pw,{},R.length),r==="QUEUE"&&l.jsx(vw,{}),r==="SETTINGS"&&l.jsx(QS,{}),r==="DOCTORS"&&l.jsx(WS,{}),r==="PROCEDURES"&&l.jsx(e3,{})]})]}),l.jsx(r3,{isSidebarCollapsed:c,onAddPatient:Ba,onAddAppointment:On,onAddExpense:()=>_a({type:"expense"}),onAddTreatment:()=>Fr(!0),onGenerateSlip:()=>pn(!0),onPrintReport:()=>br(!0),onRecordPayment:()=>ve(!0),isFullScreen:pe,toggleFullScreen:Si}),l.jsx(l3,{isOpen:hr,onClose:()=>pn(!1)}),hr&&fr&&l.jsx(ut,{isOpen:hr,onClose:()=>{pn(!1),Yn(null)},title:"Queue Slip Confirmation",children:l.jsx(af,{slipData:fr,onClose:()=>{pn(!1),Yn(null)},appSettings:h})}),l.jsx(rb,{isOpen:hc,onClose:()=>Fr(!1),onSelect:is,patients:Wl,title:"Select Patient for Treatment",initialList:ta}),l.jsx(rb,{isOpen:yi,onClose:()=>br(!1),onSelect:rl,patients:Wl,title:"Select Patient for Report",initialList:ta}),l.jsx(s3,{isOpen:oe,onClose:()=>{xe(!1),we(null)},onSave:async C=>{"id"in C?(await Wr(C),Z("Patient details updated.","success")):(await yn(C),Z("New patient added.","success")),xe(!1),we(null)},existingPatient:Te},Te?Te.id:"add"),l.jsx(i3,{isOpen:qe,onClose:()=>Ye(!1),onSubmit:async C=>{_e.existingAppointment?await xr(_e.existingAppointment.id,C.date,C.time):await Kr(C),Ye(!1)},existingAppointment:_e.existingAppointment,defaultDate:_e.defaultDate,initialPatient:_e.initialPatient}),Kl&&ea&&l.jsx(ww,{isOpen:!0,onClose:()=>{be(null),lt(null)},patient:ea,onSubmit:async C=>{Se?await yr(C):await Jr(ea.id,C),be(null),lt(null)},existingTreatment:Se}),l.jsx(o3,{isOpen:ge.isOpen,onClose:()=>tt({isOpen:!1,type:"expense"}),onSave:as,transactionType:ge.type,existingTransaction:ge.transaction}),l.jsx(d3,{isOpen:!!tn,onClose:()=>ne(null),patient:tn}),l.jsx(u3,{isOpen:le,onClose:()=>ve(!1),onSelectPatient:Pi}),l.jsx(zr,{isOpen:!!Y,onClose:()=>Ee(null),onConfirm:pc,title:"Archive Patient",confirmButtonText:"Yes, Archive",children:l.jsx("p",{children:"Are you sure you want to archive this patient? Their records will be hidden but not permanently deleted."})}),l.jsxs(zr,{isOpen:!!Be,onClose:()=>We(null),onConfirm:mn,title:"Delete Treatment Record",children:[l.jsx("p",{children:"Are you sure you want to delete this treatment record? This will also mark the associated transaction as deleted."}),l.jsx("p",{className:"mt-2 text-sm font-bold text-red-600 dark:text-red-400",children:"This action cannot be undone."})]}),l.jsx(zr,{isOpen:!!it,onClose:()=>un(null),onConfirm:tl,title:"Delete Transaction",children:l.jsx("p",{children:"Are you sure you want to delete this transaction record? It will be marked as deleted and excluded from calculations."})}),l.jsxs(zr,{isOpen:!!vt,onClose:()=>Ql(null),onConfirm:Ri,title:"Delete Doctor",children:[l.jsx("p",{children:"Are you sure you want to permanently delete this doctor's record?"}),l.jsx("p",{className:"mt-2 text-sm font-bold text-red-600 dark:text-red-400",children:"This action cannot be undone and is only available if the doctor has no treatment history."})]}),l.jsxs(zr,{isOpen:!!ur,onClose:()=>Xl(null),onConfirm:Mi,title:"Delete Procedure",children:[l.jsx("p",{children:"Are you sure you want to permanently delete this procedure?"}),l.jsx("p",{className:"mt-2 text-sm font-bold text-red-600 dark:text-red-400",children:"This action cannot be undone and is only available if the procedure is not used in any treatment history."})]}),l.jsx(zr,{isOpen:W.show,onClose:ji,onConfirm:bc,title:"Unsaved Changes",confirmButtonText:"Discard Changes",children:l.jsx("p",{children:"You have unsaved changes in Settings. Are you sure you want to leave without saving?"})}),Mn&&l.jsx(rf,{isOpen:!!Mn,onClose:()=>Ca(null),onConfirm:C=>Zr(Mn.patient.id,C),patientName:Mn.patient.name,closeOnBackdropClick:!1}),l.jsx(zr,{isOpen:Zl,onClose:()=>{Vr(!1),En(null)},onConfirm:ls,title:"Confirm Paper Size",confirmButtonText:"Proceed to Print",children:l.jsx("p",{children:"Please ensure you have A4 paper loaded in your printer before proceeding."})})]}),mr&&l.jsx(ut,{isOpen:!0,onClose:()=>{gr(!1),Aa(null)},title:"Start Day Book",closeOnBackdropClick:!1,children:l.jsx(f3,{onSubmit:C=>{al(C)},initialBalance:h.cashInHand||0})}),l.jsx(ut,{isOpen:!!zt,onClose:()=>Ut(null),title:"Print Treatment Record?",size:"lg",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-lg font-semibold text-dark-text dark:text-dark-text-primary",children:"Would you like to print this treatment record for the patient?"}),l.jsxs("div",{className:"flex gap-4 justify-end",children:[l.jsx("button",{className:"px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-brand-blue-dark",onClick:()=>{if(zt){const C=zt,L=x.find(de=>de.id===C.patientId),z=D.find(de=>de.id===C.doctorId);L&&xh(C,L,z,h)}Ut(null)},children:"Print Now"}),l.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",onClick:()=>Ut(null),children:"No, Thanks"})]})]})}),Ot&&l.jsx(ut,{isOpen:!!Ot,onClose:()=>Fn(null),title:"Patient Already Visited Today",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-lg font-semibold text-dark-text dark:text-dark-text-primary",children:[Ot.patient.name," already has a visit for today with status: ",l.jsx("span",{className:"font-bold",children:Ot.queueEntry.status}),"."]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{className:"w-full bg-brand-blue text-white px-4 py-2 rounded-lg hover:bg-brand-blue-dark font-semibold",onClick:cs,disabled:Ta.current,children:"Regenerate Slip"}),Ot.queueEntry.status==="Cancelled"&&l.jsx("button",{className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-semibold",onClick:os,disabled:Ta.current,children:"Reactivate Visit"}),Ot.queueEntry.status==="Completed"&&l.jsx("button",{className:"w-full bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 font-semibold",onClick:wr,disabled:Ta.current,children:"Edit Treatment"}),l.jsx("button",{className:"w-full bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 font-semibold",onClick:()=>Fn(null),disabled:Ta.current,children:"Close"})]})]})})]}):l.jsx(kw,{onLogin:ki,users:p,appSettings:h})})},g3=()=>l.jsx(Qy,{children:l.jsx(m3,{})}),$p=document.getElementById("root");if(!$p)throw new Error("Could not find root element to mount to");const h3=Gy.createRoot($p);h3.render(l.jsx(Xe.StrictMode,{children:l.jsx(g3,{})}));
